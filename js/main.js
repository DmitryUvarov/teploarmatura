// ==================================================
// fancyBox v3.2.5
//
// Licensed GPLv3 for open source use
// or fancyBox Commercial License for commercial use
//
// http://fancyapps.com/fancybox/
// Copyright 2017 fancyApps
//
// ==================================================
!function(t,e,n,o){"use strict";function a(t){var e=n(t.currentTarget),o=t.data?t.data.options:{},a=e.attr("data-fancybox")||"",i=0,s=[];t.isDefaultPrevented()||(t.preventDefault(),a?(s=o.selector?n(o.selector):t.data?t.data.items:[],s=s.length?s.filter('[data-fancybox="'+a+'"]'):n('[data-fancybox="'+a+'"]'),i=s.index(e),i<0&&(i=0)):s=[e],n.fancybox.open(s,o,i))}if(n){if(n.fn.fancybox)return void("console"in t&&console.log("fancyBox already initialized"));var i={loop:!1,margin:[44,0],gutter:50,keyboard:!0,arrows:!0,infobar:!0,toolbar:!0,buttons:["slideShow","fullScreen","thumbs","share","close"],idleTime:3,smallBtn:"auto",protect:!1,modal:!1,image:{preload:"auto"},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},defaultType:"image",animationEffect:"zoom",animationDuration:500,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}<p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}"><svg viewBox="0 0 40 40"><path d="M20,23 L20,8 L20,23 L13,16 L20,23 L27,16 L20,23 M26,28 L13,28 L27,28 L14,28" /></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg viewBox="0 0 40 40"><path d="M 18,17 m-8,0 a 8,8 0 1,0 16,0 a 8,8 0 1,0 -16,0 M25,23 L31,29 L25,23" /></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg viewBox="0 0 40 40"><path d="M10,10 L30,30 M30,10 L10,30" /></svg></button>',smallBtn:'<button data-fancybox-close class="fancybox-close-small" title="{{CLOSE}}"></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><svg viewBox="0 0 40 40"><path d="M10,20 L30,20 L10,20 L18,28 L10,20 L18,12 L10,20"></path></svg></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><svg viewBox="0 0 40 40"><path d="M30,20 L10,20 L30,20 L22,28 L30,20 L22,12 L30,20"></path></svg></button>'},parentEl:"body",autoFocus:!1,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:4e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},onInit:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop,onActivate:n.noop,onDeactivate:n.noop,clickContent:function(t,e){return"image"===t.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{margin:0,clickContent:function(t,e){return"image"===t.type&&"toggleControls"},clickSlide:function(t,e){return"image"===t.type?"toggleControls":"close"},dblclickContent:function(t,e){return"image"===t.type&&"zoom"},dblclickSlide:function(t,e){return"image"===t.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schliessen",NEXT:"Weiter",PREV:"Zurück",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Maßstab"}}},s=n(t),r=n(e),c=0,l=function(t){return t&&t.hasOwnProperty&&t instanceof n},u=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),d=function(){var t,n=e.createElement("fakeelement"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in a)if(n.style[t]!==o)return a[t];return"transitionend"}(),f=function(t){return t&&t.length&&t[0].offsetHeight},p=function(t,o,a){var i=this;i.opts=n.extend(!0,{index:a},n.fancybox.defaults,o||{}),n.fancybox.isMobile&&(i.opts=n.extend(!0,{},i.opts,i.opts.mobile)),o&&n.isArray(o.buttons)&&(i.opts.buttons=o.buttons),i.id=i.opts.id||++c,i.group=[],i.currIndex=parseInt(i.opts.index,10)||0,i.prevIndex=null,i.prevPos=null,i.currPos=0,i.firstRun=null,i.createGroup(t),i.group.length&&(i.$lastFocus=n(e.activeElement).blur(),i.slides={},i.init())};n.extend(p.prototype,{init:function(){var a,i,s,c=this,l=c.group[c.currIndex],u=l.opts,d=n.fancybox.scrollbarWidth;c.scrollTop=r.scrollTop(),c.scrollLeft=r.scrollLeft(),n.fancybox.getInstance()||(n("body").addClass("fancybox-active"),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream?"image"!==l.type&&n("body").css("top",n("body").scrollTop()*-1).addClass("fancybox-iosfix"):!n.fancybox.isMobile&&e.body.scrollHeight>t.innerHeight&&(d===o&&(a=n('<div style="width:50px;height:50px;overflow:scroll;" />').appendTo("body"),d=n.fancybox.scrollbarWidth=a[0].offsetWidth-a[0].clientWidth,a.remove()),n("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar { margin-right: '+d+"px; }</style>"),n("body").addClass("compensate-for-scrollbar"))),s="",n.each(u.buttons,function(t,e){s+=u.btnTpl[e]||""}),i=n(c.translate(c,u.baseTpl.replace("{{buttons}}",s).replace("{{arrows}}",u.btnTpl.arrowLeft+u.btnTpl.arrowRight))).attr("id","fancybox-container-"+c.id).addClass("fancybox-is-hidden").addClass(u.baseClass).data("FancyBox",c).appendTo(u.parentEl),c.$refs={container:i},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(t){c.$refs[t]=i.find(".fancybox-"+t)}),c.trigger("onInit"),c.activate(),c.jumpTo(c.currIndex)},translate:function(t,e){var n=t.opts.i18n[t.opts.lang];return e.replace(/\{\{(\w+)\}\}/g,function(t,e){var a=n[e];return a===o?t:a})},createGroup:function(t){var e=this,a=n.makeArray(t);n.each(a,function(t,a){var i,s,r,c,l={},u={};n.isPlainObject(a)?(l=a,u=a.opts||a):"object"===n.type(a)&&n(a).length?(i=n(a),u=i.data(),u=n.extend({},u,u.options||{}),u.$orig=i,l.src=u.src||i.attr("href"),l.type||l.src||(l.type="inline",l.src=a)):l={type:"html",src:a+""},l.opts=n.extend(!0,{},e.opts,u),n.isArray(u.buttons)&&(l.opts.buttons=u.buttons),s=l.type||l.opts.type,r=l.src||"",!s&&r&&(r.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?s="image":r.match(/\.(pdf)((\?|#).*)?$/i)?s="pdf":"#"===r.charAt(0)&&(s="inline")),s?l.type=s:e.trigger("objectNeedsType",l),l.index=e.group.length,l.opts.$orig&&!l.opts.$orig.length&&delete l.opts.$orig,!l.opts.$thumb&&l.opts.$orig&&(l.opts.$thumb=l.opts.$orig.find("img:first")),l.opts.$thumb&&!l.opts.$thumb.length&&delete l.opts.$thumb,"function"===n.type(l.opts.caption)&&(l.opts.caption=l.opts.caption.apply(a,[e,l])),"function"===n.type(e.opts.caption)&&(l.opts.caption=e.opts.caption.apply(a,[e,l])),l.opts.caption instanceof n||(l.opts.caption=l.opts.caption===o?"":l.opts.caption+""),"ajax"===s&&(c=r.split(/\s+/,2),c.length>1&&(l.src=c.shift(),l.opts.filter=c.shift())),"auto"==l.opts.smallBtn&&(n.inArray(s,["html","inline","ajax"])>-1?(l.opts.toolbar=!1,l.opts.smallBtn=!0):l.opts.smallBtn=!1),"pdf"===s&&(l.type="iframe",l.opts.iframe.preload=!1),l.opts.modal&&(l.opts=n.extend(!0,l.opts,{infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),e.group.push(l)})},addEvents:function(){var o=this;o.removeEvents(),o.$refs.container.on("click.fb-close","[data-fancybox-close]",function(t){t.stopPropagation(),t.preventDefault(),o.close(t)}).on("click.fb-prev touchend.fb-prev","[data-fancybox-prev]",function(t){t.stopPropagation(),t.preventDefault(),o.previous()}).on("click.fb-next touchend.fb-next","[data-fancybox-next]",function(t){t.stopPropagation(),t.preventDefault(),o.next()}).on("click.fb","[data-fancybox-zoom]",function(t){o[o.isScaledDown()?"scaleToActual":"scaleToFit"]()}),s.on("orientationchange.fb resize.fb",function(t){t&&t.originalEvent&&"resize"===t.originalEvent.type?u(function(){o.update()}):(o.$refs.stage.hide(),setTimeout(function(){o.$refs.stage.show(),o.update()},600))}),r.on("focusin.fb",function(t){var a=n.fancybox?n.fancybox.getInstance():null;a.isClosing||!a.current||!a.current.opts.trapFocus||n(t.target).hasClass("fancybox-container")||n(t.target).is(e)||a&&"fixed"!==n(t.target).css("position")&&!a.$refs.container.has(t.target).length&&(t.stopPropagation(),a.focus(),s.scrollTop(o.scrollTop).scrollLeft(o.scrollLeft))}),r.on("keydown.fb",function(t){var e=o.current,a=t.keyCode||t.which;if(e&&e.opts.keyboard&&!n(t.target).is("input")&&!n(t.target).is("textarea"))return 8===a||27===a?(t.preventDefault(),void o.close(t)):37===a||38===a?(t.preventDefault(),void o.previous()):39===a||40===a?(t.preventDefault(),void o.next()):void o.trigger("afterKeydown",t,a)}),o.group[o.currIndex].opts.idleTime&&(o.idleSecondsCounter=0,r.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(t){o.idleSecondsCounter=0,o.isIdle&&o.showControls(),o.isIdle=!1}),o.idleInterval=t.setInterval(function(){o.idleSecondsCounter++,o.idleSecondsCounter>=o.group[o.currIndex].opts.idleTime&&(o.isIdle=!0,o.idleSecondsCounter=0,o.hideControls())},1e3))},removeEvents:function(){var e=this;s.off("orientationchange.fb resize.fb"),r.off("focusin.fb keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),e.idleInterval&&(t.clearInterval(e.idleInterval),e.idleInterval=null)},previous:function(t){return this.jumpTo(this.currPos-1,t)},next:function(t){return this.jumpTo(this.currPos+1,t)},jumpTo:function(t,e,a){var i,s,r,c,l,u,d,p=this,h=p.group.length;if(!(p.isSliding||p.isClosing||p.isAnimating&&p.firstRun)){if(t=parseInt(t,10),s=p.current?p.current.opts.loop:p.opts.loop,!s&&(t<0||t>=h))return!1;if(i=p.firstRun=null===p.firstRun,!(h<2&&!i&&p.isSliding)){if(c=p.current,p.prevIndex=p.currIndex,p.prevPos=p.currPos,r=p.createSlide(t),h>1&&((s||r.index>0)&&p.createSlide(t-1),(s||r.index<h-1)&&p.createSlide(t+1)),p.current=r,p.currIndex=r.index,p.currPos=r.pos,p.trigger("beforeShow",i),p.updateControls(),u=n.fancybox.getTranslate(r.$slide),r.isMoved=(0!==u.left||0!==u.top)&&!r.$slide.hasClass("fancybox-animated"),r.forcedDuration=o,n.isNumeric(e)?r.forcedDuration=e:e=r.opts[i?"animationDuration":"transitionDuration"],e=parseInt(e,10),i)return r.opts.animationEffect&&e&&p.$refs.container.css("transition-duration",e+"ms"),p.$refs.container.removeClass("fancybox-is-hidden"),f(p.$refs.container),p.$refs.container.addClass("fancybox-is-open"),r.$slide.addClass("fancybox-slide--current"),p.loadSlide(r),void p.preload();n.each(p.slides,function(t,e){n.fancybox.stop(e.$slide)}),r.$slide.removeClass("fancybox-slide--next fancybox-slide--previous").addClass("fancybox-slide--current"),r.isMoved?(l=Math.round(r.$slide.width()),n.each(p.slides,function(t,o){var a=o.pos-r.pos;n.fancybox.animate(o.$slide,{top:0,left:a*l+a*o.opts.gutter},e,function(){o.$slide.removeAttr("style").removeClass("fancybox-slide--next fancybox-slide--previous"),o.pos===p.currPos&&(r.isMoved=!1,p.complete())})})):p.$refs.stage.children().removeAttr("style"),r.isLoaded?p.revealContent(r):p.loadSlide(r),p.preload(),c.pos!==r.pos&&(d="fancybox-slide--"+(c.pos>r.pos?"next":"previous"),c.$slide.removeClass("fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous"),c.isComplete=!1,e&&(r.isMoved||r.opts.transitionEffect)&&(r.isMoved?c.$slide.addClass(d):(d="fancybox-animated "+d+" fancybox-fx-"+r.opts.transitionEffect,n.fancybox.animate(c.$slide,d,e,function(){c.$slide.removeClass(d).removeAttr("style")}))))}}},createSlide:function(t){var e,o,a=this;return o=t%a.group.length,o=o<0?a.group.length+o:o,!a.slides[t]&&a.group[o]&&(e=n('<div class="fancybox-slide"></div>').appendTo(a.$refs.stage),a.slides[t]=n.extend(!0,{},a.group[o],{pos:t,$slide:e,isLoaded:!1}),a.updateSlide(a.slides[t])),a.slides[t]},scaleToActual:function(t,e,a){var i,s,r,c,l,u=this,d=u.current,f=d.$content,p=parseInt(d.$slide.width(),10),h=parseInt(d.$slide.height(),10),g=d.width,b=d.height;"image"!=d.type||d.hasError||!f||u.isAnimating||(n.fancybox.stop(f),u.isAnimating=!0,t=t===o?.5*p:t,e=e===o?.5*h:e,i=n.fancybox.getTranslate(f),c=g/i.width,l=b/i.height,s=.5*p-.5*g,r=.5*h-.5*b,g>p&&(s=i.left*c-(t*c-t),s>0&&(s=0),s<p-g&&(s=p-g)),b>h&&(r=i.top*l-(e*l-e),r>0&&(r=0),r<h-b&&(r=h-b)),u.updateCursor(g,b),n.fancybox.animate(f,{top:r,left:s,scaleX:c,scaleY:l},a||330,function(){u.isAnimating=!1}),u.SlideShow&&u.SlideShow.isActive&&u.SlideShow.stop())},scaleToFit:function(t){var e,o=this,a=o.current,i=a.$content;"image"!=a.type||a.hasError||!i||o.isAnimating||(n.fancybox.stop(i),o.isAnimating=!0,e=o.getFitPos(a),o.updateCursor(e.width,e.height),n.fancybox.animate(i,{top:e.top,left:e.left,scaleX:e.width/i.width(),scaleY:e.height/i.height()},t||330,function(){o.isAnimating=!1}))},getFitPos:function(t){var e,o,a,i,s,r=this,c=t.$content,l=t.width,u=t.height,d=t.opts.margin;return!(!c||!c.length||!l&&!u)&&("number"===n.type(d)&&(d=[d,d]),2==d.length&&(d=[d[0],d[1],d[0],d[1]]),e=parseInt(r.$refs.stage.width(),10)-(d[1]+d[3]),o=parseInt(r.$refs.stage.height(),10)-(d[0]+d[2]),a=Math.min(1,e/l,o/u),i=Math.floor(a*l),s=Math.floor(a*u),{top:Math.floor(.5*(o-s))+d[0],left:Math.floor(.5*(e-i))+d[3],width:i,height:s})},update:function(){var t=this;n.each(t.slides,function(e,n){t.updateSlide(n)})},updateSlide:function(t){var e=this,o=t.$content;o&&(t.width||t.height)&&(e.isAnimating=!1,n.fancybox.stop(o),n.fancybox.setTranslate(o,e.getFitPos(t)),t.pos===e.currPos&&e.updateCursor()),t.$slide.trigger("refresh"),e.trigger("onUpdate",t)},updateCursor:function(t,e){var n,a=this,i=a.$refs.container.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut");a.current&&!a.isClosing&&(a.isZoomable()?(i.addClass("fancybox-is-zoomable"),n=t!==o&&e!==o?t<a.current.width&&e<a.current.height:a.isScaledDown(),n?i.addClass("fancybox-can-zoomIn"):a.current.opts.touch?i.addClass("fancybox-can-drag"):i.addClass("fancybox-can-zoomOut")):a.current.opts.touch&&i.addClass("fancybox-can-drag"))},isZoomable:function(){var t,e=this,o=e.current;if(o&&!e.isClosing)return!!("image"===o.type&&o.isLoaded&&!o.hasError&&("zoom"===o.opts.clickContent||n.isFunction(o.opts.clickContent)&&"zoom"===o.opts.clickContent(o))&&(t=e.getFitPos(o),o.width>t.width||o.height>t.height))},isScaledDown:function(){var t=this,e=t.current,o=e.$content,a=!1;return o&&(a=n.fancybox.getTranslate(o),a=a.width<e.width||a.height<e.height),a},canPan:function(){var t=this,e=t.current,n=e.$content,o=!1;return n&&(o=t.getFitPos(e),o=Math.abs(n.width()-o.width)>1||Math.abs(n.height()-o.height)>1),o},loadSlide:function(t){var e,o,a,i=this;if(!t.isLoading&&!t.isLoaded){switch(t.isLoading=!0,i.trigger("beforeLoad",t),e=t.type,o=t.$slide,o.off("refresh").trigger("onReset").addClass("fancybox-slide--"+(e||"unknown")).addClass(t.opts.slideClass),e){case"image":i.setImage(t);break;case"iframe":i.setIframe(t);break;case"html":i.setContent(t,t.src||t.content);break;case"inline":n(t.src).length?i.setContent(t,n(t.src)):i.setError(t);break;case"ajax":i.showLoading(t),a=n.ajax(n.extend({},t.opts.ajax.settings,{url:t.src,success:function(e,n){"success"===n&&i.setContent(t,e)},error:function(e,n){e&&"abort"!==n&&i.setError(t)}})),o.one("onReset",function(){a.abort()});break;default:i.setError(t)}return!0}},setImage:function(e){var o,a,i,s,r=this,c=e.opts.srcset||e.opts.image.srcset;if(c){i=t.devicePixelRatio||1,s=t.innerWidth*i,a=c.split(",").map(function(t){var e={};return t.trim().split(/\s+/).forEach(function(t,n){var o=parseInt(t.substring(0,t.length-1),10);return 0===n?e.url=t:void(o&&(e.value=o,e.postfix=t[t.length-1]))}),e}),a.sort(function(t,e){return t.value-e.value});for(var l=0;l<a.length;l++){var u=a[l];if("w"===u.postfix&&u.value>=s||"x"===u.postfix&&u.value>=i){o=u;break}}!o&&a.length&&(o=a[a.length-1]),o&&(e.src=o.url,e.width&&e.height&&"w"==o.postfix&&(e.height=e.width/e.height*o.value,e.width=o.value))}e.$content=n('<div class="fancybox-image-wrap"></div>').addClass("fancybox-is-hidden").appendTo(e.$slide),e.opts.preload!==!1&&e.opts.width&&e.opts.height&&(e.opts.thumb||e.opts.$thumb)?(e.width=e.opts.width,e.height=e.opts.height,e.$ghost=n("<img />").one("error",function(){n(this).remove(),e.$ghost=null,r.setBigImage(e)}).one("load",function(){r.afterLoad(e),r.setBigImage(e)}).addClass("fancybox-image").appendTo(e.$content).attr("src",e.opts.thumb||e.opts.$thumb.attr("src"))):r.setBigImage(e)},setBigImage:function(t){var e=this,o=n("<img />");t.$image=o.one("error",function(){e.setError(t)}).one("load",function(){clearTimeout(t.timouts),t.timouts=null,e.isClosing||(t.width=this.naturalWidth,t.height=this.naturalHeight,t.opts.image.srcset&&o.attr("sizes","100vw").attr("srcset",t.opts.image.srcset),e.hideLoading(t),t.$ghost?t.timouts=setTimeout(function(){t.timouts=null,t.$ghost.hide()},Math.min(300,Math.max(1e3,t.height/1600))):e.afterLoad(t))}).addClass("fancybox-image").attr("src",t.src).appendTo(t.$content),(o[0].complete||"complete"==o[0].readyState)&&o[0].naturalWidth&&o[0].naturalHeight?o.trigger("load"):o[0].error?o.trigger("error"):t.timouts=setTimeout(function(){o[0].complete||t.hasError||e.showLoading(t)},100)},setIframe:function(t){var e,a=this,i=t.opts.iframe,s=t.$slide;t.$content=n('<div class="fancybox-content'+(i.preload?" fancybox-is-hidden":"")+'"></div>').css(i.css).appendTo(s),e=n(i.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(i.attr).appendTo(t.$content),i.preload?(a.showLoading(t),e.on("load.fb error.fb",function(e){this.isReady=1,t.$slide.trigger("refresh"),a.afterLoad(t)}),s.on("refresh.fb",function(){var n,a,s,r=t.$content,c=i.css.width,l=i.css.height;if(1===e[0].isReady){try{a=e.contents(),s=a.find("body")}catch(t){}s&&s.length&&(c===o&&(n=e[0].contentWindow.document.documentElement.scrollWidth,c=Math.ceil(s.outerWidth(!0)+(r.width()-n)),c+=r.outerWidth()-r.innerWidth()),l===o&&(l=Math.ceil(s.outerHeight(!0)),l+=r.outerHeight()-r.innerHeight()),c&&r.width(c),l&&r.height(l)),r.removeClass("fancybox-is-hidden")}})):this.afterLoad(t),e.attr("src",t.src),t.opts.smallBtn===!0&&t.$content.prepend(a.translate(t,t.opts.btnTpl.smallBtn)),s.one("onReset",function(){try{n(this).find("iframe").hide().attr("src","//about:blank")}catch(t){}n(this).empty(),t.isLoaded=!1})},setContent:function(t,e){var o=this;o.isClosing||(o.hideLoading(t),t.$slide.empty(),l(e)&&e.parent().length?(e.parent(".fancybox-slide--inline").trigger("onReset"),t.$placeholder=n("<div></div>").hide().insertAfter(e),e.css("display","inline-block")):t.hasError||("string"===n.type(e)&&(e=n("<div>").append(n.trim(e)).contents(),3===e[0].nodeType&&(e=n("<div>").html(e))),t.opts.filter&&(e=n("<div>").html(e).find(t.opts.filter))),t.$slide.one("onReset",function(){t.$placeholder&&(t.$placeholder.after(e.hide()).remove(),t.$placeholder=null),t.$smallBtn&&(t.$smallBtn.remove(),t.$smallBtn=null),t.hasError||(n(this).empty(),t.isLoaded=!1)}),t.$content=n(e).appendTo(t.$slide),this.afterLoad(t))},setError:function(t){t.hasError=!0,t.$slide.removeClass("fancybox-slide--"+t.type),this.setContent(t,this.translate(t,t.opts.errorTpl))},showLoading:function(t){var e=this;t=t||e.current,t&&!t.$spinner&&(t.$spinner=n(e.opts.spinnerTpl).appendTo(t.$slide))},hideLoading:function(t){var e=this;t=t||e.current,t&&t.$spinner&&(t.$spinner.remove(),delete t.$spinner)},afterLoad:function(t){var e=this;e.isClosing||(t.isLoading=!1,t.isLoaded=!0,e.trigger("afterLoad",t),e.hideLoading(t),t.opts.smallBtn&&!t.$smallBtn&&(t.$smallBtn=n(e.translate(t,t.opts.btnTpl.smallBtn)).appendTo(t.$content.filter("div,form").first())),t.opts.protect&&t.$content&&!t.hasError&&(t.$content.on("contextmenu.fb",function(t){return 2==t.button&&t.preventDefault(),!0}),"image"===t.type&&n('<div class="fancybox-spaceball"></div>').appendTo(t.$content)),e.revealContent(t))},revealContent:function(t){var e,a,i,s,r,c=this,l=t.$slide,u=!1;return e=t.opts[c.firstRun?"animationEffect":"transitionEffect"],i=t.opts[c.firstRun?"animationDuration":"transitionDuration"],i=parseInt(t.forcedDuration===o?i:t.forcedDuration,10),!t.isMoved&&t.pos===c.currPos&&i||(e=!1),"zoom"!==e||t.pos===c.currPos&&i&&"image"===t.type&&!t.hasError&&(u=c.getThumbPos(t))||(e="fade"),"zoom"===e?(r=c.getFitPos(t),r.scaleX=r.width/u.width,r.scaleY=r.height/u.height,delete r.width,delete r.height,s=t.opts.zoomOpacity,"auto"==s&&(s=Math.abs(t.width/t.height-u.width/u.height)>.1),s&&(u.opacity=.1,r.opacity=1),n.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"),u),f(t.$content),void n.fancybox.animate(t.$content,r,i,function(){c.complete()})):(c.updateSlide(t),e?(n.fancybox.stop(l),a="fancybox-animated fancybox-slide--"+(t.pos>=c.prevPos?"next":"previous")+" fancybox-fx-"+e,l.removeAttr("style").removeClass("fancybox-slide--current fancybox-slide--next fancybox-slide--previous").addClass(a),t.$content.removeClass("fancybox-is-hidden"),f(l),void n.fancybox.animate(l,"fancybox-slide--current",i,function(e){l.removeClass(a).removeAttr("style"),t.pos===c.currPos&&c.complete()},!0)):(f(l),t.$content.removeClass("fancybox-is-hidden"),void(t.pos===c.currPos&&c.complete())))},getThumbPos:function(o){var a,i=this,s=!1,r=function(e){for(var o,a=e[0],i=a.getBoundingClientRect(),s=[];null!==a.parentElement;)"hidden"!==n(a.parentElement).css("overflow")&&"auto"!==n(a.parentElement).css("overflow")||s.push(a.parentElement.getBoundingClientRect()),a=a.parentElement;return o=s.every(function(t){var e=Math.min(i.right,t.right)-Math.max(i.left,t.left),n=Math.min(i.bottom,t.bottom)-Math.max(i.top,t.top);return e>0&&n>0}),o&&i.bottom>0&&i.right>0&&i.left<n(t).width()&&i.top<n(t).height()},c=o.opts.$thumb,l=c?c.offset():0;return l&&c[0].ownerDocument===e&&r(c)&&(a=i.$refs.stage.offset(),s={top:l.top-a.top+parseFloat(c.css("border-top-width")||0),left:l.left-a.left+parseFloat(c.css("border-left-width")||0),width:c.width(),height:c.height(),scaleX:1,scaleY:1}),s},complete:function(){var t=this,o=t.current,a={};o.isMoved||!o.isLoaded||o.isComplete||(o.isComplete=!0,o.$slide.siblings().trigger("onReset"),f(o.$slide),o.$slide.addClass("fancybox-slide--complete"),n.each(t.slides,function(e,o){o.pos>=t.currPos-1&&o.pos<=t.currPos+1?a[o.pos]=o:o&&(n.fancybox.stop(o.$slide),o.$slide.off().remove())}),t.slides=a,t.updateCursor(),t.trigger("afterShow"),(n(e.activeElement).is("[disabled]")||o.opts.autoFocus&&"image"!=o.type&&"iframe"!==o.type)&&t.focus())},preload:function(){var t,e,n=this;n.group.length<2||(t=n.slides[n.currPos+1],e=n.slides[n.currPos-1],t&&"image"===t.type&&n.loadSlide(t),e&&"image"===e.type&&n.loadSlide(e))},focus:function(){var t,e=this.current;this.isClosing||(e&&e.isComplete&&(t=e.$slide.find("input[autofocus]:enabled:visible:first"),t.length||(t=e.$slide.find("button,:input,[tabindex],a").filter(":enabled:visible:first"))),t=t&&t.length?t:this.$refs.container,t.focus())},activate:function(){var t=this;n(".fancybox-container").each(function(){var e=n(this).data("FancyBox");e&&e.id!==t.id&&!e.isClosing&&(e.trigger("onDeactivate"),e.removeEvents(),e.isVisible=!1)}),t.isVisible=!0,(t.current||t.isIdle)&&(t.update(),t.updateControls()),t.trigger("onActivate"),t.addEvents()},close:function(t,e){var o,a,i,s,r,c,l=this,p=l.current,h=function(){l.cleanUp(t)};return!l.isClosing&&(l.isClosing=!0,l.trigger("beforeClose",t)===!1?(l.isClosing=!1,u(function(){l.update()}),!1):(l.removeEvents(),p.timouts&&clearTimeout(p.timouts),i=p.$content,o=p.opts.animationEffect,a=n.isNumeric(e)?e:o?p.opts.animationDuration:0,p.$slide.off(d).removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),p.$slide.siblings().trigger("onReset").remove(),a&&l.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing"),l.hideLoading(p),l.hideControls(),l.updateCursor(),"zoom"!==o||t!==!0&&i&&a&&"image"===p.type&&!p.hasError&&(c=l.getThumbPos(p))||(o="fade"),"zoom"===o?(n.fancybox.stop(i),r=n.fancybox.getTranslate(i),r.width=r.width*r.scaleX,r.height=r.height*r.scaleY,s=p.opts.zoomOpacity,"auto"==s&&(s=Math.abs(p.width/p.height-c.width/c.height)>.1),s&&(c.opacity=0),r.scaleX=r.width/c.width,r.scaleY=r.height/c.height,r.width=c.width,r.height=c.height,n.fancybox.setTranslate(p.$content,r),f(p.$content),n.fancybox.animate(p.$content,c,a,h),!0):(o&&a?t===!0?setTimeout(h,a):n.fancybox.animate(p.$slide.removeClass("fancybox-slide--current"),"fancybox-animated fancybox-slide--previous fancybox-fx-"+o,a,h):h(),!0)))},cleanUp:function(t){var o,a,i=this,r=n("body");i.current.$slide.trigger("onReset"),i.$refs.container.empty().remove(),i.trigger("afterClose",t),i.$lastFocus&&i.current.opts.backFocus&&i.$lastFocus.focus(),i.current=null,o=n.fancybox.getInstance(),o?o.activate():(s.scrollTop(i.scrollTop).scrollLeft(i.scrollLeft),r.removeClass("fancybox-active compensate-for-scrollbar"),r.hasClass("fancybox-iosfix")&&(a=parseInt(e.body.style.top,10),r.removeClass("fancybox-iosfix").css("top","").scrollTop(a*-1)),n("#fancybox-style-noscroll").remove())},trigger:function(t,e){var o,a=Array.prototype.slice.call(arguments,1),i=this,s=e&&e.opts?e:i.current;return s?a.unshift(s):s=i,a.unshift(i),n.isFunction(s.opts[t])&&(o=s.opts[t].apply(s,a)),o===!1?o:void("afterClose"!==t&&i.$refs?i.$refs.container.trigger(t+".fb",a):r.trigger(t+".fb",a))},updateControls:function(t){var e=this,n=e.current,o=n.index,a=n.opts.caption,i=e.$refs.container,s=e.$refs.caption;n.$slide.trigger("refresh"),e.$caption=a&&a.length?s.html(a):null,e.isHiddenControls||e.isIdle||e.showControls(),i.find("[data-fancybox-count]").html(e.group.length),i.find("[data-fancybox-index]").html(o+1),i.find("[data-fancybox-prev]").prop("disabled",!n.opts.loop&&o<=0),i.find("[data-fancybox-next]").prop("disabled",!n.opts.loop&&o>=e.group.length-1),"image"===n.type?i.find("[data-fancybox-download]").attr("href",n.opts.image.src||n.src).show():i.find("[data-fancybox-download],[data-fancybox-zoom]").hide()},hideControls:function(){this.isHiddenControls=!0,this.$refs.container.removeClass("fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav")},showControls:function(){var t=this,e=t.current?t.current.opts:t.opts,n=t.$refs.container;t.isHiddenControls=!1,t.idleSecondsCounter=0,n.toggleClass("fancybox-show-toolbar",!(!e.toolbar||!e.buttons)).toggleClass("fancybox-show-infobar",!!(e.infobar&&t.group.length>1)).toggleClass("fancybox-show-nav",!!(e.arrows&&t.group.length>1)).toggleClass("fancybox-is-modal",!!e.modal),t.$caption?n.addClass("fancybox-show-caption "):n.removeClass("fancybox-show-caption")},toggleControls:function(){this.isHiddenControls?this.showControls():this.hideControls()}}),n.fancybox={version:"3.2.5",defaults:i,getInstance:function(t){var e=n('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),o=Array.prototype.slice.call(arguments,1);return e instanceof p&&("string"===n.type(t)?e[t].apply(e,o):"function"===n.type(t)&&t.apply(e,o),e)},open:function(t,e,n){return new p(t,e,n)},close:function(t){var e=this.getInstance();e&&(e.close(),t===!0&&this.close())},destroy:function(){this.close(!0),r.off("click.fb-start")},isMobile:e.createTouch!==o&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:function(){var n=e.createElement("div");return t.getComputedStyle&&t.getComputedStyle(n).getPropertyValue("transform")&&!(e.documentMode&&e.documentMode<11)}(),getTranslate:function(t){var e;if(!t||!t.length)return!1;if(e=t.eq(0).css("transform"),e&&e.indexOf("matrix")!==-1?(e=e.split("(")[1],e=e.split(")")[0],e=e.split(",")):e=[],e.length)e=e.length>10?[e[13],e[12],e[0],e[5]]:[e[5],e[4],e[0],e[3]],e=e.map(parseFloat);else{e=[0,0,1,1];var n=/\.*translate\((.*)px,(.*)px\)/i,o=n.exec(t.eq(0).attr("style"));o&&(e[0]=parseFloat(o[2]),e[1]=parseFloat(o[1]))}return{top:e[0],left:e[1],scaleX:e[2],scaleY:e[3],opacity:parseFloat(t.css("opacity")),width:t.width(),height:t.height()}},setTranslate:function(t,e){var n="",a={};if(t&&e)return e.left===o&&e.top===o||(n=(e.left===o?t.position().left:e.left)+"px, "+(e.top===o?t.position().top:e.top)+"px",n=this.use3d?"translate3d("+n+", 0px)":"translate("+n+")"),e.scaleX!==o&&e.scaleY!==o&&(n=(n.length?n+" ":"")+"scale("+e.scaleX+", "+e.scaleY+")"),n.length&&(a.transform=n),e.opacity!==o&&(a.opacity=e.opacity),e.width!==o&&(a.width=e.width),e.height!==o&&(a.height=e.height),t.css(a)},animate:function(t,e,a,i,s){n.isFunction(a)&&(i=a,a=null),n.isPlainObject(e)||t.removeAttr("style"),t.on(d,function(a){(!a||!a.originalEvent||t.is(a.originalEvent.target)&&"z-index"!=a.originalEvent.propertyName)&&(n.fancybox.stop(t),n.isPlainObject(e)?e.scaleX!==o&&e.scaleY!==o&&(t.css("transition-duration",""),e.width=Math.round(t.width()*e.scaleX),e.height=Math.round(t.height()*e.scaleY),e.scaleX=1,e.scaleY=1,n.fancybox.setTranslate(t,e)):s!==!0&&t.removeClass(e),n.isFunction(i)&&i(a))}),n.isNumeric(a)&&t.css("transition-duration",a+"ms"),n.isPlainObject(e)?n.fancybox.setTranslate(t,e):t.addClass(e),e.scaleX&&t.hasClass("fancybox-image-wrap")&&t.parent().addClass("fancybox-is-scaling"),t.data("timer",setTimeout(function(){t.trigger("transitionend")},a+16))},stop:function(t){clearTimeout(t.data("timer")),t.off("transitionend").css("transition-duration",""),t.hasClass("fancybox-image-wrap")&&t.parent().removeClass("fancybox-is-scaling")}},n.fn.fancybox=function(t){var e;return t=t||{},e=t.selector||!1,e?n("body").off("click.fb-start",e).on("click.fb-start",e,{options:t},a):this.off("click.fb-start").on("click.fb-start",{items:this,options:t},a),this},r.on("click.fb-start","[data-fancybox]",a)}}(window,document,window.jQuery||jQuery),function(t){"use strict";var e=function(e,n,o){if(e)return o=o||"","object"===t.type(o)&&(o=t.param(o,!0)),t.each(n,function(t,n){e=e.replace("$"+t,n||"")}),o.length&&(e+=(e.indexOf("?")>0?"&":"?")+o),e},n={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"//www.youtube.com/embed/$4",thumb:"//img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1,api:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},metacafe:{matcher:/metacafe.com\/watch\/(\d+)\/(.*)?/,type:"iframe",url:"//www.metacafe.com/embed/$1/?ap=1"},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"iframe",url:"//www.dailymotion.com/embed/video/$1"},vine:{matcher:/vine.co\/v\/([a-zA-Z0-9\?\=\-]+)/,type:"iframe",url:"//vine.co/v/$1/embed/simple"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"
},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12])+"&output="+(t[12]&&t[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/maps?q="+t[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}};t(document).on("objectNeedsType.fb",function(o,a,i){var s,r,c,l,u,d,f,p=i.src||"",h=!1;s=t.extend(!0,{},n,i.opts.media),t.each(s,function(n,o){if(c=p.match(o.matcher)){if(h=o.type,d={},o.paramPlace&&c[o.paramPlace]){u=c[o.paramPlace],"?"==u[0]&&(u=u.substring(1)),u=u.split("&");for(var a=0;a<u.length;++a){var s=u[a].split("=",2);2==s.length&&(d[s[0]]=decodeURIComponent(s[1].replace(/\+/g," ")))}}return l=t.extend(!0,{},o.params,i.opts[n],d),p="function"===t.type(o.url)?o.url.call(this,c,l,i):e(o.url,c,l),r="function"===t.type(o.thumb)?o.thumb.call(this,c,l,i):e(o.thumb,c),"vimeo"===n&&(p=p.replace("&%23","#")),!1}}),h?(i.src=p,i.type=h,i.opts.thumb||i.opts.$thumb&&i.opts.$thumb.length||(i.opts.thumb=r),"iframe"===h&&(t.extend(!0,i.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}}),i.contentProvider=f,i.opts.slideClass+=" fancybox-slide--"+("gmap_place"==f||"gmap_search"==f?"map":"video"))):p&&(i.type=i.opts.defaultType)})}(window.jQuery||jQuery),function(t,e,n){"use strict";var o=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),a=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)}}(),i=function(e){var n=[];e=e.originalEvent||e||t.e,e=e.touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e];for(var o in e)e[o].pageX?n.push({x:e[o].pageX,y:e[o].pageY}):e[o].clientX&&n.push({x:e[o].clientX,y:e[o].clientY});return n},s=function(t,e,n){return e&&t?"x"===n?t.x-e.x:"y"===n?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},r=function(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea')||n.isFunction(t.get(0).onclick)||t.data("selectable"))return!0;for(var e=0,o=t[0].attributes,a=o.length;e<a;e++)if("data-fancybox-"===o[e].nodeName.substr(0,14))return!0;return!1},c=function(e){var n=t.getComputedStyle(e)["overflow-y"],o=t.getComputedStyle(e)["overflow-x"],a=("scroll"===n||"auto"===n)&&e.scrollHeight>e.clientHeight,i=("scroll"===o||"auto"===o)&&e.scrollWidth>e.clientWidth;return a||i},l=function(t){for(var e=!1;;){if(e=c(t.get(0)))break;if(t=t.parent(),!t.length||t.hasClass("fancybox-stage")||t.is("body"))break}return e},u=function(t){var e=this;e.instance=t,e.$bg=t.$refs.bg,e.$stage=t.$refs.stage,e.$container=t.$refs.container,e.destroy(),e.$container.on("touchstart.fb.touch mousedown.fb.touch",n.proxy(e,"ontouchstart"))};u.prototype.destroy=function(){this.$container.off(".fb.touch")},u.prototype.ontouchstart=function(o){var a=this,c=n(o.target),u=a.instance,d=u.current,f=d.$content,p="touchstart"==o.type;if(p&&a.$container.off("mousedown.fb.touch"),!d||a.instance.isAnimating||a.instance.isClosing)return o.stopPropagation(),void o.preventDefault();if((!o.originalEvent||2!=o.originalEvent.button)&&c.length&&!r(c)&&!r(c.parent())&&!(o.originalEvent.clientX>c[0].clientWidth+c.offset().left)&&(a.startPoints=i(o),a.startPoints&&!(a.startPoints.length>1&&u.isSliding))){if(a.$target=c,a.$content=f,a.canTap=!0,a.opts=d.opts.touch,n(e).off(".fb.touch"),n(e).on(p?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",n.proxy(a,"ontouchend")),n(e).on(p?"touchmove.fb.touch":"mousemove.fb.touch",n.proxy(a,"ontouchmove")),!a.opts&&!u.canPan()||!c.is(a.$stage)&&!a.$stage.find(c).length)return void(c.is("img")&&o.preventDefault());o.stopPropagation(),n.fancybox.isMobile&&(l(a.$target)||l(a.$target.parent()))||o.preventDefault(),a.canvasWidth=Math.round(d.$slide[0].clientWidth),a.canvasHeight=Math.round(d.$slide[0].clientHeight),a.startTime=(new Date).getTime(),a.distanceX=a.distanceY=a.distance=0,a.isPanning=!1,a.isSwiping=!1,a.isZooming=!1,a.sliderStartPos=a.sliderLastPos||{top:0,left:0},a.contentStartPos=n.fancybox.getTranslate(a.$content),a.contentLastPos=null,1!==a.startPoints.length||a.isZooming||(a.canTap=!u.isSliding,"image"===d.type&&(a.contentStartPos.width>a.canvasWidth+1||a.contentStartPos.height>a.canvasHeight+1)?(n.fancybox.stop(a.$content),a.$content.css("transition-duration","0ms"),a.isPanning=!0):a.isSwiping=!0,a.$container.addClass("fancybox-controls--isGrabbing")),2!==a.startPoints.length||u.isAnimating||d.hasError||"image"!==d.type||!d.isLoaded&&!d.$ghost||(a.isZooming=!0,a.isSwiping=!1,a.isPanning=!1,n.fancybox.stop(a.$content),a.$content.css("transition-duration","0ms"),a.centerPointStartX=.5*(a.startPoints[0].x+a.startPoints[1].x)-n(t).scrollLeft(),a.centerPointStartY=.5*(a.startPoints[0].y+a.startPoints[1].y)-n(t).scrollTop(),a.percentageOfImageAtPinchPointX=(a.centerPointStartX-a.contentStartPos.left)/a.contentStartPos.width,a.percentageOfImageAtPinchPointY=(a.centerPointStartY-a.contentStartPos.top)/a.contentStartPos.height,a.startDistanceBetweenFingers=s(a.startPoints[0],a.startPoints[1]))}},u.prototype.ontouchmove=function(t){var e=this;if(e.newPoints=i(t),n.fancybox.isMobile&&(l(e.$target)||l(e.$target.parent())))return t.stopPropagation(),void(e.canTap=!1);if((e.opts||e.instance.canPan())&&e.newPoints&&e.newPoints.length&&(e.distanceX=s(e.newPoints[0],e.startPoints[0],"x"),e.distanceY=s(e.newPoints[0],e.startPoints[0],"y"),e.distance=s(e.newPoints[0],e.startPoints[0]),e.distance>0)){if(!e.$target.is(e.$stage)&&!e.$stage.find(e.$target).length)return;t.stopPropagation(),t.preventDefault(),e.isSwiping?e.onSwipe():e.isPanning?e.onPan():e.isZooming&&e.onZoom()}},u.prototype.onSwipe=function(){var e,i=this,s=i.isSwiping,r=i.sliderStartPos.left||0;s===!0?Math.abs(i.distance)>10&&(i.canTap=!1,i.instance.group.length<2&&i.opts.vertical?i.isSwiping="y":i.instance.isSliding||i.opts.vertical===!1||"auto"===i.opts.vertical&&n(t).width()>800?i.isSwiping="x":(e=Math.abs(180*Math.atan2(i.distanceY,i.distanceX)/Math.PI),i.isSwiping=e>45&&e<135?"y":"x"),i.instance.isSliding=i.isSwiping,i.startPoints=i.newPoints,n.each(i.instance.slides,function(t,e){n.fancybox.stop(e.$slide),e.$slide.css("transition-duration","0ms"),e.inTransition=!1,e.pos===i.instance.current.pos&&(i.sliderStartPos.left=n.fancybox.getTranslate(e.$slide).left)}),i.instance.SlideShow&&i.instance.SlideShow.isActive&&i.instance.SlideShow.stop()):("x"==s&&(i.distanceX>0&&(i.instance.group.length<2||0===i.instance.current.index&&!i.instance.current.opts.loop)?r+=Math.pow(i.distanceX,.8):i.distanceX<0&&(i.instance.group.length<2||i.instance.current.index===i.instance.group.length-1&&!i.instance.current.opts.loop)?r-=Math.pow(-i.distanceX,.8):r+=i.distanceX),i.sliderLastPos={top:"x"==s?0:i.sliderStartPos.top+i.distanceY,left:r},i.requestId&&(a(i.requestId),i.requestId=null),i.requestId=o(function(){i.sliderLastPos&&(n.each(i.instance.slides,function(t,e){var o=e.pos-i.instance.currPos;n.fancybox.setTranslate(e.$slide,{top:i.sliderLastPos.top,left:i.sliderLastPos.left+o*i.canvasWidth+o*e.opts.gutter})}),i.$container.addClass("fancybox-is-sliding"))}))},u.prototype.onPan=function(){var t,e,i,s=this;s.canTap=!1,t=s.contentStartPos.width>s.canvasWidth?s.contentStartPos.left+s.distanceX:s.contentStartPos.left,e=s.contentStartPos.top+s.distanceY,i=s.limitMovement(t,e,s.contentStartPos.width,s.contentStartPos.height),i.scaleX=s.contentStartPos.scaleX,i.scaleY=s.contentStartPos.scaleY,s.contentLastPos=i,s.requestId&&(a(s.requestId),s.requestId=null),s.requestId=o(function(){n.fancybox.setTranslate(s.$content,s.contentLastPos)})},u.prototype.limitMovement=function(t,e,n,o){var a,i,s,r,c=this,l=c.canvasWidth,u=c.canvasHeight,d=c.contentStartPos.left,f=c.contentStartPos.top,p=c.distanceX,h=c.distanceY;return a=Math.max(0,.5*l-.5*n),i=Math.max(0,.5*u-.5*o),s=Math.min(l-n,.5*l-.5*n),r=Math.min(u-o,.5*u-.5*o),n>l&&(p>0&&t>a&&(t=a-1+Math.pow(-a+d+p,.8)||0),p<0&&t<s&&(t=s+1-Math.pow(s-d-p,.8)||0)),o>u&&(h>0&&e>i&&(e=i-1+Math.pow(-i+f+h,.8)||0),h<0&&e<r&&(e=r+1-Math.pow(r-f-h,.8)||0)),{top:e,left:t}},u.prototype.limitPosition=function(t,e,n,o){var a=this,i=a.canvasWidth,s=a.canvasHeight;return n>i?(t=t>0?0:t,t=t<i-n?i-n:t):t=Math.max(0,i/2-n/2),o>s?(e=e>0?0:e,e=e<s-o?s-o:e):e=Math.max(0,s/2-o/2),{top:e,left:t}},u.prototype.onZoom=function(){var e=this,i=e.contentStartPos.width,r=e.contentStartPos.height,c=e.contentStartPos.left,l=e.contentStartPos.top,u=s(e.newPoints[0],e.newPoints[1]),d=u/e.startDistanceBetweenFingers,f=Math.floor(i*d),p=Math.floor(r*d),h=(i-f)*e.percentageOfImageAtPinchPointX,g=(r-p)*e.percentageOfImageAtPinchPointY,b=(e.newPoints[0].x+e.newPoints[1].x)/2-n(t).scrollLeft(),m=(e.newPoints[0].y+e.newPoints[1].y)/2-n(t).scrollTop(),y=b-e.centerPointStartX,v=m-e.centerPointStartY,x=c+(h+y),w=l+(g+v),$={top:w,left:x,scaleX:e.contentStartPos.scaleX*d,scaleY:e.contentStartPos.scaleY*d};e.canTap=!1,e.newWidth=f,e.newHeight=p,e.contentLastPos=$,e.requestId&&(a(e.requestId),e.requestId=null),e.requestId=o(function(){n.fancybox.setTranslate(e.$content,e.contentLastPos)})},u.prototype.ontouchend=function(t){var o=this,s=Math.max((new Date).getTime()-o.startTime,1),r=o.isSwiping,c=o.isPanning,l=o.isZooming;return o.endPoints=i(t),o.$container.removeClass("fancybox-controls--isGrabbing"),n(e).off(".fb.touch"),o.requestId&&(a(o.requestId),o.requestId=null),o.isSwiping=!1,o.isPanning=!1,o.isZooming=!1,o.canTap?o.onTap(t):(o.speed=366,o.velocityX=o.distanceX/s*.5,o.velocityY=o.distanceY/s*.5,o.speedX=Math.max(.5*o.speed,Math.min(1.5*o.speed,1/Math.abs(o.velocityX)*o.speed)),void(c?o.endPanning():l?o.endZooming():o.endSwiping(r)))},u.prototype.endSwiping=function(t){var e=this,o=!1;e.instance.isSliding=!1,e.sliderLastPos=null,"y"==t&&Math.abs(e.distanceY)>50?(n.fancybox.animate(e.instance.current.$slide,{top:e.sliderStartPos.top+e.distanceY+150*e.velocityY,opacity:0},150),o=e.instance.close(!0,300)):"x"==t&&e.distanceX>50&&e.instance.group.length>1?o=e.instance.previous(e.speedX):"x"==t&&e.distanceX<-50&&e.instance.group.length>1&&(o=e.instance.next(e.speedX)),o!==!1||"x"!=t&&"y"!=t||e.instance.jumpTo(e.instance.current.index,150),e.$container.removeClass("fancybox-is-sliding")},u.prototype.endPanning=function(){var t,e,o,a=this;a.contentLastPos&&(a.opts.momentum===!1?(t=a.contentLastPos.left,e=a.contentLastPos.top):(t=a.contentLastPos.left+a.velocityX*a.speed,e=a.contentLastPos.top+a.velocityY*a.speed),o=a.limitPosition(t,e,a.contentStartPos.width,a.contentStartPos.height),o.width=a.contentStartPos.width,o.height=a.contentStartPos.height,n.fancybox.animate(a.$content,o,330))},u.prototype.endZooming=function(){var t,e,o,a,i=this,s=i.instance.current,r=i.newWidth,c=i.newHeight;i.contentLastPos&&(t=i.contentLastPos.left,e=i.contentLastPos.top,a={top:e,left:t,width:r,height:c,scaleX:1,scaleY:1},n.fancybox.setTranslate(i.$content,a),r<i.canvasWidth&&c<i.canvasHeight?i.instance.scaleToFit(150):r>s.width||c>s.height?i.instance.scaleToActual(i.centerPointStartX,i.centerPointStartY,150):(o=i.limitPosition(t,e,r,c),n.fancybox.setTranslate(i.content,n.fancybox.getTranslate(i.$content)),n.fancybox.animate(i.$content,o,150)))},u.prototype.onTap=function(t){var e,o=this,a=n(t.target),s=o.instance,r=s.current,c=t&&i(t)||o.startPoints,l=c[0]?c[0].x-o.$stage.offset().left:0,u=c[0]?c[0].y-o.$stage.offset().top:0,d=function(e){var a=r.opts[e];if(n.isFunction(a)&&(a=a.apply(s,[r,t])),a)switch(a){case"close":s.close(o.startEvent);break;case"toggleControls":s.toggleControls(!0);break;case"next":s.next();break;case"nextOrClose":s.group.length>1?s.next():s.close(o.startEvent);break;case"zoom":"image"==r.type&&(r.isLoaded||r.$ghost)&&(s.canPan()?s.scaleToFit():s.isScaledDown()?s.scaleToActual(l,u):s.group.length<2&&s.close(o.startEvent))}};if(!(t.originalEvent&&2==t.originalEvent.button||s.isSliding||l>a[0].clientWidth+a.offset().left)){if(a.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))e="Outside";else if(a.is(".fancybox-slide"))e="Slide";else{if(!s.current.$content||!s.current.$content.has(t.target).length)return;e="Content"}if(o.tapped){if(clearTimeout(o.tapped),o.tapped=null,Math.abs(l-o.tapX)>50||Math.abs(u-o.tapY)>50||s.isSliding)return this;d("dblclick"+e)}else o.tapX=l,o.tapY=u,r.opts["dblclick"+e]&&r.opts["dblclick"+e]!==r.opts["click"+e]?o.tapped=setTimeout(function(){o.tapped=null,d("click"+e)},300):d("click"+e);return this}},n(e).on("onActivate.fb",function(t,e){e&&!e.Guestures&&(e.Guestures=new u(e))}),n(e).on("beforeClose.fb",function(t,e){e&&e.Guestures&&e.Guestures.destroy()})}(window,document,window.jQuery||jQuery),function(t,e){"use strict";e.extend(!0,e.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg viewBox="0 0 40 40"><path d="M13,12 L27,20 L13,27 Z" /><path d="M15,10 v19 M23,10 v19" /></svg></button>'},slideShow:{autoStart:!1,speed:3e3}});var n=function(t){this.instance=t,this.init()};e.extend(n.prototype,{timer:null,isActive:!1,$button:null,init:function(){var t=this;t.$button=t.instance.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){t.toggle()}),(t.instance.group.length<2||!t.instance.group[t.instance.currIndex].opts.slideShow)&&t.$button.hide()},set:function(t){var e=this;e.instance&&e.instance.current&&(t===!0||e.instance.current.opts.loop||e.instance.currIndex<e.instance.group.length-1)?e.timer=setTimeout(function(){e.isActive&&e.instance.jumpTo((e.instance.currIndex+1)%e.instance.group.length)},e.instance.current.opts.slideShow.speed):(e.stop(),e.instance.idleSecondsCounter=0,e.instance.showControls())},clear:function(){var t=this;clearTimeout(t.timer),t.timer=null},start:function(){var t=this,e=t.instance.current;e&&(t.isActive=!0,t.$button.attr("title",e.opts.i18n[e.opts.lang].PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),t.set(!0))},stop:function(){var t=this,e=t.instance.current;t.clear(),t.$button.attr("title",e.opts.i18n[e.opts.lang].PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),t.isActive=!1},toggle:function(){var t=this;t.isActive?t.stop():t.start()}}),e(t).on({"onInit.fb":function(t,e){e&&!e.SlideShow&&(e.SlideShow=new n(e))},"beforeShow.fb":function(t,e,n,o){var a=e&&e.SlideShow;o?a&&n.opts.slideShow.autoStart&&a.start():a&&a.isActive&&a.clear()},"afterShow.fb":function(t,e,n){var o=e&&e.SlideShow;o&&o.isActive&&o.set()},"afterKeydown.fb":function(n,o,a,i,s){var r=o&&o.SlideShow;!r||!a.opts.slideShow||80!==s&&32!==s||e(t.activeElement).is("button,a,input")||(i.preventDefault(),r.toggle())},"beforeClose.fb onDeactivate.fb":function(t,e){var n=e&&e.SlideShow;n&&n.stop()}}),e(t).on("visibilitychange",function(){var n=e.fancybox.getInstance(),o=n&&n.SlideShow;o&&o.isActive&&(t.hidden?o.clear():o.set())})}(document,window.jQuery||jQuery),function(t,e){"use strict";var n=function(){var e,n,o,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i={};for(n=0;n<a.length;n++)if(e=a[n],e&&e[1]in t){for(o=0;o<e.length;o++)i[a[0][o]]=e[o];return i}return!1}();if(!n)return void(e&&e.fancybox&&(e.fancybox.defaults.btnTpl.fullScreen=!1));var o={request:function(e){e=e||t.documentElement,e[n.requestFullscreen](e.ALLOW_KEYBOARD_INPUT)},exit:function(){t[n.exitFullscreen]()},toggle:function(e){e=e||t.documentElement,this.isFullscreen()?this.exit():this.request(e)},isFullscreen:function(){return Boolean(t[n.fullscreenElement])},enabled:function(){return Boolean(t[n.fullscreenEnabled])}};e.extend(!0,e.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fullscreen" title="{{FULL_SCREEN}}"><svg viewBox="0 0 40 40"><path d="M9,12 h22 v16 h-22 v-16 v16 h22 v-16 Z" /></svg></button>'},fullScreen:{autoStart:!1}}),e(t).on({"onInit.fb":function(t,e){var n;e&&e.group[e.currIndex].opts.fullScreen?(n=e.$refs.container,n.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(t){t.stopPropagation(),t.preventDefault(),o.toggle(n[0])}),e.opts.fullScreen&&e.opts.fullScreen.autoStart===!0&&o.request(n[0]),e.FullScreen=o):e&&e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide()},"afterKeydown.fb":function(t,e,n,o,a){e&&e.FullScreen&&70===a&&(o.preventDefault(),e.FullScreen.toggle(e.$refs.container[0]))},"beforeClose.fb":function(t){t&&t.FullScreen&&o.exit()}}),e(t).on(n.fullscreenchange,function(){var t=o.isFullscreen(),n=e.fancybox.getInstance();n&&(n.current&&"image"===n.current.type&&n.isAnimating&&(n.current.$content.css("transition","none"),n.isAnimating=!1,n.update(!0,!0,0)),n.trigger("onFullscreenChange",t),n.$refs.container.toggleClass("fancybox-is-fullscreen",t))})}(document,window.jQuery||jQuery),function(t,e){"use strict";e.fancybox.defaults=e.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg viewBox="0 0 120 120"><path d="M30,30 h14 v14 h-14 Z M50,30 h14 v14 h-14 Z M70,30 h14 v14 h-14 Z M30,50 h14 v14 h-14 Z M50,50 h14 v14 h-14 Z M70,50 h14 v14 h-14 Z M30,70 h14 v14 h-14 Z M50,70 h14 v14 h-14 Z M70,70 h14 v14 h-14 Z" /></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},e.fancybox.defaults);var n=function(t){this.init(t)};e.extend(n.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(t){var e=this;e.instance=t,t.Thumbs=e;var n=t.group[0],o=t.group[1];e.opts=t.group[t.currIndex].opts.thumbs,e.$button=t.$refs.toolbar.find("[data-fancybox-thumbs]"),e.opts&&n&&o&&("image"==n.type||n.opts.thumb||n.opts.$thumb)&&("image"==o.type||o.opts.thumb||o.opts.$thumb)?(e.$button.show().on("click",function(){e.toggle()}),e.isActive=!0):e.$button.hide()},create:function(){var t,n,o=this,a=o.instance,i=o.opts.parentEl;o.$grid=e('<div class="fancybox-thumbs fancybox-thumbs-'+o.opts.axis+'"></div>').appendTo(a.$refs.container.find(i).addBack().filter(i)),t="<ul>",e.each(a.group,function(e,o){n=o.opts.thumb||(o.opts.$thumb?o.opts.$thumb.attr("src"):null),n||"image"!==o.type||(n=o.src),n&&n.length&&(t+='<li data-index="'+e+'"  tabindex="0" class="fancybox-thumbs-loading"><img data-src="'+n+'" /></li>')}),t+="</ul>",o.$list=e(t).appendTo(o.$grid).on("click","li",function(){a.jumpTo(e(this).data("index"))}),o.$list.find("img").hide().one("load",function(){var t,n,o,a,i=e(this).parent().removeClass("fancybox-thumbs-loading"),s=i.outerWidth(),r=i.outerHeight();t=this.naturalWidth||this.width,n=this.naturalHeight||this.height,o=t/s,a=n/r,o>=1&&a>=1&&(o>a?(t/=a,n=r):(t=s,n/=o)),e(this).css({width:Math.floor(t),height:Math.floor(n),"margin-top":n>r?Math.floor(.3*r-.3*n):Math.floor(.5*r-.5*n),"margin-left":Math.floor(.5*s-.5*t)}).show()}).each(function(){this.src=e(this).data("src")}),"x"===o.opts.axis&&o.$list.width(parseInt(o.$grid.css("padding-right"))+a.group.length*o.$list.children().eq(0).outerWidth(!0)+"px")},focus:function(t){var e,n,o=this,a=o.$list;o.instance.current&&(e=a.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+o.instance.current.index+'"]').addClass("fancybox-thumbs-active"),n=e.position(),"y"===o.opts.axis&&(n.top<0||n.top>a.height()-e.outerHeight())?a.stop().animate({scrollTop:a.scrollTop()+n.top},t):"x"===o.opts.axis&&(n.left<a.parent().scrollLeft()||n.left>a.parent().scrollLeft()+(a.parent().width()-e.outerWidth()))&&a.parent().stop().animate({scrollLeft:n.left},t))},update:function(){this.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),this.isVisible?(this.$grid||this.create(),this.instance.trigger("onThumbsShow"),this.focus(0)):this.$grid&&this.instance.trigger("onThumbsHide"),this.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),e(t).on({"onInit.fb":function(t,e){var o;e&&!e.Thumbs&&(o=new n(e),o.isActive&&o.opts.autoStart===!0&&o.show())},"beforeShow.fb":function(t,e,n,o){var a=e&&e.Thumbs;a&&a.isVisible&&a.focus(o?0:250)},"afterKeydown.fb":function(t,e,n,o,a){var i=e&&e.Thumbs;i&&i.isActive&&71===a&&(o.preventDefault(),i.toggle())},"beforeClose.fb":function(t,e){var n=e&&e.Thumbs;n&&n.isVisible&&n.opts.hideOnClose!==!1&&n.$grid.hide()}})}(document,window.jQuery),function(t,e){"use strict";function n(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})}e.extend(!0,e.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg viewBox="0 0 40 40"><path d="M6,30 C8,18 19,16 23,16 L23,16 L23,10 L33,20 L23,29 L23,24 C19,24 8,27 6,30 Z"></svg></button>'},share:{tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a href="https://www.facebook.com/sharer/sharer.php?u={{src}}" target="_blank" class="fancybox-share_button"><svg version="1.1" viewBox="0 0 32 32" fill="#3b5998"><path d="M27.6 3h-23.2c-.8 0-1.4.6-1.4 1.4v23.1c0 .9.6 1.5 1.4 1.5h12.5v-10.1h-3.4v-3.9h3.4v-2.9c0-3.4 2.1-5.2 5-5.2 1.4 0 2.7.1 3 .2v3.5h-2.1c-1.6 0-1.9.8-1.9 1.9v2.5h3.9l-.5 3.9h-3.4v10.1h6.6c.8 0 1.4-.6 1.4-1.4v-23.2c.1-.8-.5-1.4-1.3-1.4z"></path></svg><span>Facebook</span></a><a href="https://www.pinterest.com/pin/create/button/?url={{src}}&amp;description={{descr}}" target="_blank" class="fancybox-share_button"><svg version="1.1" viewBox="0 0 32 32" fill="#c92228"><path d="M16 3c-7.2 0-13 5.8-13 13 0 5.5 3.4 10.2 8.3 12.1-.1-1-.2-2.6 0-3.7.2-1 1.5-6.5 1.5-6.5s-.4-.8-.4-1.9c0-1.8 1-3.2 2.4-3.2 1.1 0 1.6.8 1.6 1.8 0 1.1-.7 2.8-1.1 4.3-.3 1.3.6 2.3 1.9 2.3 2.3 0 4.1-2.4 4.1-6 0-3.1-2.2-5.3-5.4-5.3-3.7 0-5.9 2.8-5.9 5.6 0 1.1.4 2.3 1 3 .1.1.1.2.1.4-.1.4-.3 1.3-.4 1.5-.1.2-.2.3-.4.2-1.6-.8-2.6-3.1-2.6-5 0-4.1 3-7.9 8.6-7.9 4.5 0 8 3.2 8 7.5 0 4.5-2.8 8.1-6.7 8.1-1.3 0-2.6-.7-3-1.5 0 0-.7 2.5-.8 3.1-.3 1.1-1.1 2.5-1.6 3.4 1.2.4 2.5.6 3.8.6 7.2 0 13-5.8 13-13 0-7.1-5.8-12.9-13-12.9z"></path></svg><span>Pinterest</span></a><a href="https://twitter.com/intent/tweet?url={{src}}&amp;text={{descr}}" target="_blank" class="fancybox-share_button"><svg version="1.1" viewBox="0 0 32 32" fill="#1da1f2"><path d="M30 7.3c-1 .5-2.1.8-3.3.9 1.2-.7 2.1-1.8 2.5-3.2-1.1.7-2.3 1.1-3.6 1.4-1-1.1-2.5-1.8-4.2-1.8-3.2 0-5.7 2.6-5.7 5.7 0 .5.1.9.1 1.3-4.8-.2-9-2.5-11.8-6-.5.9-.8 1.9-.8 3 0 2 1 3.8 2.6 4.8-.9 0-1.8-.3-2.6-.7v.1c0 2.8 2 5.1 4.6 5.6-.5.1-1 .2-1.5.2-.4 0-.7 0-1.1-.1.7 2.3 2.9 3.9 5.4 4-2 1.5-4.4 2.5-7.1 2.5-.5 0-.9 0-1.4-.1 2.5 1.6 5.6 2.6 8.8 2.6 10.6 0 16.3-8.8 16.3-16.3v-.7c1.1-1 2-2 2.8-3.2z"></path></svg><span>Twitter</span></a></p><p><input type="text" value="{{src_raw}}" onfocus="this.select()" /></p></div>'}}),e(t).on("click","[data-fancybox-share]",function(){var t,o,a=e.fancybox.getInstance();a&&(t=a.current.opts.hash===!1?a.current.src:window.location,o=a.current.opts.share.tpl.replace(/\{\{src\}\}/g,encodeURIComponent(t)).replace(/\{\{src_raw\}\}/g,n(t)).replace(/\{\{descr\}\}/g,a.$caption?encodeURIComponent(a.$caption.text()):""),e.fancybox.open({src:a.translate(a,o),type:"html",opts:{animationEffect:"fade",animationDuration:250}}))})}(document,window.jQuery||jQuery),function(t,e,n){"use strict";function o(){var t=e.location.hash.substr(1),n=t.split("-"),o=n.length>1&&/^\+?\d+$/.test(n[n.length-1])?parseInt(n.pop(-1),10)||1:1,a=n.join("-");return o<1&&(o=1),{hash:t,index:o,gallery:a}}function a(t){var e;""!==t.gallery&&(e=n("[data-fancybox='"+n.escapeSelector(t.gallery)+"']").eq(t.index-1),e.length||(e=n("#"+n.escapeSelector(t.gallery))),e.length&&(s=!1,e.trigger("click")))}function i(t){var e;return!!t&&(e=t.current?t.current.opts:t.opts,e.hash||(e.$orig?e.$orig.data("fancybox"):""))}n.escapeSelector||(n.escapeSelector=function(t){var e=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,n=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t};return(t+"").replace(e,n)});var s=!0,r=null,c=null;n(function(){n.fancybox.defaults.hash!==!1&&(n(t).on({"onInit.fb":function(t,e){var n,a;e.group[e.currIndex].opts.hash!==!1&&(n=o(),a=i(e),a&&n.gallery&&a==n.gallery&&(e.currIndex=n.index-1))},"beforeShow.fb":function(n,o,a){var l;a&&a.opts.hash!==!1&&(l=i(o),l&&""!==l&&(e.location.hash.indexOf(l)<0&&(o.opts.origHash=e.location.hash),r=l+(o.group.length>1?"-"+(a.index+1):""),"replaceState"in e.history?(c&&clearTimeout(c),c=setTimeout(function(){e.history[s?"pushState":"replaceState"]({},t.title,e.location.pathname+e.location.search+"#"+r),c=null,s=!1},300)):e.location.hash=r))},"beforeClose.fb":function(o,a,s){var l,u;c&&clearTimeout(c),s.opts.hash!==!1&&(l=i(a),u=a&&a.opts.origHash?a.opts.origHash:"",l&&""!==l&&("replaceState"in history?e.history.replaceState({},t.title,e.location.pathname+e.location.search+u):(e.location.hash=u,n(e).scrollTop(a.scrollTop).scrollLeft(a.scrollLeft))),r=null)}}),n(e).on("hashchange.fb",function(){var t=o();n.fancybox.getInstance()?!r||r===t.gallery+"-"+t.index||1===t.index&&r==t.gallery||(r=null,n.fancybox.close()):""!==t.gallery&&a(t)}),setTimeout(function(){a(o())},50))})}(document,window,window.jQuery||jQuery);
$(document).ready(function(){
	$('.wpcf7').on('wpcf7mailsent',function(){
		$.fancybox.close( true );
	});
	$('.wpcf7').on('wpcf7submit',function(event){
		//console.log(event);
		//console.log('some');
		var self=this;
		window.setTimeout(function(){
		console.log($(self).find('div.wpcf7-response-output').html());
		var responseOutput = $(self).find('div.wpcf7-response-output').html();
				jQuery.fancybox.open(responseOutput);
	},100);
	});
});

document.addEventListener("DOMContentLoaded", readySelect);

function readySelect() {
    let selects = document.getElementsByTagName('select');
    if (selects.length > 0) {
        selects_init();
    }
    function selects_init() {
        for (let index = 0; index < selects.length; index++) {
            const select = selects[index];
            select_init(select);
        }
        //select_callback();
        document.addEventListener('click', function (e) {
            selects_close(e);
        });
        document.addEventListener('keydown', function (e) {
            if (e.code === 'Escape') {
                selects_close(e);
            }
        });
    }
    function selects_close(e) {
        const selects = document.querySelectorAll('.select');
        if (!e.target.closest('.select') && !e.target.classList.contains('_option')) {
            for (let index = 0; index < selects.length; index++) {
                const select = selects[index];
                const select_body_options = select.querySelector('.select__options');
                select.classList.remove('_active');
                _slideUp(select_body_options, 100);
            }
        }
    }
    function select_init(select) {
        const select_parent = select.parentElement;
        const select_modifikator = select.getAttribute('class');
        const select_selected_option = select.querySelector('option:checked');
        select.setAttribute('data-default', select_selected_option.value);
        select.style.display = 'none';

        select_parent.insertAdjacentHTML('beforeend', '<div class="select select_' + select_modifikator + '"></div>');

        let new_select = select.parentElement.querySelector('.select');
        new_select.appendChild(select);
        select_item(select);
    }
    function select_item(select) {
        const select_parent = select.parentElement;
        const select_items = select_parent.querySelector('.select__item');
        const select_options = select.querySelectorAll('option');
        const select_selected_option = select.querySelector('option:checked');
        const select_selected_text = select_selected_option.text;
        const select_type = select.getAttribute('data-type');

        if (select_items) {
            select_items.remove();
        }

        let select_type_content = '';
        if (select_type == 'input') {
            select_type_content = '<div class="select__value icon-select-arrow"><input autocomplete="off" type="text" name="form[]" value="' + select_selected_text + '" data-error="Ошибка" data-value="' + select_selected_text + '" class="select__input"></div>';
        } else {
            select_type_content = '<div class="select__value icon-select-arrow"><span>' + select_selected_text + '</span></div>';
        }

        select_parent.insertAdjacentHTML('beforeend',
            '<div class="select__item">' +
            '<div class="select__title">' + select_type_content + '</div>' +
            '<div hidden class="select__options">' + select_get_options(select_options) + '</div>' +
            '</div></div>');

        select_actions(select, select_parent);
    }
    function select_actions(original, select) {
        const select_item = select.querySelector('.select__item');
        const selectTitle = select.querySelector('.select__title');
        const select_body_options = select.querySelector('.select__options');
        const select_options = select.querySelectorAll('.select__option');
        const select_type = original.getAttribute('data-type');
        const select_input = select.querySelector('.select__input');

        selectTitle.addEventListener('click', function (e) {
            selectItemActions();
        });

        function selectMultiItems() {
            let selectedOptions = select.querySelectorAll('.select__option');
            let originalOptions = original.querySelectorAll('option');
            let selectedOptionsText = [];
            for (let index = 0; index < selectedOptions.length; index++) {
                const selectedOption = selectedOptions[index];
                originalOptions[index].removeAttribute('selected');
                if (selectedOption.classList.contains('_selected')) {
                    const selectOptionText = selectedOption.innerHTML;
                    selectedOptionsText.push(selectOptionText);
                    originalOptions[index].setAttribute('selected', 'selected');
                }
            }
            select.querySelector('.select__value').innerHTML = '<span>' + selectedOptionsText + '</span>';
        }
        function selectItemActions(type) {
            if (!type) {
                let selects = document.querySelectorAll('.select');
                for (let index = 0; index < selects.length; index++) {
                    const select = selects[index];
                    const select_body_options = select.querySelector('.select__options');
                    if (select != select_item.closest('.select')) {
                        select.classList.remove('_active');
                        _slideUp(select_body_options, 100);
                    }
                }
                _slideToggle(select_body_options, 100);
                select.classList.toggle('_active');
            }
        }
        for (let index = 0; index < select_options.length; index++) {
            const select_option = select_options[index];
            const select_option_value = select_option.getAttribute('data-value');
            const select_option_text = select_option.innerHTML;

            if (select_type == 'input') {
                select_input.addEventListener('keyup', select_search);
            } else {
                if (select_option.getAttribute('data-value') == original.value && !original.hasAttribute('multiple')) {
                    select_option.style.display = 'none';
                }
            }
            select_option.addEventListener('click', function () {
                for (let index = 0; index < select_options.length; index++) {
                    const el = select_options[index];
                    el.style.display = 'block';
                }
                if (select_type == 'input') {
                    select_input.value = select_option_text;
                    original.value = select_option_value;
                } else {
                    if (original.hasAttribute('multiple')) {
                        select_option.classList.toggle('_selected');
                        selectMultiItems();
                    } else {
                        select.querySelector('.select__value').innerHTML = '<span>' + select_option_text + '</span>';
                        original.value = select_option_value;
                        select_option.style.display = 'none';
                    }
                }
                let type;
                if (original.hasAttribute('multiple')) {
                    type = 'multiple';
                }
                selectItemActions(type);
            });
        }
    }
    function select_get_options(select_options) {
        if (select_options) {
            let select_options_content = '';
            for (let index = 0; index < select_options.length; index++) {
                const select_option = select_options[index];
                const select_option_value = select_option.value;
                if (select_option_value != '') {
                    const select_option_text = select_option.innerHTML;
                    select_options_content = select_options_content + '<div data-value="' + select_option_value + '" class="select__option">' + select_option_text + '</div>';
                }
            }
            return select_options_content;
        }
    }
    function select_search(e) {
        let select_block = e.target.closest('.select ').querySelector('.select__options');
        let select_options = e.target.closest('.select ').querySelectorAll('.select__option');
        let select_search_text = e.target.value.toUpperCase();

        for (let i = 0; i < select_options.length; i++) {
            let select_option = select_options[i];
            let select_txt_value = select_option.textContent || select_option.innerText;
            if (select_txt_value.toUpperCase().indexOf(select_search_text) > -1) {
                select_option.style.display = "";
            } else {
                select_option.style.display = "none";
            }
        }
    }
    function selects_update_all() {
        let selects = document.querySelectorAll('select');
        if (selects) {
            for (let index = 0; index < selects.length; index++) {
                const select = selects[index];
                select_item(select);
            }
        }
    }
    // \\\

    //SlideToggle
    let _slideUp = (target, duration = 500) => {
        if (!target.classList.contains('_slide')) {
            target.classList.add('_slide');
            target.style.transitionProperty = 'height, margin, padding';
            target.style.transitionDuration = duration + 'ms';
            target.style.height = target.offsetHeight + 'px';
            target.offsetHeight;
            target.style.overflow = 'hidden';
            target.style.height = 0;
            target.style.paddingTop = 0;
            target.style.paddingBottom = 0;
            target.style.marginTop = 0;
            target.style.marginBottom = 0;
            window.setTimeout(() => {
                target.hidden = true;
                target.style.removeProperty('height');
                target.style.removeProperty('padding-top');
                target.style.removeProperty('padding-bottom');
                target.style.removeProperty('margin-top');
                target.style.removeProperty('margin-bottom');
                target.style.removeProperty('overflow');
                target.style.removeProperty('transition-duration');
                target.style.removeProperty('transition-property');
                target.classList.remove('_slide');
            }, duration);
        }
    }


    // let subMenu = document.querySelector('.menu-item ul');

    // subMenu.addEventListener('mouseenter', function () {
    //     _slideUp(subMenu, 100);
    // });


    let _slideDown = (target, duration = 500) => {
        if (!target.classList.contains('_slide')) {
            target.classList.add('_slide');
            if (target.hidden) {
                target.hidden = false;
            }
            let height = target.offsetHeight;
            target.style.overflow = 'hidden';
            target.style.height = 0;
            target.style.paddingTop = 0;
            target.style.paddingBottom = 0;
            target.style.marginTop = 0;
            target.style.marginBottom = 0;
            target.offsetHeight;
            target.style.transitionProperty = "height, margin, padding";
            target.style.transitionDuration = duration + 'ms';
            target.style.height = height + 'px';
            target.style.removeProperty('padding-top');
            target.style.removeProperty('padding-bottom');
            target.style.removeProperty('margin-top');
            target.style.removeProperty('margin-bottom');
            window.setTimeout(() => {
                target.style.removeProperty('height');
                target.style.removeProperty('overflow');
                target.style.removeProperty('transition-duration');
                target.style.removeProperty('transition-property');
                target.classList.remove('_slide');
            }, duration);
        }
    }
    let _slideToggle = (target, duration = 500) => {
        if (target.hidden) {
            return _slideDown(target, duration);
        } else {
            return _slideUp(target, duration);
        }
    }
}


// \\\
// Dynamic Adapt v.1
// HTML data-da="where(uniq class name),when(breakpoint),position(digi)"
// e.x. data-da=".item,992,2"
// Andrikanych Yevhen 2020
// https://www.youtube.com/c/freelancerlifestyle

"use strict";

document.addEventListener("DOMContentLoaded", readyPage);

function readyPage() {
    function DynamicAdapt(type) {
        this.type = type;
    }

    DynamicAdapt.prototype.init = function () {
        const _this = this;
        // массив объектов
        this.оbjects = [];
        this.daClassname = "_dynamic_adapt_";
        // массив DOM-элементов
        this.nodes = document.querySelectorAll("[data-da]");

        // наполнение оbjects объктами
        for (let i = 0; i < this.nodes.length; i++) {
            const node = this.nodes[i];
            const data = node.dataset.da.trim();
            const dataArray = data.split(",");
            const оbject = {};
            оbject.element = node;
            оbject.parent = node.parentNode;
            оbject.destination = document.querySelector(dataArray[0].trim());
            оbject.breakpoint = dataArray[1] ? dataArray[1].trim() : "767";
            оbject.place = dataArray[2] ? dataArray[2].trim() : "last";
            оbject.index = this.indexInParent(оbject.parent, оbject.element);
            this.оbjects.push(оbject);
        }

        this.arraySort(this.оbjects);

        // массив уникальных медиа-запросов
        this.mediaQueries = Array.prototype.map.call(this.оbjects, function (item) {
            return '(' + this.type + "-width: " + item.breakpoint + "px)," + item.breakpoint;
        }, this);
        this.mediaQueries = Array.prototype.filter.call(this.mediaQueries, function (item, index, self) {
            return Array.prototype.indexOf.call(self, item) === index;
        });

        // навешивание слушателя на медиа-запрос
        // и вызов обработчика при первом запуске
        for (let i = 0; i < this.mediaQueries.length; i++) {
            const media = this.mediaQueries[i];
            const mediaSplit = String.prototype.split.call(media, ',');
            const matchMedia = window.matchMedia(mediaSplit[0]);
            const mediaBreakpoint = mediaSplit[1];

            // массив объектов с подходящим брейкпоинтом
            const оbjectsFilter = Array.prototype.filter.call(this.оbjects, function (item) {
                return item.breakpoint === mediaBreakpoint;
            });
            matchMedia.addListener(function () {
                _this.mediaHandler(matchMedia, оbjectsFilter);
            });
            this.mediaHandler(matchMedia, оbjectsFilter);
        }
    };

    DynamicAdapt.prototype.mediaHandler = function (matchMedia, оbjects) {
        if (matchMedia.matches) {
            for (let i = 0; i < оbjects.length; i++) {
                const оbject = оbjects[i];
                оbject.index = this.indexInParent(оbject.parent, оbject.element);
                this.moveTo(оbject.place, оbject.element, оbject.destination);
            }
        } else {
            for (let i = 0; i < оbjects.length; i++) {
                const оbject = оbjects[i];
                if (оbject.element.classList.contains(this.daClassname)) {
                    this.moveBack(оbject.parent, оbject.element, оbject.index);
                }
            }
        }
    };

    // Функция перемещения
    DynamicAdapt.prototype.moveTo = function (place, element, destination) {
        element.classList.add(this.daClassname);
        if (place === 'last' || place >= destination.children.length) {
            destination.insertAdjacentElement('beforeend', element);
            return;
        }
        if (place === 'first') {
            destination.insertAdjacentElement('afterbegin', element);
            return;
        }
        destination.children[place].insertAdjacentElement('beforebegin', element);
    }

    // Функция возврата
    DynamicAdapt.prototype.moveBack = function (parent, element, index) {
        element.classList.remove(this.daClassname);
        if (parent.children[index] !== undefined) {
            parent.children[index].insertAdjacentElement('beforebegin', element);
        } else {
            parent.insertAdjacentElement('beforeend', element);
        }
    }

    // Функция получения индекса внутри родителя
    DynamicAdapt.prototype.indexInParent = function (parent, element) {
        const array = Array.prototype.slice.call(parent.children);
        return Array.prototype.indexOf.call(array, element);
    };

    // Функция сортировки массива по breakpoint и place
    // по возрастанию для this.type = min
    // по убыванию для this.type = max
    DynamicAdapt.prototype.arraySort = function (arr) {
        if (this.type === "min") {
            Array.prototype.sort.call(arr, function (a, b) {
                if (a.breakpoint === b.breakpoint) {
                    if (a.place === b.place) {
                        return 0;
                    }

                    if (a.place === "first" || b.place === "last") {
                        return -1;
                    }

                    if (a.place === "last" || b.place === "first") {
                        return 1;
                    }

                    return a.place - b.place;
                }

                return a.breakpoint - b.breakpoint;
            });
        } else {
            Array.prototype.sort.call(arr, function (a, b) {
                if (a.breakpoint === b.breakpoint) {
                    if (a.place === b.place) {
                        return 0;
                    }

                    if (a.place === "first" || b.place === "last") {
                        return 1;
                    }

                    if (a.place === "last" || b.place === "first") {
                        return -1;
                    }

                    return b.place - a.place;
                }

                return b.breakpoint - a.breakpoint;
            });
            return;
        }
    };

    const da = new DynamicAdapt("max");
    da.init();
}

/*end of inludes*/


$(document).ready(function () {
	var ww = window.innerWidth;
	$(window).on("wl_resize", function (event, ww) {
		console.log("some_code");
	});
	$(window).on("wl_resize", function (t, e) {
		$(".menu-main .sub-menu").stop().slideUp("fast"),
			1279 < e ? $(".menu-main").show() : $(".menu-main").hide(),
			$(".burger").removeClass("burger_active")
	}),
		$(".menu-item-has-children>a").click(function (t) {
			1280 < ww || (t.preventDefault(),
				$(this).parent().find(".sub-menu").slideToggle({
					start: function () {
						"block" === $(this).css("display") && $(this).css("display", "flex"),
							"flex" === $(this).css("display") && $(".sub-menu").not($(this)).slideUp()
					}
				}))
		}),
		$(".menu-item-has-children").hover(function () {
			ww < 1280 || $(this).find(".sub-menu").stop().slideDown("slow")
		}, function () {
			ww < 1280 || $(this).find(".sub-menu").stop().slideUp("fast")
		}),
		$(".sub-menu").hide()

});


document.addEventListener("DOMContentLoaded", ready);

function ready() {
	if (document.querySelector('.slider-segment-partners')) {
		let sliderSegmentPartners = new Swiper(".slider-segment-partners", {
			slidesPerView: 'auto',
			watchOverflow: true,
			speed: 800,
			observer: true,
			observeParents: true,
			observeSlideChildren: true,
			spaceBetween: 40,

			loop: true,
		});
	}
	if (document.querySelector('.segment-projects__slider')) {
		let segmentProjectsSlider = new Swiper(".segment-projects__slider", {
			watchOverflow: true,
			speed: 800,
			observer: true,
			observeParents: true,
			observeSlideChildren: true,
			navigation: {
				nextEl: ".segment-projects .arrow-next",
				prevEl: ".segment-projects .arrow-prev",
			},
			breakpoints: {
				320: {
					slidesPerView: 1,
					spaceBetween: 20,
				},
				768: {
					slidesPerView: 2,
					spaceBetween: 40,
				},
			},
		});
	}



	if (document.querySelector('.page-swiper')) {
		let pageSwiper = new Swiper(".page-swiper", {
			wrapperClass: "page__wrapper",
			slideClass: "page__screen",
			direction: 'vertical',
			slidesPerView: 'auto',
			mousewheel: {
				sensitiviti: 1,
			},
			init: false,
			watchOverflow: true,
			speed: 800,
			observer: true,
			observeParents: true,
			observeSlideChildren: true,
			on: {
				init: function () {
					setScrollType();
				},
				resize: function () {
					setScrollType();
					setWidthPage();
				},
			},

			scrollbar: {
				el: '.page__scroll',
				dragClass: 'page__drag-scroll',
				draggable: true,
			},
		});


		pageSwiper.init();



		function setScrollType() {

			let wrapper = document.querySelector('.page__wrapper');
			if (wrapper.classList.contains('_free')) {
				wrapper.classList.remove('_free');
				pageSwiper.params.freeMode.enabled = false;
			}
			for (let index = 0; index < pageSwiper.slides.length; index++) {
				const pageSlide = pageSwiper.slides[index];
				const pageSlideContent = pageSlide.querySelector('.screen__content');
				if (pageSlideContent) {
					const pageSlideContentHeight = pageSlideContent.offsetHeight;
					if (pageSlideContentHeight > window.innerHeight) {
						wrapper.classList.add('_free');
						pageSwiper.params.freeMode.enabled = true;
						break;
					}
				}
			}
		};
		function setWidthPage() {
			let windowWidth = window.innerWidth;
			if (windowWidth <= 1280) {
				pageSwiper.destroy();
			} else {
				pageSwiper.init();
			}
		}
	}


	if (document.querySelector('.news-slider')) {
		let newsSlider = new Swiper(".news-slider", {
			wrapperClass: "items__wrapper",
			slideClass: "news-slide",
			watchOverflow: true,
			slidesPerView: 1,
			spaceBetween: 20,
			speed: 800,
			observer: true,
			observeParents: true,
			observeSlideChildren: true,
			autoHeight: true,
			navigation: {
				nextEl: ".news-slider .arrow-next",
				prevEl: ".news-slider .arrow-prev",
			},
		});


	}

	let burgerBtns = [...document.querySelectorAll(".burger")];
	let body = document.querySelector("body");
	let html = document.querySelector("html");
	for (const burgerBtn of burgerBtns) {
		burgerBtn.addEventListener("click", function () {
			body.classList.toggle("active");
			html.classList.toggle("active");
		});
	}


	document.addEventListener("click", ducumentActions);

	function ducumentActions(e) {
		let fancyboxBgs = document.querySelectorAll('.fancybox-bg');
		for (const fancyboxBg of fancyboxBgs) {
			let targetElem = e.target;

			if (targetElem === fancyboxBg) {
				console.log('rrrr')
				$.fancybox.close()
			}
		}
	}
}


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIGZhbmN5Qm94IHYzLjIuNVxyXG4vL1xyXG4vLyBMaWNlbnNlZCBHUEx2MyBmb3Igb3BlbiBzb3VyY2UgdXNlXHJcbi8vIG9yIGZhbmN5Qm94IENvbW1lcmNpYWwgTGljZW5zZSBmb3IgY29tbWVyY2lhbCB1c2VcclxuLy9cclxuLy8gaHR0cDovL2ZhbmN5YXBwcy5jb20vZmFuY3lib3gvXHJcbi8vIENvcHlyaWdodCAyMDE3IGZhbmN5QXBwc1xyXG4vL1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4hZnVuY3Rpb24odCxlLG4sbyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYSh0KXt2YXIgZT1uKHQuY3VycmVudFRhcmdldCksbz10LmRhdGE/dC5kYXRhLm9wdGlvbnM6e30sYT1lLmF0dHIoXCJkYXRhLWZhbmN5Ym94XCIpfHxcIlwiLGk9MCxzPVtdO3QuaXNEZWZhdWx0UHJldmVudGVkKCl8fCh0LnByZXZlbnREZWZhdWx0KCksYT8ocz1vLnNlbGVjdG9yP24oby5zZWxlY3Rvcik6dC5kYXRhP3QuZGF0YS5pdGVtczpbXSxzPXMubGVuZ3RoP3MuZmlsdGVyKCdbZGF0YS1mYW5jeWJveD1cIicrYSsnXCJdJyk6bignW2RhdGEtZmFuY3lib3g9XCInK2ErJ1wiXScpLGk9cy5pbmRleChlKSxpPDAmJihpPTApKTpzPVtlXSxuLmZhbmN5Ym94Lm9wZW4ocyxvLGkpKX1pZihuKXtpZihuLmZuLmZhbmN5Ym94KXJldHVybiB2b2lkKFwiY29uc29sZVwiaW4gdCYmY29uc29sZS5sb2coXCJmYW5jeUJveCBhbHJlYWR5IGluaXRpYWxpemVkXCIpKTt2YXIgaT17bG9vcDohMSxtYXJnaW46WzQ0LDBdLGd1dHRlcjo1MCxrZXlib2FyZDohMCxhcnJvd3M6ITAsaW5mb2JhcjohMCx0b29sYmFyOiEwLGJ1dHRvbnM6W1wic2xpZGVTaG93XCIsXCJmdWxsU2NyZWVuXCIsXCJ0aHVtYnNcIixcInNoYXJlXCIsXCJjbG9zZVwiXSxpZGxlVGltZTozLHNtYWxsQnRuOlwiYXV0b1wiLHByb3RlY3Q6ITEsbW9kYWw6ITEsaW1hZ2U6e3ByZWxvYWQ6XCJhdXRvXCJ9LGFqYXg6e3NldHRpbmdzOntkYXRhOntmYW5jeWJveDohMH19fSxpZnJhbWU6e3RwbDonPGlmcmFtZSBpZD1cImZhbmN5Ym94LWZyYW1le3JuZH1cIiBuYW1lPVwiZmFuY3lib3gtZnJhbWV7cm5kfVwiIGNsYXNzPVwiZmFuY3lib3gtaWZyYW1lXCIgZnJhbWVib3JkZXI9XCIwXCIgdnNwYWNlPVwiMFwiIGhzcGFjZT1cIjBcIiB3ZWJraXRBbGxvd0Z1bGxTY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIGFsbG93RnVsbFNjcmVlbiBhbGxvd3RyYW5zcGFyZW5jeT1cInRydWVcIiBzcmM9XCJcIj48L2lmcmFtZT4nLHByZWxvYWQ6ITAsY3NzOnt9LGF0dHI6e3Njcm9sbGluZzpcImF1dG9cIn19LGRlZmF1bHRUeXBlOlwiaW1hZ2VcIixhbmltYXRpb25FZmZlY3Q6XCJ6b29tXCIsYW5pbWF0aW9uRHVyYXRpb246NTAwLHpvb21PcGFjaXR5OlwiYXV0b1wiLHRyYW5zaXRpb25FZmZlY3Q6XCJmYWRlXCIsdHJhbnNpdGlvbkR1cmF0aW9uOjM2NixzbGlkZUNsYXNzOlwiXCIsYmFzZUNsYXNzOlwiXCIsYmFzZVRwbDonPGRpdiBjbGFzcz1cImZhbmN5Ym94LWNvbnRhaW5lclwiIHJvbGU9XCJkaWFsb2dcIiB0YWJpbmRleD1cIi0xXCI+PGRpdiBjbGFzcz1cImZhbmN5Ym94LWJnXCI+PC9kaXY+PGRpdiBjbGFzcz1cImZhbmN5Ym94LWlubmVyXCI+PGRpdiBjbGFzcz1cImZhbmN5Ym94LWluZm9iYXJcIj48c3BhbiBkYXRhLWZhbmN5Ym94LWluZGV4Pjwvc3Bhbj4mbmJzcDsvJm5ic3A7PHNwYW4gZGF0YS1mYW5jeWJveC1jb3VudD48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImZhbmN5Ym94LXRvb2xiYXJcIj57e2J1dHRvbnN9fTwvZGl2PjxkaXYgY2xhc3M9XCJmYW5jeWJveC1uYXZpZ2F0aW9uXCI+e3thcnJvd3N9fTwvZGl2PjxkaXYgY2xhc3M9XCJmYW5jeWJveC1zdGFnZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJmYW5jeWJveC1jYXB0aW9uLXdyYXBcIj48ZGl2IGNsYXNzPVwiZmFuY3lib3gtY2FwdGlvblwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2Picsc3Bpbm5lclRwbDonPGRpdiBjbGFzcz1cImZhbmN5Ym94LWxvYWRpbmdcIj48L2Rpdj4nLGVycm9yVHBsOic8ZGl2IGNsYXNzPVwiZmFuY3lib3gtZXJyb3JcIj48cD57e0VSUk9SfX08cD48L2Rpdj4nLGJ0blRwbDp7ZG93bmxvYWQ6JzxhIGRvd25sb2FkIGRhdGEtZmFuY3lib3gtZG93bmxvYWQgY2xhc3M9XCJmYW5jeWJveC1idXR0b24gZmFuY3lib3gtYnV0dG9uLS1kb3dubG9hZFwiIHRpdGxlPVwie3tET1dOTE9BRH19XCI+PHN2ZyB2aWV3Qm94PVwiMCAwIDQwIDQwXCI+PHBhdGggZD1cIk0yMCwyMyBMMjAsOCBMMjAsMjMgTDEzLDE2IEwyMCwyMyBMMjcsMTYgTDIwLDIzIE0yNiwyOCBMMTMsMjggTDI3LDI4IEwxNCwyOFwiIC8+PC9zdmc+PC9hPicsem9vbTonPGJ1dHRvbiBkYXRhLWZhbmN5Ym94LXpvb20gY2xhc3M9XCJmYW5jeWJveC1idXR0b24gZmFuY3lib3gtYnV0dG9uLS16b29tXCIgdGl0bGU9XCJ7e1pPT019fVwiPjxzdmcgdmlld0JveD1cIjAgMCA0MCA0MFwiPjxwYXRoIGQ9XCJNIDE4LDE3IG0tOCwwIGEgOCw4IDAgMSwwIDE2LDAgYSA4LDggMCAxLDAgLTE2LDAgTTI1LDIzIEwzMSwyOSBMMjUsMjNcIiAvPjwvc3ZnPjwvYnV0dG9uPicsY2xvc2U6JzxidXR0b24gZGF0YS1mYW5jeWJveC1jbG9zZSBjbGFzcz1cImZhbmN5Ym94LWJ1dHRvbiBmYW5jeWJveC1idXR0b24tLWNsb3NlXCIgdGl0bGU9XCJ7e0NMT1NFfX1cIj48c3ZnIHZpZXdCb3g9XCIwIDAgNDAgNDBcIj48cGF0aCBkPVwiTTEwLDEwIEwzMCwzMCBNMzAsMTAgTDEwLDMwXCIgLz48L3N2Zz48L2J1dHRvbj4nLHNtYWxsQnRuOic8YnV0dG9uIGRhdGEtZmFuY3lib3gtY2xvc2UgY2xhc3M9XCJmYW5jeWJveC1jbG9zZS1zbWFsbFwiIHRpdGxlPVwie3tDTE9TRX19XCI+PC9idXR0b24+JyxhcnJvd0xlZnQ6JzxidXR0b24gZGF0YS1mYW5jeWJveC1wcmV2IGNsYXNzPVwiZmFuY3lib3gtYnV0dG9uIGZhbmN5Ym94LWJ1dHRvbi0tYXJyb3dfbGVmdFwiIHRpdGxlPVwie3tQUkVWfX1cIj48c3ZnIHZpZXdCb3g9XCIwIDAgNDAgNDBcIj48cGF0aCBkPVwiTTEwLDIwIEwzMCwyMCBMMTAsMjAgTDE4LDI4IEwxMCwyMCBMMTgsMTIgTDEwLDIwXCI+PC9wYXRoPjwvc3ZnPjwvYnV0dG9uPicsYXJyb3dSaWdodDonPGJ1dHRvbiBkYXRhLWZhbmN5Ym94LW5leHQgY2xhc3M9XCJmYW5jeWJveC1idXR0b24gZmFuY3lib3gtYnV0dG9uLS1hcnJvd19yaWdodFwiIHRpdGxlPVwie3tORVhUfX1cIj48c3ZnIHZpZXdCb3g9XCIwIDAgNDAgNDBcIj48cGF0aCBkPVwiTTMwLDIwIEwxMCwyMCBMMzAsMjAgTDIyLDI4IEwzMCwyMCBMMjIsMTIgTDMwLDIwXCI+PC9wYXRoPjwvc3ZnPjwvYnV0dG9uPid9LHBhcmVudEVsOlwiYm9keVwiLGF1dG9Gb2N1czohMSxiYWNrRm9jdXM6ITAsdHJhcEZvY3VzOiEwLGZ1bGxTY3JlZW46e2F1dG9TdGFydDohMX0sdG91Y2g6e3ZlcnRpY2FsOiEwLG1vbWVudHVtOiEwfSxoYXNoOm51bGwsbWVkaWE6e30sc2xpZGVTaG93OnthdXRvU3RhcnQ6ITEsc3BlZWQ6NGUzfSx0aHVtYnM6e2F1dG9TdGFydDohMSxoaWRlT25DbG9zZTohMCxwYXJlbnRFbDpcIi5mYW5jeWJveC1jb250YWluZXJcIixheGlzOlwieVwifSxvbkluaXQ6bi5ub29wLGJlZm9yZUxvYWQ6bi5ub29wLGFmdGVyTG9hZDpuLm5vb3AsYmVmb3JlU2hvdzpuLm5vb3AsYWZ0ZXJTaG93Om4ubm9vcCxiZWZvcmVDbG9zZTpuLm5vb3AsYWZ0ZXJDbG9zZTpuLm5vb3Asb25BY3RpdmF0ZTpuLm5vb3Asb25EZWFjdGl2YXRlOm4ubm9vcCxjbGlja0NvbnRlbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm5cImltYWdlXCI9PT10LnR5cGUmJlwiem9vbVwifSxjbGlja1NsaWRlOlwiY2xvc2VcIixjbGlja091dHNpZGU6XCJjbG9zZVwiLGRibGNsaWNrQ29udGVudDohMSxkYmxjbGlja1NsaWRlOiExLGRibGNsaWNrT3V0c2lkZTohMSxtb2JpbGU6e21hcmdpbjowLGNsaWNrQ29udGVudDpmdW5jdGlvbih0LGUpe3JldHVyblwiaW1hZ2VcIj09PXQudHlwZSYmXCJ0b2dnbGVDb250cm9sc1wifSxjbGlja1NsaWRlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJpbWFnZVwiPT09dC50eXBlP1widG9nZ2xlQ29udHJvbHNcIjpcImNsb3NlXCJ9LGRibGNsaWNrQ29udGVudDpmdW5jdGlvbih0LGUpe3JldHVyblwiaW1hZ2VcIj09PXQudHlwZSYmXCJ6b29tXCJ9LGRibGNsaWNrU2xpZGU6ZnVuY3Rpb24odCxlKXtyZXR1cm5cImltYWdlXCI9PT10LnR5cGUmJlwiem9vbVwifX0sbGFuZzpcImVuXCIsaTE4bjp7ZW46e0NMT1NFOlwiQ2xvc2VcIixORVhUOlwiTmV4dFwiLFBSRVY6XCJQcmV2aW91c1wiLEVSUk9SOlwiVGhlIHJlcXVlc3RlZCBjb250ZW50IGNhbm5vdCBiZSBsb2FkZWQuIDxici8+IFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsUExBWV9TVEFSVDpcIlN0YXJ0IHNsaWRlc2hvd1wiLFBMQVlfU1RPUDpcIlBhdXNlIHNsaWRlc2hvd1wiLEZVTExfU0NSRUVOOlwiRnVsbCBzY3JlZW5cIixUSFVNQlM6XCJUaHVtYm5haWxzXCIsRE9XTkxPQUQ6XCJEb3dubG9hZFwiLFNIQVJFOlwiU2hhcmVcIixaT09NOlwiWm9vbVwifSxkZTp7Q0xPU0U6XCJTY2hsaWVzc2VuXCIsTkVYVDpcIldlaXRlclwiLFBSRVY6XCJadXLDvGNrXCIsRVJST1I6XCJEaWUgYW5nZWZvcmRlcnRlbiBEYXRlbiBrb25udGVuIG5pY2h0IGdlbGFkZW4gd2VyZGVuLiA8YnIvPiBCaXR0ZSB2ZXJzdWNoZW4gU2llIGVzIHNww6R0ZXIgbm9jaG1hbC5cIixQTEFZX1NUQVJUOlwiRGlhc2NoYXUgc3RhcnRlblwiLFBMQVlfU1RPUDpcIkRpYXNjaGF1IGJlZW5kZW5cIixGVUxMX1NDUkVFTjpcIlZvbGxiaWxkXCIsVEhVTUJTOlwiVm9yc2NoYXViaWxkZXJcIixET1dOTE9BRDpcIkhlcnVudGVybGFkZW5cIixTSEFSRTpcIlRlaWxlblwiLFpPT006XCJNYcOfc3RhYlwifX19LHM9bih0KSxyPW4oZSksYz0wLGw9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuaGFzT3duUHJvcGVydHkmJnQgaW5zdGFuY2VvZiBufSx1PWZ1bmN0aW9uKCl7cmV0dXJuIHQucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQub1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oZSl7cmV0dXJuIHQuc2V0VGltZW91dChlLDFlMy82MCl9fSgpLGQ9ZnVuY3Rpb24oKXt2YXIgdCxuPWUuY3JlYXRlRWxlbWVudChcImZha2VlbGVtZW50XCIpLGE9e3RyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsT1RyYW5zaXRpb246XCJvVHJhbnNpdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsV2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIn07Zm9yKHQgaW4gYSlpZihuLnN0eWxlW3RdIT09bylyZXR1cm4gYVt0XTtyZXR1cm5cInRyYW5zaXRpb25lbmRcIn0oKSxmPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Lmxlbmd0aCYmdFswXS5vZmZzZXRIZWlnaHR9LHA9ZnVuY3Rpb24odCxvLGEpe3ZhciBpPXRoaXM7aS5vcHRzPW4uZXh0ZW5kKCEwLHtpbmRleDphfSxuLmZhbmN5Ym94LmRlZmF1bHRzLG98fHt9KSxuLmZhbmN5Ym94LmlzTW9iaWxlJiYoaS5vcHRzPW4uZXh0ZW5kKCEwLHt9LGkub3B0cyxpLm9wdHMubW9iaWxlKSksbyYmbi5pc0FycmF5KG8uYnV0dG9ucykmJihpLm9wdHMuYnV0dG9ucz1vLmJ1dHRvbnMpLGkuaWQ9aS5vcHRzLmlkfHwrK2MsaS5ncm91cD1bXSxpLmN1cnJJbmRleD1wYXJzZUludChpLm9wdHMuaW5kZXgsMTApfHwwLGkucHJldkluZGV4PW51bGwsaS5wcmV2UG9zPW51bGwsaS5jdXJyUG9zPTAsaS5maXJzdFJ1bj1udWxsLGkuY3JlYXRlR3JvdXAodCksaS5ncm91cC5sZW5ndGgmJihpLiRsYXN0Rm9jdXM9bihlLmFjdGl2ZUVsZW1lbnQpLmJsdXIoKSxpLnNsaWRlcz17fSxpLmluaXQoKSl9O24uZXh0ZW5kKHAucHJvdG90eXBlLHtpbml0OmZ1bmN0aW9uKCl7dmFyIGEsaSxzLGM9dGhpcyxsPWMuZ3JvdXBbYy5jdXJySW5kZXhdLHU9bC5vcHRzLGQ9bi5mYW5jeWJveC5zY3JvbGxiYXJXaWR0aDtjLnNjcm9sbFRvcD1yLnNjcm9sbFRvcCgpLGMuc2Nyb2xsTGVmdD1yLnNjcm9sbExlZnQoKSxuLmZhbmN5Ym94LmdldEluc3RhbmNlKCl8fChuKFwiYm9keVwiKS5hZGRDbGFzcyhcImZhbmN5Ym94LWFjdGl2ZVwiKSwvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmIXQuTVNTdHJlYW0/XCJpbWFnZVwiIT09bC50eXBlJiZuKFwiYm9keVwiKS5jc3MoXCJ0b3BcIixuKFwiYm9keVwiKS5zY3JvbGxUb3AoKSotMSkuYWRkQ2xhc3MoXCJmYW5jeWJveC1pb3NmaXhcIik6IW4uZmFuY3lib3guaXNNb2JpbGUmJmUuYm9keS5zY3JvbGxIZWlnaHQ+dC5pbm5lckhlaWdodCYmKGQ9PT1vJiYoYT1uKCc8ZGl2IHN0eWxlPVwid2lkdGg6NTBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpzY3JvbGw7XCIgLz4nKS5hcHBlbmRUbyhcImJvZHlcIiksZD1uLmZhbmN5Ym94LnNjcm9sbGJhcldpZHRoPWFbMF0ub2Zmc2V0V2lkdGgtYVswXS5jbGllbnRXaWR0aCxhLnJlbW92ZSgpKSxuKFwiaGVhZFwiKS5hcHBlbmQoJzxzdHlsZSBpZD1cImZhbmN5Ym94LXN0eWxlLW5vc2Nyb2xsXCIgdHlwZT1cInRleHQvY3NzXCI+LmNvbXBlbnNhdGUtZm9yLXNjcm9sbGJhciB7IG1hcmdpbi1yaWdodDogJytkK1wicHg7IH08L3N0eWxlPlwiKSxuKFwiYm9keVwiKS5hZGRDbGFzcyhcImNvbXBlbnNhdGUtZm9yLXNjcm9sbGJhclwiKSkpLHM9XCJcIixuLmVhY2godS5idXR0b25zLGZ1bmN0aW9uKHQsZSl7cys9dS5idG5UcGxbZV18fFwiXCJ9KSxpPW4oYy50cmFuc2xhdGUoYyx1LmJhc2VUcGwucmVwbGFjZShcInt7YnV0dG9uc319XCIscykucmVwbGFjZShcInt7YXJyb3dzfX1cIix1LmJ0blRwbC5hcnJvd0xlZnQrdS5idG5UcGwuYXJyb3dSaWdodCkpKS5hdHRyKFwiaWRcIixcImZhbmN5Ym94LWNvbnRhaW5lci1cIitjLmlkKS5hZGRDbGFzcyhcImZhbmN5Ym94LWlzLWhpZGRlblwiKS5hZGRDbGFzcyh1LmJhc2VDbGFzcykuZGF0YShcIkZhbmN5Qm94XCIsYykuYXBwZW5kVG8odS5wYXJlbnRFbCksYy4kcmVmcz17Y29udGFpbmVyOml9LFtcImJnXCIsXCJpbm5lclwiLFwiaW5mb2JhclwiLFwidG9vbGJhclwiLFwic3RhZ2VcIixcImNhcHRpb25cIixcIm5hdmlnYXRpb25cIl0uZm9yRWFjaChmdW5jdGlvbih0KXtjLiRyZWZzW3RdPWkuZmluZChcIi5mYW5jeWJveC1cIit0KX0pLGMudHJpZ2dlcihcIm9uSW5pdFwiKSxjLmFjdGl2YXRlKCksYy5qdW1wVG8oYy5jdXJySW5kZXgpfSx0cmFuc2xhdGU6ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm9wdHMuaTE4blt0Lm9wdHMubGFuZ107cmV0dXJuIGUucmVwbGFjZSgvXFx7XFx7KFxcdyspXFx9XFx9L2csZnVuY3Rpb24odCxlKXt2YXIgYT1uW2VdO3JldHVybiBhPT09bz90OmF9KX0sY3JlYXRlR3JvdXA6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxhPW4ubWFrZUFycmF5KHQpO24uZWFjaChhLGZ1bmN0aW9uKHQsYSl7dmFyIGkscyxyLGMsbD17fSx1PXt9O24uaXNQbGFpbk9iamVjdChhKT8obD1hLHU9YS5vcHRzfHxhKTpcIm9iamVjdFwiPT09bi50eXBlKGEpJiZuKGEpLmxlbmd0aD8oaT1uKGEpLHU9aS5kYXRhKCksdT1uLmV4dGVuZCh7fSx1LHUub3B0aW9uc3x8e30pLHUuJG9yaWc9aSxsLnNyYz11LnNyY3x8aS5hdHRyKFwiaHJlZlwiKSxsLnR5cGV8fGwuc3JjfHwobC50eXBlPVwiaW5saW5lXCIsbC5zcmM9YSkpOmw9e3R5cGU6XCJodG1sXCIsc3JjOmErXCJcIn0sbC5vcHRzPW4uZXh0ZW5kKCEwLHt9LGUub3B0cyx1KSxuLmlzQXJyYXkodS5idXR0b25zKSYmKGwub3B0cy5idXR0b25zPXUuYnV0dG9ucykscz1sLnR5cGV8fGwub3B0cy50eXBlLHI9bC5zcmN8fFwiXCIsIXMmJnImJihyLm1hdGNoKC8oXmRhdGE6aW1hZ2VcXC9bYS16MC05K1xcLz1dKiwpfChcXC4oanAoZXxnfGVnKXxnaWZ8cG5nfGJtcHx3ZWJwfHN2Z3xpY28pKChcXD98IykuKik/JCkvaSk/cz1cImltYWdlXCI6ci5tYXRjaCgvXFwuKHBkZikoKFxcP3wjKS4qKT8kL2kpP3M9XCJwZGZcIjpcIiNcIj09PXIuY2hhckF0KDApJiYocz1cImlubGluZVwiKSkscz9sLnR5cGU9czplLnRyaWdnZXIoXCJvYmplY3ROZWVkc1R5cGVcIixsKSxsLmluZGV4PWUuZ3JvdXAubGVuZ3RoLGwub3B0cy4kb3JpZyYmIWwub3B0cy4kb3JpZy5sZW5ndGgmJmRlbGV0ZSBsLm9wdHMuJG9yaWcsIWwub3B0cy4kdGh1bWImJmwub3B0cy4kb3JpZyYmKGwub3B0cy4kdGh1bWI9bC5vcHRzLiRvcmlnLmZpbmQoXCJpbWc6Zmlyc3RcIikpLGwub3B0cy4kdGh1bWImJiFsLm9wdHMuJHRodW1iLmxlbmd0aCYmZGVsZXRlIGwub3B0cy4kdGh1bWIsXCJmdW5jdGlvblwiPT09bi50eXBlKGwub3B0cy5jYXB0aW9uKSYmKGwub3B0cy5jYXB0aW9uPWwub3B0cy5jYXB0aW9uLmFwcGx5KGEsW2UsbF0pKSxcImZ1bmN0aW9uXCI9PT1uLnR5cGUoZS5vcHRzLmNhcHRpb24pJiYobC5vcHRzLmNhcHRpb249ZS5vcHRzLmNhcHRpb24uYXBwbHkoYSxbZSxsXSkpLGwub3B0cy5jYXB0aW9uIGluc3RhbmNlb2Ygbnx8KGwub3B0cy5jYXB0aW9uPWwub3B0cy5jYXB0aW9uPT09bz9cIlwiOmwub3B0cy5jYXB0aW9uK1wiXCIpLFwiYWpheFwiPT09cyYmKGM9ci5zcGxpdCgvXFxzKy8sMiksYy5sZW5ndGg+MSYmKGwuc3JjPWMuc2hpZnQoKSxsLm9wdHMuZmlsdGVyPWMuc2hpZnQoKSkpLFwiYXV0b1wiPT1sLm9wdHMuc21hbGxCdG4mJihuLmluQXJyYXkocyxbXCJodG1sXCIsXCJpbmxpbmVcIixcImFqYXhcIl0pPi0xPyhsLm9wdHMudG9vbGJhcj0hMSxsLm9wdHMuc21hbGxCdG49ITApOmwub3B0cy5zbWFsbEJ0bj0hMSksXCJwZGZcIj09PXMmJihsLnR5cGU9XCJpZnJhbWVcIixsLm9wdHMuaWZyYW1lLnByZWxvYWQ9ITEpLGwub3B0cy5tb2RhbCYmKGwub3B0cz1uLmV4dGVuZCghMCxsLm9wdHMse2luZm9iYXI6MCx0b29sYmFyOjAsc21hbGxCdG46MCxrZXlib2FyZDowLHNsaWRlU2hvdzowLGZ1bGxTY3JlZW46MCx0aHVtYnM6MCx0b3VjaDowLGNsaWNrQ29udGVudDohMSxjbGlja1NsaWRlOiExLGNsaWNrT3V0c2lkZTohMSxkYmxjbGlja0NvbnRlbnQ6ITEsZGJsY2xpY2tTbGlkZTohMSxkYmxjbGlja091dHNpZGU6ITF9KSksZS5ncm91cC5wdXNoKGwpfSl9LGFkZEV2ZW50czpmdW5jdGlvbigpe3ZhciBvPXRoaXM7by5yZW1vdmVFdmVudHMoKSxvLiRyZWZzLmNvbnRhaW5lci5vbihcImNsaWNrLmZiLWNsb3NlXCIsXCJbZGF0YS1mYW5jeWJveC1jbG9zZV1cIixmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpLHQucHJldmVudERlZmF1bHQoKSxvLmNsb3NlKHQpfSkub24oXCJjbGljay5mYi1wcmV2IHRvdWNoZW5kLmZiLXByZXZcIixcIltkYXRhLWZhbmN5Ym94LXByZXZdXCIsZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24oKSx0LnByZXZlbnREZWZhdWx0KCksby5wcmV2aW91cygpfSkub24oXCJjbGljay5mYi1uZXh0IHRvdWNoZW5kLmZiLW5leHRcIixcIltkYXRhLWZhbmN5Ym94LW5leHRdXCIsZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24oKSx0LnByZXZlbnREZWZhdWx0KCksby5uZXh0KCl9KS5vbihcImNsaWNrLmZiXCIsXCJbZGF0YS1mYW5jeWJveC16b29tXVwiLGZ1bmN0aW9uKHQpe29bby5pc1NjYWxlZERvd24oKT9cInNjYWxlVG9BY3R1YWxcIjpcInNjYWxlVG9GaXRcIl0oKX0pLHMub24oXCJvcmllbnRhdGlvbmNoYW5nZS5mYiByZXNpemUuZmJcIixmdW5jdGlvbih0KXt0JiZ0Lm9yaWdpbmFsRXZlbnQmJlwicmVzaXplXCI9PT10Lm9yaWdpbmFsRXZlbnQudHlwZT91KGZ1bmN0aW9uKCl7by51cGRhdGUoKX0pOihvLiRyZWZzLnN0YWdlLmhpZGUoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by4kcmVmcy5zdGFnZS5zaG93KCksby51cGRhdGUoKX0sNjAwKSl9KSxyLm9uKFwiZm9jdXNpbi5mYlwiLGZ1bmN0aW9uKHQpe3ZhciBhPW4uZmFuY3lib3g/bi5mYW5jeWJveC5nZXRJbnN0YW5jZSgpOm51bGw7YS5pc0Nsb3Npbmd8fCFhLmN1cnJlbnR8fCFhLmN1cnJlbnQub3B0cy50cmFwRm9jdXN8fG4odC50YXJnZXQpLmhhc0NsYXNzKFwiZmFuY3lib3gtY29udGFpbmVyXCIpfHxuKHQudGFyZ2V0KS5pcyhlKXx8YSYmXCJmaXhlZFwiIT09bih0LnRhcmdldCkuY3NzKFwicG9zaXRpb25cIikmJiFhLiRyZWZzLmNvbnRhaW5lci5oYXModC50YXJnZXQpLmxlbmd0aCYmKHQuc3RvcFByb3BhZ2F0aW9uKCksYS5mb2N1cygpLHMuc2Nyb2xsVG9wKG8uc2Nyb2xsVG9wKS5zY3JvbGxMZWZ0KG8uc2Nyb2xsTGVmdCkpfSksci5vbihcImtleWRvd24uZmJcIixmdW5jdGlvbih0KXt2YXIgZT1vLmN1cnJlbnQsYT10LmtleUNvZGV8fHQud2hpY2g7aWYoZSYmZS5vcHRzLmtleWJvYXJkJiYhbih0LnRhcmdldCkuaXMoXCJpbnB1dFwiKSYmIW4odC50YXJnZXQpLmlzKFwidGV4dGFyZWFcIikpcmV0dXJuIDg9PT1hfHwyNz09PWE/KHQucHJldmVudERlZmF1bHQoKSx2b2lkIG8uY2xvc2UodCkpOjM3PT09YXx8Mzg9PT1hPyh0LnByZXZlbnREZWZhdWx0KCksdm9pZCBvLnByZXZpb3VzKCkpOjM5PT09YXx8NDA9PT1hPyh0LnByZXZlbnREZWZhdWx0KCksdm9pZCBvLm5leHQoKSk6dm9pZCBvLnRyaWdnZXIoXCJhZnRlcktleWRvd25cIix0LGEpfSksby5ncm91cFtvLmN1cnJJbmRleF0ub3B0cy5pZGxlVGltZSYmKG8uaWRsZVNlY29uZHNDb3VudGVyPTAsci5vbihcIm1vdXNlbW92ZS5mYi1pZGxlIG1vdXNlbGVhdmUuZmItaWRsZSBtb3VzZWRvd24uZmItaWRsZSB0b3VjaHN0YXJ0LmZiLWlkbGUgdG91Y2htb3ZlLmZiLWlkbGUgc2Nyb2xsLmZiLWlkbGUga2V5ZG93bi5mYi1pZGxlXCIsZnVuY3Rpb24odCl7by5pZGxlU2Vjb25kc0NvdW50ZXI9MCxvLmlzSWRsZSYmby5zaG93Q29udHJvbHMoKSxvLmlzSWRsZT0hMX0pLG8uaWRsZUludGVydmFsPXQuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtvLmlkbGVTZWNvbmRzQ291bnRlcisrLG8uaWRsZVNlY29uZHNDb3VudGVyPj1vLmdyb3VwW28uY3VyckluZGV4XS5vcHRzLmlkbGVUaW1lJiYoby5pc0lkbGU9ITAsby5pZGxlU2Vjb25kc0NvdW50ZXI9MCxvLmhpZGVDb250cm9scygpKX0sMWUzKSl9LHJlbW92ZUV2ZW50czpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cy5vZmYoXCJvcmllbnRhdGlvbmNoYW5nZS5mYiByZXNpemUuZmJcIiksci5vZmYoXCJmb2N1c2luLmZiIGtleWRvd24uZmIgLmZiLWlkbGVcIiksdGhpcy4kcmVmcy5jb250YWluZXIub2ZmKFwiLmZiLWNsb3NlIC5mYi1wcmV2IC5mYi1uZXh0XCIpLGUuaWRsZUludGVydmFsJiYodC5jbGVhckludGVydmFsKGUuaWRsZUludGVydmFsKSxlLmlkbGVJbnRlcnZhbD1udWxsKX0scHJldmlvdXM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuanVtcFRvKHRoaXMuY3VyclBvcy0xLHQpfSxuZXh0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmp1bXBUbyh0aGlzLmN1cnJQb3MrMSx0KX0sanVtcFRvOmZ1bmN0aW9uKHQsZSxhKXt2YXIgaSxzLHIsYyxsLHUsZCxwPXRoaXMsaD1wLmdyb3VwLmxlbmd0aDtpZighKHAuaXNTbGlkaW5nfHxwLmlzQ2xvc2luZ3x8cC5pc0FuaW1hdGluZyYmcC5maXJzdFJ1bikpe2lmKHQ9cGFyc2VJbnQodCwxMCkscz1wLmN1cnJlbnQ/cC5jdXJyZW50Lm9wdHMubG9vcDpwLm9wdHMubG9vcCwhcyYmKHQ8MHx8dD49aCkpcmV0dXJuITE7aWYoaT1wLmZpcnN0UnVuPW51bGw9PT1wLmZpcnN0UnVuLCEoaDwyJiYhaSYmcC5pc1NsaWRpbmcpKXtpZihjPXAuY3VycmVudCxwLnByZXZJbmRleD1wLmN1cnJJbmRleCxwLnByZXZQb3M9cC5jdXJyUG9zLHI9cC5jcmVhdGVTbGlkZSh0KSxoPjEmJigoc3x8ci5pbmRleD4wKSYmcC5jcmVhdGVTbGlkZSh0LTEpLChzfHxyLmluZGV4PGgtMSkmJnAuY3JlYXRlU2xpZGUodCsxKSkscC5jdXJyZW50PXIscC5jdXJySW5kZXg9ci5pbmRleCxwLmN1cnJQb3M9ci5wb3MscC50cmlnZ2VyKFwiYmVmb3JlU2hvd1wiLGkpLHAudXBkYXRlQ29udHJvbHMoKSx1PW4uZmFuY3lib3guZ2V0VHJhbnNsYXRlKHIuJHNsaWRlKSxyLmlzTW92ZWQ9KDAhPT11LmxlZnR8fDAhPT11LnRvcCkmJiFyLiRzbGlkZS5oYXNDbGFzcyhcImZhbmN5Ym94LWFuaW1hdGVkXCIpLHIuZm9yY2VkRHVyYXRpb249byxuLmlzTnVtZXJpYyhlKT9yLmZvcmNlZER1cmF0aW9uPWU6ZT1yLm9wdHNbaT9cImFuaW1hdGlvbkR1cmF0aW9uXCI6XCJ0cmFuc2l0aW9uRHVyYXRpb25cIl0sZT1wYXJzZUludChlLDEwKSxpKXJldHVybiByLm9wdHMuYW5pbWF0aW9uRWZmZWN0JiZlJiZwLiRyZWZzLmNvbnRhaW5lci5jc3MoXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIsZStcIm1zXCIpLHAuJHJlZnMuY29udGFpbmVyLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtaXMtaGlkZGVuXCIpLGYocC4kcmVmcy5jb250YWluZXIpLHAuJHJlZnMuY29udGFpbmVyLmFkZENsYXNzKFwiZmFuY3lib3gtaXMtb3BlblwiKSxyLiRzbGlkZS5hZGRDbGFzcyhcImZhbmN5Ym94LXNsaWRlLS1jdXJyZW50XCIpLHAubG9hZFNsaWRlKHIpLHZvaWQgcC5wcmVsb2FkKCk7bi5lYWNoKHAuc2xpZGVzLGZ1bmN0aW9uKHQsZSl7bi5mYW5jeWJveC5zdG9wKGUuJHNsaWRlKX0pLHIuJHNsaWRlLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtc2xpZGUtLW5leHQgZmFuY3lib3gtc2xpZGUtLXByZXZpb3VzXCIpLmFkZENsYXNzKFwiZmFuY3lib3gtc2xpZGUtLWN1cnJlbnRcIiksci5pc01vdmVkPyhsPU1hdGgucm91bmQoci4kc2xpZGUud2lkdGgoKSksbi5lYWNoKHAuc2xpZGVzLGZ1bmN0aW9uKHQsbyl7dmFyIGE9by5wb3Mtci5wb3M7bi5mYW5jeWJveC5hbmltYXRlKG8uJHNsaWRlLHt0b3A6MCxsZWZ0OmEqbCthKm8ub3B0cy5ndXR0ZXJ9LGUsZnVuY3Rpb24oKXtvLiRzbGlkZS5yZW1vdmVBdHRyKFwic3R5bGVcIikucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC1zbGlkZS0tbmV4dCBmYW5jeWJveC1zbGlkZS0tcHJldmlvdXNcIiksby5wb3M9PT1wLmN1cnJQb3MmJihyLmlzTW92ZWQ9ITEscC5jb21wbGV0ZSgpKX0pfSkpOnAuJHJlZnMuc3RhZ2UuY2hpbGRyZW4oKS5yZW1vdmVBdHRyKFwic3R5bGVcIiksci5pc0xvYWRlZD9wLnJldmVhbENvbnRlbnQocik6cC5sb2FkU2xpZGUocikscC5wcmVsb2FkKCksYy5wb3MhPT1yLnBvcyYmKGQ9XCJmYW5jeWJveC1zbGlkZS0tXCIrKGMucG9zPnIucG9zP1wibmV4dFwiOlwicHJldmlvdXNcIiksYy4kc2xpZGUucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC1zbGlkZS0tY29tcGxldGUgZmFuY3lib3gtc2xpZGUtLWN1cnJlbnQgZmFuY3lib3gtc2xpZGUtLW5leHQgZmFuY3lib3gtc2xpZGUtLXByZXZpb3VzXCIpLGMuaXNDb21wbGV0ZT0hMSxlJiYoci5pc01vdmVkfHxyLm9wdHMudHJhbnNpdGlvbkVmZmVjdCkmJihyLmlzTW92ZWQ/Yy4kc2xpZGUuYWRkQ2xhc3MoZCk6KGQ9XCJmYW5jeWJveC1hbmltYXRlZCBcIitkK1wiIGZhbmN5Ym94LWZ4LVwiK3Iub3B0cy50cmFuc2l0aW9uRWZmZWN0LG4uZmFuY3lib3guYW5pbWF0ZShjLiRzbGlkZSxkLGUsZnVuY3Rpb24oKXtjLiRzbGlkZS5yZW1vdmVDbGFzcyhkKS5yZW1vdmVBdHRyKFwic3R5bGVcIil9KSkpKX19fSxjcmVhdGVTbGlkZTpmdW5jdGlvbih0KXt2YXIgZSxvLGE9dGhpcztyZXR1cm4gbz10JWEuZ3JvdXAubGVuZ3RoLG89bzwwP2EuZ3JvdXAubGVuZ3RoK286bywhYS5zbGlkZXNbdF0mJmEuZ3JvdXBbb10mJihlPW4oJzxkaXYgY2xhc3M9XCJmYW5jeWJveC1zbGlkZVwiPjwvZGl2PicpLmFwcGVuZFRvKGEuJHJlZnMuc3RhZ2UpLGEuc2xpZGVzW3RdPW4uZXh0ZW5kKCEwLHt9LGEuZ3JvdXBbb10se3Bvczp0LCRzbGlkZTplLGlzTG9hZGVkOiExfSksYS51cGRhdGVTbGlkZShhLnNsaWRlc1t0XSkpLGEuc2xpZGVzW3RdfSxzY2FsZVRvQWN0dWFsOmZ1bmN0aW9uKHQsZSxhKXt2YXIgaSxzLHIsYyxsLHU9dGhpcyxkPXUuY3VycmVudCxmPWQuJGNvbnRlbnQscD1wYXJzZUludChkLiRzbGlkZS53aWR0aCgpLDEwKSxoPXBhcnNlSW50KGQuJHNsaWRlLmhlaWdodCgpLDEwKSxnPWQud2lkdGgsYj1kLmhlaWdodDtcImltYWdlXCIhPWQudHlwZXx8ZC5oYXNFcnJvcnx8IWZ8fHUuaXNBbmltYXRpbmd8fChuLmZhbmN5Ym94LnN0b3AoZiksdS5pc0FuaW1hdGluZz0hMCx0PXQ9PT1vPy41KnA6dCxlPWU9PT1vPy41Kmg6ZSxpPW4uZmFuY3lib3guZ2V0VHJhbnNsYXRlKGYpLGM9Zy9pLndpZHRoLGw9Yi9pLmhlaWdodCxzPS41KnAtLjUqZyxyPS41KmgtLjUqYixnPnAmJihzPWkubGVmdCpjLSh0KmMtdCkscz4wJiYocz0wKSxzPHAtZyYmKHM9cC1nKSksYj5oJiYocj1pLnRvcCpsLShlKmwtZSkscj4wJiYocj0wKSxyPGgtYiYmKHI9aC1iKSksdS51cGRhdGVDdXJzb3IoZyxiKSxuLmZhbmN5Ym94LmFuaW1hdGUoZix7dG9wOnIsbGVmdDpzLHNjYWxlWDpjLHNjYWxlWTpsfSxhfHwzMzAsZnVuY3Rpb24oKXt1LmlzQW5pbWF0aW5nPSExfSksdS5TbGlkZVNob3cmJnUuU2xpZGVTaG93LmlzQWN0aXZlJiZ1LlNsaWRlU2hvdy5zdG9wKCkpfSxzY2FsZVRvRml0OmZ1bmN0aW9uKHQpe3ZhciBlLG89dGhpcyxhPW8uY3VycmVudCxpPWEuJGNvbnRlbnQ7XCJpbWFnZVwiIT1hLnR5cGV8fGEuaGFzRXJyb3J8fCFpfHxvLmlzQW5pbWF0aW5nfHwobi5mYW5jeWJveC5zdG9wKGkpLG8uaXNBbmltYXRpbmc9ITAsZT1vLmdldEZpdFBvcyhhKSxvLnVwZGF0ZUN1cnNvcihlLndpZHRoLGUuaGVpZ2h0KSxuLmZhbmN5Ym94LmFuaW1hdGUoaSx7dG9wOmUudG9wLGxlZnQ6ZS5sZWZ0LHNjYWxlWDplLndpZHRoL2kud2lkdGgoKSxzY2FsZVk6ZS5oZWlnaHQvaS5oZWlnaHQoKX0sdHx8MzMwLGZ1bmN0aW9uKCl7by5pc0FuaW1hdGluZz0hMX0pKX0sZ2V0Rml0UG9zOmZ1bmN0aW9uKHQpe3ZhciBlLG8sYSxpLHMscj10aGlzLGM9dC4kY29udGVudCxsPXQud2lkdGgsdT10LmhlaWdodCxkPXQub3B0cy5tYXJnaW47cmV0dXJuISghY3x8IWMubGVuZ3RofHwhbCYmIXUpJiYoXCJudW1iZXJcIj09PW4udHlwZShkKSYmKGQ9W2QsZF0pLDI9PWQubGVuZ3RoJiYoZD1bZFswXSxkWzFdLGRbMF0sZFsxXV0pLGU9cGFyc2VJbnQoci4kcmVmcy5zdGFnZS53aWR0aCgpLDEwKS0oZFsxXStkWzNdKSxvPXBhcnNlSW50KHIuJHJlZnMuc3RhZ2UuaGVpZ2h0KCksMTApLShkWzBdK2RbMl0pLGE9TWF0aC5taW4oMSxlL2wsby91KSxpPU1hdGguZmxvb3IoYSpsKSxzPU1hdGguZmxvb3IoYSp1KSx7dG9wOk1hdGguZmxvb3IoLjUqKG8tcykpK2RbMF0sbGVmdDpNYXRoLmZsb29yKC41KihlLWkpKStkWzNdLHdpZHRoOmksaGVpZ2h0OnN9KX0sdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuLmVhY2godC5zbGlkZXMsZnVuY3Rpb24oZSxuKXt0LnVwZGF0ZVNsaWRlKG4pfSl9LHVwZGF0ZVNsaWRlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbz10LiRjb250ZW50O28mJih0LndpZHRofHx0LmhlaWdodCkmJihlLmlzQW5pbWF0aW5nPSExLG4uZmFuY3lib3guc3RvcChvKSxuLmZhbmN5Ym94LnNldFRyYW5zbGF0ZShvLGUuZ2V0Rml0UG9zKHQpKSx0LnBvcz09PWUuY3VyclBvcyYmZS51cGRhdGVDdXJzb3IoKSksdC4kc2xpZGUudHJpZ2dlcihcInJlZnJlc2hcIiksZS50cmlnZ2VyKFwib25VcGRhdGVcIix0KX0sdXBkYXRlQ3Vyc29yOmZ1bmN0aW9uKHQsZSl7dmFyIG4sYT10aGlzLGk9YS4kcmVmcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC1pcy16b29tYWJsZSBmYW5jeWJveC1jYW4tem9vbUluIGZhbmN5Ym94LWNhbi1kcmFnIGZhbmN5Ym94LWNhbi16b29tT3V0XCIpO2EuY3VycmVudCYmIWEuaXNDbG9zaW5nJiYoYS5pc1pvb21hYmxlKCk/KGkuYWRkQ2xhc3MoXCJmYW5jeWJveC1pcy16b29tYWJsZVwiKSxuPXQhPT1vJiZlIT09bz90PGEuY3VycmVudC53aWR0aCYmZTxhLmN1cnJlbnQuaGVpZ2h0OmEuaXNTY2FsZWREb3duKCksbj9pLmFkZENsYXNzKFwiZmFuY3lib3gtY2FuLXpvb21JblwiKTphLmN1cnJlbnQub3B0cy50b3VjaD9pLmFkZENsYXNzKFwiZmFuY3lib3gtY2FuLWRyYWdcIik6aS5hZGRDbGFzcyhcImZhbmN5Ym94LWNhbi16b29tT3V0XCIpKTphLmN1cnJlbnQub3B0cy50b3VjaCYmaS5hZGRDbGFzcyhcImZhbmN5Ym94LWNhbi1kcmFnXCIpKX0saXNab29tYWJsZTpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcyxvPWUuY3VycmVudDtpZihvJiYhZS5pc0Nsb3NpbmcpcmV0dXJuISEoXCJpbWFnZVwiPT09by50eXBlJiZvLmlzTG9hZGVkJiYhby5oYXNFcnJvciYmKFwiem9vbVwiPT09by5vcHRzLmNsaWNrQ29udGVudHx8bi5pc0Z1bmN0aW9uKG8ub3B0cy5jbGlja0NvbnRlbnQpJiZcInpvb21cIj09PW8ub3B0cy5jbGlja0NvbnRlbnQobykpJiYodD1lLmdldEZpdFBvcyhvKSxvLndpZHRoPnQud2lkdGh8fG8uaGVpZ2h0PnQuaGVpZ2h0KSl9LGlzU2NhbGVkRG93bjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10LmN1cnJlbnQsbz1lLiRjb250ZW50LGE9ITE7cmV0dXJuIG8mJihhPW4uZmFuY3lib3guZ2V0VHJhbnNsYXRlKG8pLGE9YS53aWR0aDxlLndpZHRofHxhLmhlaWdodDxlLmhlaWdodCksYX0sY2FuUGFuOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXQuY3VycmVudCxuPWUuJGNvbnRlbnQsbz0hMTtyZXR1cm4gbiYmKG89dC5nZXRGaXRQb3MoZSksbz1NYXRoLmFicyhuLndpZHRoKCktby53aWR0aCk+MXx8TWF0aC5hYnMobi5oZWlnaHQoKS1vLmhlaWdodCk+MSksb30sbG9hZFNsaWRlOmZ1bmN0aW9uKHQpe3ZhciBlLG8sYSxpPXRoaXM7aWYoIXQuaXNMb2FkaW5nJiYhdC5pc0xvYWRlZCl7c3dpdGNoKHQuaXNMb2FkaW5nPSEwLGkudHJpZ2dlcihcImJlZm9yZUxvYWRcIix0KSxlPXQudHlwZSxvPXQuJHNsaWRlLG8ub2ZmKFwicmVmcmVzaFwiKS50cmlnZ2VyKFwib25SZXNldFwiKS5hZGRDbGFzcyhcImZhbmN5Ym94LXNsaWRlLS1cIisoZXx8XCJ1bmtub3duXCIpKS5hZGRDbGFzcyh0Lm9wdHMuc2xpZGVDbGFzcyksZSl7Y2FzZVwiaW1hZ2VcIjppLnNldEltYWdlKHQpO2JyZWFrO2Nhc2VcImlmcmFtZVwiOmkuc2V0SWZyYW1lKHQpO2JyZWFrO2Nhc2VcImh0bWxcIjppLnNldENvbnRlbnQodCx0LnNyY3x8dC5jb250ZW50KTticmVhaztjYXNlXCJpbmxpbmVcIjpuKHQuc3JjKS5sZW5ndGg/aS5zZXRDb250ZW50KHQsbih0LnNyYykpOmkuc2V0RXJyb3IodCk7YnJlYWs7Y2FzZVwiYWpheFwiOmkuc2hvd0xvYWRpbmcodCksYT1uLmFqYXgobi5leHRlbmQoe30sdC5vcHRzLmFqYXguc2V0dGluZ3Mse3VybDp0LnNyYyxzdWNjZXNzOmZ1bmN0aW9uKGUsbil7XCJzdWNjZXNzXCI9PT1uJiZpLnNldENvbnRlbnQodCxlKX0sZXJyb3I6ZnVuY3Rpb24oZSxuKXtlJiZcImFib3J0XCIhPT1uJiZpLnNldEVycm9yKHQpfX0pKSxvLm9uZShcIm9uUmVzZXRcIixmdW5jdGlvbigpe2EuYWJvcnQoKX0pO2JyZWFrO2RlZmF1bHQ6aS5zZXRFcnJvcih0KX1yZXR1cm4hMH19LHNldEltYWdlOmZ1bmN0aW9uKGUpe3ZhciBvLGEsaSxzLHI9dGhpcyxjPWUub3B0cy5zcmNzZXR8fGUub3B0cy5pbWFnZS5zcmNzZXQ7aWYoYyl7aT10LmRldmljZVBpeGVsUmF0aW98fDEscz10LmlubmVyV2lkdGgqaSxhPWMuc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbih0KXt2YXIgZT17fTtyZXR1cm4gdC50cmltKCkuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7dmFyIG89cGFyc2VJbnQodC5zdWJzdHJpbmcoMCx0Lmxlbmd0aC0xKSwxMCk7cmV0dXJuIDA9PT1uP2UudXJsPXQ6dm9pZChvJiYoZS52YWx1ZT1vLGUucG9zdGZpeD10W3QubGVuZ3RoLTFdKSl9KSxlfSksYS5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudmFsdWUtZS52YWx1ZX0pO2Zvcih2YXIgbD0wO2w8YS5sZW5ndGg7bCsrKXt2YXIgdT1hW2xdO2lmKFwid1wiPT09dS5wb3N0Zml4JiZ1LnZhbHVlPj1zfHxcInhcIj09PXUucG9zdGZpeCYmdS52YWx1ZT49aSl7bz11O2JyZWFrfX0hbyYmYS5sZW5ndGgmJihvPWFbYS5sZW5ndGgtMV0pLG8mJihlLnNyYz1vLnVybCxlLndpZHRoJiZlLmhlaWdodCYmXCJ3XCI9PW8ucG9zdGZpeCYmKGUuaGVpZ2h0PWUud2lkdGgvZS5oZWlnaHQqby52YWx1ZSxlLndpZHRoPW8udmFsdWUpKX1lLiRjb250ZW50PW4oJzxkaXYgY2xhc3M9XCJmYW5jeWJveC1pbWFnZS13cmFwXCI+PC9kaXY+JykuYWRkQ2xhc3MoXCJmYW5jeWJveC1pcy1oaWRkZW5cIikuYXBwZW5kVG8oZS4kc2xpZGUpLGUub3B0cy5wcmVsb2FkIT09ITEmJmUub3B0cy53aWR0aCYmZS5vcHRzLmhlaWdodCYmKGUub3B0cy50aHVtYnx8ZS5vcHRzLiR0aHVtYik/KGUud2lkdGg9ZS5vcHRzLndpZHRoLGUuaGVpZ2h0PWUub3B0cy5oZWlnaHQsZS4kZ2hvc3Q9bihcIjxpbWcgLz5cIikub25lKFwiZXJyb3JcIixmdW5jdGlvbigpe24odGhpcykucmVtb3ZlKCksZS4kZ2hvc3Q9bnVsbCxyLnNldEJpZ0ltYWdlKGUpfSkub25lKFwibG9hZFwiLGZ1bmN0aW9uKCl7ci5hZnRlckxvYWQoZSksci5zZXRCaWdJbWFnZShlKX0pLmFkZENsYXNzKFwiZmFuY3lib3gtaW1hZ2VcIikuYXBwZW5kVG8oZS4kY29udGVudCkuYXR0cihcInNyY1wiLGUub3B0cy50aHVtYnx8ZS5vcHRzLiR0aHVtYi5hdHRyKFwic3JjXCIpKSk6ci5zZXRCaWdJbWFnZShlKX0sc2V0QmlnSW1hZ2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxvPW4oXCI8aW1nIC8+XCIpO3QuJGltYWdlPW8ub25lKFwiZXJyb3JcIixmdW5jdGlvbigpe2Uuc2V0RXJyb3IodCl9KS5vbmUoXCJsb2FkXCIsZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodC50aW1vdXRzKSx0LnRpbW91dHM9bnVsbCxlLmlzQ2xvc2luZ3x8KHQud2lkdGg9dGhpcy5uYXR1cmFsV2lkdGgsdC5oZWlnaHQ9dGhpcy5uYXR1cmFsSGVpZ2h0LHQub3B0cy5pbWFnZS5zcmNzZXQmJm8uYXR0cihcInNpemVzXCIsXCIxMDB2d1wiKS5hdHRyKFwic3Jjc2V0XCIsdC5vcHRzLmltYWdlLnNyY3NldCksZS5oaWRlTG9hZGluZyh0KSx0LiRnaG9zdD90LnRpbW91dHM9c2V0VGltZW91dChmdW5jdGlvbigpe3QudGltb3V0cz1udWxsLHQuJGdob3N0LmhpZGUoKX0sTWF0aC5taW4oMzAwLE1hdGgubWF4KDFlMyx0LmhlaWdodC8xNjAwKSkpOmUuYWZ0ZXJMb2FkKHQpKX0pLmFkZENsYXNzKFwiZmFuY3lib3gtaW1hZ2VcIikuYXR0cihcInNyY1wiLHQuc3JjKS5hcHBlbmRUbyh0LiRjb250ZW50KSwob1swXS5jb21wbGV0ZXx8XCJjb21wbGV0ZVwiPT1vWzBdLnJlYWR5U3RhdGUpJiZvWzBdLm5hdHVyYWxXaWR0aCYmb1swXS5uYXR1cmFsSGVpZ2h0P28udHJpZ2dlcihcImxvYWRcIik6b1swXS5lcnJvcj9vLnRyaWdnZXIoXCJlcnJvclwiKTp0LnRpbW91dHM9c2V0VGltZW91dChmdW5jdGlvbigpe29bMF0uY29tcGxldGV8fHQuaGFzRXJyb3J8fGUuc2hvd0xvYWRpbmcodCl9LDEwMCl9LHNldElmcmFtZTpmdW5jdGlvbih0KXt2YXIgZSxhPXRoaXMsaT10Lm9wdHMuaWZyYW1lLHM9dC4kc2xpZGU7dC4kY29udGVudD1uKCc8ZGl2IGNsYXNzPVwiZmFuY3lib3gtY29udGVudCcrKGkucHJlbG9hZD9cIiBmYW5jeWJveC1pcy1oaWRkZW5cIjpcIlwiKSsnXCI+PC9kaXY+JykuY3NzKGkuY3NzKS5hcHBlbmRUbyhzKSxlPW4oaS50cGwucmVwbGFjZSgvXFx7cm5kXFx9L2csKG5ldyBEYXRlKS5nZXRUaW1lKCkpKS5hdHRyKGkuYXR0cikuYXBwZW5kVG8odC4kY29udGVudCksaS5wcmVsb2FkPyhhLnNob3dMb2FkaW5nKHQpLGUub24oXCJsb2FkLmZiIGVycm9yLmZiXCIsZnVuY3Rpb24oZSl7dGhpcy5pc1JlYWR5PTEsdC4kc2xpZGUudHJpZ2dlcihcInJlZnJlc2hcIiksYS5hZnRlckxvYWQodCl9KSxzLm9uKFwicmVmcmVzaC5mYlwiLGZ1bmN0aW9uKCl7dmFyIG4sYSxzLHI9dC4kY29udGVudCxjPWkuY3NzLndpZHRoLGw9aS5jc3MuaGVpZ2h0O2lmKDE9PT1lWzBdLmlzUmVhZHkpe3RyeXthPWUuY29udGVudHMoKSxzPWEuZmluZChcImJvZHlcIil9Y2F0Y2godCl7fXMmJnMubGVuZ3RoJiYoYz09PW8mJihuPWVbMF0uY29udGVudFdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGgsYz1NYXRoLmNlaWwocy5vdXRlcldpZHRoKCEwKSsoci53aWR0aCgpLW4pKSxjKz1yLm91dGVyV2lkdGgoKS1yLmlubmVyV2lkdGgoKSksbD09PW8mJihsPU1hdGguY2VpbChzLm91dGVySGVpZ2h0KCEwKSksbCs9ci5vdXRlckhlaWdodCgpLXIuaW5uZXJIZWlnaHQoKSksYyYmci53aWR0aChjKSxsJiZyLmhlaWdodChsKSksci5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LWlzLWhpZGRlblwiKX19KSk6dGhpcy5hZnRlckxvYWQodCksZS5hdHRyKFwic3JjXCIsdC5zcmMpLHQub3B0cy5zbWFsbEJ0bj09PSEwJiZ0LiRjb250ZW50LnByZXBlbmQoYS50cmFuc2xhdGUodCx0Lm9wdHMuYnRuVHBsLnNtYWxsQnRuKSkscy5vbmUoXCJvblJlc2V0XCIsZnVuY3Rpb24oKXt0cnl7bih0aGlzKS5maW5kKFwiaWZyYW1lXCIpLmhpZGUoKS5hdHRyKFwic3JjXCIsXCIvL2Fib3V0OmJsYW5rXCIpfWNhdGNoKHQpe31uKHRoaXMpLmVtcHR5KCksdC5pc0xvYWRlZD0hMX0pfSxzZXRDb250ZW50OmZ1bmN0aW9uKHQsZSl7dmFyIG89dGhpcztvLmlzQ2xvc2luZ3x8KG8uaGlkZUxvYWRpbmcodCksdC4kc2xpZGUuZW1wdHkoKSxsKGUpJiZlLnBhcmVudCgpLmxlbmd0aD8oZS5wYXJlbnQoXCIuZmFuY3lib3gtc2xpZGUtLWlubGluZVwiKS50cmlnZ2VyKFwib25SZXNldFwiKSx0LiRwbGFjZWhvbGRlcj1uKFwiPGRpdj48L2Rpdj5cIikuaGlkZSgpLmluc2VydEFmdGVyKGUpLGUuY3NzKFwiZGlzcGxheVwiLFwiaW5saW5lLWJsb2NrXCIpKTp0Lmhhc0Vycm9yfHwoXCJzdHJpbmdcIj09PW4udHlwZShlKSYmKGU9bihcIjxkaXY+XCIpLmFwcGVuZChuLnRyaW0oZSkpLmNvbnRlbnRzKCksMz09PWVbMF0ubm9kZVR5cGUmJihlPW4oXCI8ZGl2PlwiKS5odG1sKGUpKSksdC5vcHRzLmZpbHRlciYmKGU9bihcIjxkaXY+XCIpLmh0bWwoZSkuZmluZCh0Lm9wdHMuZmlsdGVyKSkpLHQuJHNsaWRlLm9uZShcIm9uUmVzZXRcIixmdW5jdGlvbigpe3QuJHBsYWNlaG9sZGVyJiYodC4kcGxhY2Vob2xkZXIuYWZ0ZXIoZS5oaWRlKCkpLnJlbW92ZSgpLHQuJHBsYWNlaG9sZGVyPW51bGwpLHQuJHNtYWxsQnRuJiYodC4kc21hbGxCdG4ucmVtb3ZlKCksdC4kc21hbGxCdG49bnVsbCksdC5oYXNFcnJvcnx8KG4odGhpcykuZW1wdHkoKSx0LmlzTG9hZGVkPSExKX0pLHQuJGNvbnRlbnQ9bihlKS5hcHBlbmRUbyh0LiRzbGlkZSksdGhpcy5hZnRlckxvYWQodCkpfSxzZXRFcnJvcjpmdW5jdGlvbih0KXt0Lmhhc0Vycm9yPSEwLHQuJHNsaWRlLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtc2xpZGUtLVwiK3QudHlwZSksdGhpcy5zZXRDb250ZW50KHQsdGhpcy50cmFuc2xhdGUodCx0Lm9wdHMuZXJyb3JUcGwpKX0sc2hvd0xvYWRpbmc6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0PXR8fGUuY3VycmVudCx0JiYhdC4kc3Bpbm5lciYmKHQuJHNwaW5uZXI9bihlLm9wdHMuc3Bpbm5lclRwbCkuYXBwZW5kVG8odC4kc2xpZGUpKX0saGlkZUxvYWRpbmc6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0PXR8fGUuY3VycmVudCx0JiZ0LiRzcGlubmVyJiYodC4kc3Bpbm5lci5yZW1vdmUoKSxkZWxldGUgdC4kc3Bpbm5lcil9LGFmdGVyTG9hZDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2UuaXNDbG9zaW5nfHwodC5pc0xvYWRpbmc9ITEsdC5pc0xvYWRlZD0hMCxlLnRyaWdnZXIoXCJhZnRlckxvYWRcIix0KSxlLmhpZGVMb2FkaW5nKHQpLHQub3B0cy5zbWFsbEJ0biYmIXQuJHNtYWxsQnRuJiYodC4kc21hbGxCdG49bihlLnRyYW5zbGF0ZSh0LHQub3B0cy5idG5UcGwuc21hbGxCdG4pKS5hcHBlbmRUbyh0LiRjb250ZW50LmZpbHRlcihcImRpdixmb3JtXCIpLmZpcnN0KCkpKSx0Lm9wdHMucHJvdGVjdCYmdC4kY29udGVudCYmIXQuaGFzRXJyb3ImJih0LiRjb250ZW50Lm9uKFwiY29udGV4dG1lbnUuZmJcIixmdW5jdGlvbih0KXtyZXR1cm4gMj09dC5idXR0b24mJnQucHJldmVudERlZmF1bHQoKSwhMH0pLFwiaW1hZ2VcIj09PXQudHlwZSYmbignPGRpdiBjbGFzcz1cImZhbmN5Ym94LXNwYWNlYmFsbFwiPjwvZGl2PicpLmFwcGVuZFRvKHQuJGNvbnRlbnQpKSxlLnJldmVhbENvbnRlbnQodCkpfSxyZXZlYWxDb250ZW50OmZ1bmN0aW9uKHQpe3ZhciBlLGEsaSxzLHIsYz10aGlzLGw9dC4kc2xpZGUsdT0hMTtyZXR1cm4gZT10Lm9wdHNbYy5maXJzdFJ1bj9cImFuaW1hdGlvbkVmZmVjdFwiOlwidHJhbnNpdGlvbkVmZmVjdFwiXSxpPXQub3B0c1tjLmZpcnN0UnVuP1wiYW5pbWF0aW9uRHVyYXRpb25cIjpcInRyYW5zaXRpb25EdXJhdGlvblwiXSxpPXBhcnNlSW50KHQuZm9yY2VkRHVyYXRpb249PT1vP2k6dC5mb3JjZWREdXJhdGlvbiwxMCksIXQuaXNNb3ZlZCYmdC5wb3M9PT1jLmN1cnJQb3MmJml8fChlPSExKSxcInpvb21cIiE9PWV8fHQucG9zPT09Yy5jdXJyUG9zJiZpJiZcImltYWdlXCI9PT10LnR5cGUmJiF0Lmhhc0Vycm9yJiYodT1jLmdldFRodW1iUG9zKHQpKXx8KGU9XCJmYWRlXCIpLFwiem9vbVwiPT09ZT8ocj1jLmdldEZpdFBvcyh0KSxyLnNjYWxlWD1yLndpZHRoL3Uud2lkdGgsci5zY2FsZVk9ci5oZWlnaHQvdS5oZWlnaHQsZGVsZXRlIHIud2lkdGgsZGVsZXRlIHIuaGVpZ2h0LHM9dC5vcHRzLnpvb21PcGFjaXR5LFwiYXV0b1wiPT1zJiYocz1NYXRoLmFicyh0LndpZHRoL3QuaGVpZ2h0LXUud2lkdGgvdS5oZWlnaHQpPi4xKSxzJiYodS5vcGFjaXR5PS4xLHIub3BhY2l0eT0xKSxuLmZhbmN5Ym94LnNldFRyYW5zbGF0ZSh0LiRjb250ZW50LnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtaXMtaGlkZGVuXCIpLHUpLGYodC4kY29udGVudCksdm9pZCBuLmZhbmN5Ym94LmFuaW1hdGUodC4kY29udGVudCxyLGksZnVuY3Rpb24oKXtjLmNvbXBsZXRlKCl9KSk6KGMudXBkYXRlU2xpZGUodCksZT8obi5mYW5jeWJveC5zdG9wKGwpLGE9XCJmYW5jeWJveC1hbmltYXRlZCBmYW5jeWJveC1zbGlkZS0tXCIrKHQucG9zPj1jLnByZXZQb3M/XCJuZXh0XCI6XCJwcmV2aW91c1wiKStcIiBmYW5jeWJveC1meC1cIitlLGwucmVtb3ZlQXR0cihcInN0eWxlXCIpLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtc2xpZGUtLWN1cnJlbnQgZmFuY3lib3gtc2xpZGUtLW5leHQgZmFuY3lib3gtc2xpZGUtLXByZXZpb3VzXCIpLmFkZENsYXNzKGEpLHQuJGNvbnRlbnQucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC1pcy1oaWRkZW5cIiksZihsKSx2b2lkIG4uZmFuY3lib3guYW5pbWF0ZShsLFwiZmFuY3lib3gtc2xpZGUtLWN1cnJlbnRcIixpLGZ1bmN0aW9uKGUpe2wucmVtb3ZlQ2xhc3MoYSkucmVtb3ZlQXR0cihcInN0eWxlXCIpLHQucG9zPT09Yy5jdXJyUG9zJiZjLmNvbXBsZXRlKCl9LCEwKSk6KGYobCksdC4kY29udGVudC5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LWlzLWhpZGRlblwiKSx2b2lkKHQucG9zPT09Yy5jdXJyUG9zJiZjLmNvbXBsZXRlKCkpKSl9LGdldFRodW1iUG9zOmZ1bmN0aW9uKG8pe3ZhciBhLGk9dGhpcyxzPSExLHI9ZnVuY3Rpb24oZSl7Zm9yKHZhciBvLGE9ZVswXSxpPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscz1bXTtudWxsIT09YS5wYXJlbnRFbGVtZW50OylcImhpZGRlblwiIT09bihhLnBhcmVudEVsZW1lbnQpLmNzcyhcIm92ZXJmbG93XCIpJiZcImF1dG9cIiE9PW4oYS5wYXJlbnRFbGVtZW50KS5jc3MoXCJvdmVyZmxvd1wiKXx8cy5wdXNoKGEucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYT1hLnBhcmVudEVsZW1lbnQ7cmV0dXJuIG89cy5ldmVyeShmdW5jdGlvbih0KXt2YXIgZT1NYXRoLm1pbihpLnJpZ2h0LHQucmlnaHQpLU1hdGgubWF4KGkubGVmdCx0LmxlZnQpLG49TWF0aC5taW4oaS5ib3R0b20sdC5ib3R0b20pLU1hdGgubWF4KGkudG9wLHQudG9wKTtyZXR1cm4gZT4wJiZuPjB9KSxvJiZpLmJvdHRvbT4wJiZpLnJpZ2h0PjAmJmkubGVmdDxuKHQpLndpZHRoKCkmJmkudG9wPG4odCkuaGVpZ2h0KCl9LGM9by5vcHRzLiR0aHVtYixsPWM/Yy5vZmZzZXQoKTowO3JldHVybiBsJiZjWzBdLm93bmVyRG9jdW1lbnQ9PT1lJiZyKGMpJiYoYT1pLiRyZWZzLnN0YWdlLm9mZnNldCgpLHM9e3RvcDpsLnRvcC1hLnRvcCtwYXJzZUZsb2F0KGMuY3NzKFwiYm9yZGVyLXRvcC13aWR0aFwiKXx8MCksbGVmdDpsLmxlZnQtYS5sZWZ0K3BhcnNlRmxvYXQoYy5jc3MoXCJib3JkZXItbGVmdC13aWR0aFwiKXx8MCksd2lkdGg6Yy53aWR0aCgpLGhlaWdodDpjLmhlaWdodCgpLHNjYWxlWDoxLHNjYWxlWToxfSksc30sY29tcGxldGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG89dC5jdXJyZW50LGE9e307by5pc01vdmVkfHwhby5pc0xvYWRlZHx8by5pc0NvbXBsZXRlfHwoby5pc0NvbXBsZXRlPSEwLG8uJHNsaWRlLnNpYmxpbmdzKCkudHJpZ2dlcihcIm9uUmVzZXRcIiksZihvLiRzbGlkZSksby4kc2xpZGUuYWRkQ2xhc3MoXCJmYW5jeWJveC1zbGlkZS0tY29tcGxldGVcIiksbi5lYWNoKHQuc2xpZGVzLGZ1bmN0aW9uKGUsbyl7by5wb3M+PXQuY3VyclBvcy0xJiZvLnBvczw9dC5jdXJyUG9zKzE/YVtvLnBvc109bzpvJiYobi5mYW5jeWJveC5zdG9wKG8uJHNsaWRlKSxvLiRzbGlkZS5vZmYoKS5yZW1vdmUoKSl9KSx0LnNsaWRlcz1hLHQudXBkYXRlQ3Vyc29yKCksdC50cmlnZ2VyKFwiYWZ0ZXJTaG93XCIpLChuKGUuYWN0aXZlRWxlbWVudCkuaXMoXCJbZGlzYWJsZWRdXCIpfHxvLm9wdHMuYXV0b0ZvY3VzJiZcImltYWdlXCIhPW8udHlwZSYmXCJpZnJhbWVcIiE9PW8udHlwZSkmJnQuZm9jdXMoKSl9LHByZWxvYWQ6ZnVuY3Rpb24oKXt2YXIgdCxlLG49dGhpcztuLmdyb3VwLmxlbmd0aDwyfHwodD1uLnNsaWRlc1tuLmN1cnJQb3MrMV0sZT1uLnNsaWRlc1tuLmN1cnJQb3MtMV0sdCYmXCJpbWFnZVwiPT09dC50eXBlJiZuLmxvYWRTbGlkZSh0KSxlJiZcImltYWdlXCI9PT1lLnR5cGUmJm4ubG9hZFNsaWRlKGUpKX0sZm9jdXM6ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuY3VycmVudDt0aGlzLmlzQ2xvc2luZ3x8KGUmJmUuaXNDb21wbGV0ZSYmKHQ9ZS4kc2xpZGUuZmluZChcImlucHV0W2F1dG9mb2N1c106ZW5hYmxlZDp2aXNpYmxlOmZpcnN0XCIpLHQubGVuZ3RofHwodD1lLiRzbGlkZS5maW5kKFwiYnV0dG9uLDppbnB1dCxbdGFiaW5kZXhdLGFcIikuZmlsdGVyKFwiOmVuYWJsZWQ6dmlzaWJsZTpmaXJzdFwiKSkpLHQ9dCYmdC5sZW5ndGg/dDp0aGlzLiRyZWZzLmNvbnRhaW5lcix0LmZvY3VzKCkpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bihcIi5mYW5jeWJveC1jb250YWluZXJcIikuZWFjaChmdW5jdGlvbigpe3ZhciBlPW4odGhpcykuZGF0YShcIkZhbmN5Qm94XCIpO2UmJmUuaWQhPT10LmlkJiYhZS5pc0Nsb3NpbmcmJihlLnRyaWdnZXIoXCJvbkRlYWN0aXZhdGVcIiksZS5yZW1vdmVFdmVudHMoKSxlLmlzVmlzaWJsZT0hMSl9KSx0LmlzVmlzaWJsZT0hMCwodC5jdXJyZW50fHx0LmlzSWRsZSkmJih0LnVwZGF0ZSgpLHQudXBkYXRlQ29udHJvbHMoKSksdC50cmlnZ2VyKFwib25BY3RpdmF0ZVwiKSx0LmFkZEV2ZW50cygpfSxjbG9zZTpmdW5jdGlvbih0LGUpe3ZhciBvLGEsaSxzLHIsYyxsPXRoaXMscD1sLmN1cnJlbnQsaD1mdW5jdGlvbigpe2wuY2xlYW5VcCh0KX07cmV0dXJuIWwuaXNDbG9zaW5nJiYobC5pc0Nsb3Npbmc9ITAsbC50cmlnZ2VyKFwiYmVmb3JlQ2xvc2VcIix0KT09PSExPyhsLmlzQ2xvc2luZz0hMSx1KGZ1bmN0aW9uKCl7bC51cGRhdGUoKX0pLCExKToobC5yZW1vdmVFdmVudHMoKSxwLnRpbW91dHMmJmNsZWFyVGltZW91dChwLnRpbW91dHMpLGk9cC4kY29udGVudCxvPXAub3B0cy5hbmltYXRpb25FZmZlY3QsYT1uLmlzTnVtZXJpYyhlKT9lOm8/cC5vcHRzLmFuaW1hdGlvbkR1cmF0aW9uOjAscC4kc2xpZGUub2ZmKGQpLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtc2xpZGUtLWNvbXBsZXRlIGZhbmN5Ym94LXNsaWRlLS1uZXh0IGZhbmN5Ym94LXNsaWRlLS1wcmV2aW91cyBmYW5jeWJveC1hbmltYXRlZFwiKSxwLiRzbGlkZS5zaWJsaW5ncygpLnRyaWdnZXIoXCJvblJlc2V0XCIpLnJlbW92ZSgpLGEmJmwuJHJlZnMuY29udGFpbmVyLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtaXMtb3BlblwiKS5hZGRDbGFzcyhcImZhbmN5Ym94LWlzLWNsb3NpbmdcIiksbC5oaWRlTG9hZGluZyhwKSxsLmhpZGVDb250cm9scygpLGwudXBkYXRlQ3Vyc29yKCksXCJ6b29tXCIhPT1vfHx0IT09ITAmJmkmJmEmJlwiaW1hZ2VcIj09PXAudHlwZSYmIXAuaGFzRXJyb3ImJihjPWwuZ2V0VGh1bWJQb3MocCkpfHwobz1cImZhZGVcIiksXCJ6b29tXCI9PT1vPyhuLmZhbmN5Ym94LnN0b3AoaSkscj1uLmZhbmN5Ym94LmdldFRyYW5zbGF0ZShpKSxyLndpZHRoPXIud2lkdGgqci5zY2FsZVgsci5oZWlnaHQ9ci5oZWlnaHQqci5zY2FsZVkscz1wLm9wdHMuem9vbU9wYWNpdHksXCJhdXRvXCI9PXMmJihzPU1hdGguYWJzKHAud2lkdGgvcC5oZWlnaHQtYy53aWR0aC9jLmhlaWdodCk+LjEpLHMmJihjLm9wYWNpdHk9MCksci5zY2FsZVg9ci53aWR0aC9jLndpZHRoLHIuc2NhbGVZPXIuaGVpZ2h0L2MuaGVpZ2h0LHIud2lkdGg9Yy53aWR0aCxyLmhlaWdodD1jLmhlaWdodCxuLmZhbmN5Ym94LnNldFRyYW5zbGF0ZShwLiRjb250ZW50LHIpLGYocC4kY29udGVudCksbi5mYW5jeWJveC5hbmltYXRlKHAuJGNvbnRlbnQsYyxhLGgpLCEwKToobyYmYT90PT09ITA/c2V0VGltZW91dChoLGEpOm4uZmFuY3lib3guYW5pbWF0ZShwLiRzbGlkZS5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LXNsaWRlLS1jdXJyZW50XCIpLFwiZmFuY3lib3gtYW5pbWF0ZWQgZmFuY3lib3gtc2xpZGUtLXByZXZpb3VzIGZhbmN5Ym94LWZ4LVwiK28sYSxoKTpoKCksITApKSl9LGNsZWFuVXA6ZnVuY3Rpb24odCl7dmFyIG8sYSxpPXRoaXMscj1uKFwiYm9keVwiKTtpLmN1cnJlbnQuJHNsaWRlLnRyaWdnZXIoXCJvblJlc2V0XCIpLGkuJHJlZnMuY29udGFpbmVyLmVtcHR5KCkucmVtb3ZlKCksaS50cmlnZ2VyKFwiYWZ0ZXJDbG9zZVwiLHQpLGkuJGxhc3RGb2N1cyYmaS5jdXJyZW50Lm9wdHMuYmFja0ZvY3VzJiZpLiRsYXN0Rm9jdXMuZm9jdXMoKSxpLmN1cnJlbnQ9bnVsbCxvPW4uZmFuY3lib3guZ2V0SW5zdGFuY2UoKSxvP28uYWN0aXZhdGUoKToocy5zY3JvbGxUb3AoaS5zY3JvbGxUb3ApLnNjcm9sbExlZnQoaS5zY3JvbGxMZWZ0KSxyLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtYWN0aXZlIGNvbXBlbnNhdGUtZm9yLXNjcm9sbGJhclwiKSxyLmhhc0NsYXNzKFwiZmFuY3lib3gtaW9zZml4XCIpJiYoYT1wYXJzZUludChlLmJvZHkuc3R5bGUudG9wLDEwKSxyLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtaW9zZml4XCIpLmNzcyhcInRvcFwiLFwiXCIpLnNjcm9sbFRvcChhKi0xKSksbihcIiNmYW5jeWJveC1zdHlsZS1ub3Njcm9sbFwiKS5yZW1vdmUoKSl9LHRyaWdnZXI6ZnVuY3Rpb24odCxlKXt2YXIgbyxhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxpPXRoaXMscz1lJiZlLm9wdHM/ZTppLmN1cnJlbnQ7cmV0dXJuIHM/YS51bnNoaWZ0KHMpOnM9aSxhLnVuc2hpZnQoaSksbi5pc0Z1bmN0aW9uKHMub3B0c1t0XSkmJihvPXMub3B0c1t0XS5hcHBseShzLGEpKSxvPT09ITE/bzp2b2lkKFwiYWZ0ZXJDbG9zZVwiIT09dCYmaS4kcmVmcz9pLiRyZWZzLmNvbnRhaW5lci50cmlnZ2VyKHQrXCIuZmJcIixhKTpyLnRyaWdnZXIodCtcIi5mYlwiLGEpKX0sdXBkYXRlQ29udHJvbHM6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWUuY3VycmVudCxvPW4uaW5kZXgsYT1uLm9wdHMuY2FwdGlvbixpPWUuJHJlZnMuY29udGFpbmVyLHM9ZS4kcmVmcy5jYXB0aW9uO24uJHNsaWRlLnRyaWdnZXIoXCJyZWZyZXNoXCIpLGUuJGNhcHRpb249YSYmYS5sZW5ndGg/cy5odG1sKGEpOm51bGwsZS5pc0hpZGRlbkNvbnRyb2xzfHxlLmlzSWRsZXx8ZS5zaG93Q29udHJvbHMoKSxpLmZpbmQoXCJbZGF0YS1mYW5jeWJveC1jb3VudF1cIikuaHRtbChlLmdyb3VwLmxlbmd0aCksaS5maW5kKFwiW2RhdGEtZmFuY3lib3gtaW5kZXhdXCIpLmh0bWwobysxKSxpLmZpbmQoXCJbZGF0YS1mYW5jeWJveC1wcmV2XVwiKS5wcm9wKFwiZGlzYWJsZWRcIiwhbi5vcHRzLmxvb3AmJm88PTApLGkuZmluZChcIltkYXRhLWZhbmN5Ym94LW5leHRdXCIpLnByb3AoXCJkaXNhYmxlZFwiLCFuLm9wdHMubG9vcCYmbz49ZS5ncm91cC5sZW5ndGgtMSksXCJpbWFnZVwiPT09bi50eXBlP2kuZmluZChcIltkYXRhLWZhbmN5Ym94LWRvd25sb2FkXVwiKS5hdHRyKFwiaHJlZlwiLG4ub3B0cy5pbWFnZS5zcmN8fG4uc3JjKS5zaG93KCk6aS5maW5kKFwiW2RhdGEtZmFuY3lib3gtZG93bmxvYWRdLFtkYXRhLWZhbmN5Ym94LXpvb21dXCIpLmhpZGUoKX0saGlkZUNvbnRyb2xzOmZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbkNvbnRyb2xzPSEwLHRoaXMuJHJlZnMuY29udGFpbmVyLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtc2hvdy1pbmZvYmFyIGZhbmN5Ym94LXNob3ctdG9vbGJhciBmYW5jeWJveC1zaG93LWNhcHRpb24gZmFuY3lib3gtc2hvdy1uYXZcIil9LHNob3dDb250cm9sczpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10LmN1cnJlbnQ/dC5jdXJyZW50Lm9wdHM6dC5vcHRzLG49dC4kcmVmcy5jb250YWluZXI7dC5pc0hpZGRlbkNvbnRyb2xzPSExLHQuaWRsZVNlY29uZHNDb3VudGVyPTAsbi50b2dnbGVDbGFzcyhcImZhbmN5Ym94LXNob3ctdG9vbGJhclwiLCEoIWUudG9vbGJhcnx8IWUuYnV0dG9ucykpLnRvZ2dsZUNsYXNzKFwiZmFuY3lib3gtc2hvdy1pbmZvYmFyXCIsISEoZS5pbmZvYmFyJiZ0Lmdyb3VwLmxlbmd0aD4xKSkudG9nZ2xlQ2xhc3MoXCJmYW5jeWJveC1zaG93LW5hdlwiLCEhKGUuYXJyb3dzJiZ0Lmdyb3VwLmxlbmd0aD4xKSkudG9nZ2xlQ2xhc3MoXCJmYW5jeWJveC1pcy1tb2RhbFwiLCEhZS5tb2RhbCksdC4kY2FwdGlvbj9uLmFkZENsYXNzKFwiZmFuY3lib3gtc2hvdy1jYXB0aW9uIFwiKTpuLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtc2hvdy1jYXB0aW9uXCIpfSx0b2dnbGVDb250cm9sczpmdW5jdGlvbigpe3RoaXMuaXNIaWRkZW5Db250cm9scz90aGlzLnNob3dDb250cm9scygpOnRoaXMuaGlkZUNvbnRyb2xzKCl9fSksbi5mYW5jeWJveD17dmVyc2lvbjpcIjMuMi41XCIsZGVmYXVsdHM6aSxnZXRJbnN0YW5jZTpmdW5jdGlvbih0KXt2YXIgZT1uKCcuZmFuY3lib3gtY29udGFpbmVyOm5vdChcIi5mYW5jeWJveC1pcy1jbG9zaW5nXCIpOmxhc3QnKS5kYXRhKFwiRmFuY3lCb3hcIiksbz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGUgaW5zdGFuY2VvZiBwJiYoXCJzdHJpbmdcIj09PW4udHlwZSh0KT9lW3RdLmFwcGx5KGUsbyk6XCJmdW5jdGlvblwiPT09bi50eXBlKHQpJiZ0LmFwcGx5KGUsbyksZSl9LG9wZW46ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgcCh0LGUsbil9LGNsb3NlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SW5zdGFuY2UoKTtlJiYoZS5jbG9zZSgpLHQ9PT0hMCYmdGhpcy5jbG9zZSgpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuY2xvc2UoITApLHIub2ZmKFwiY2xpY2suZmItc3RhcnRcIil9LGlzTW9iaWxlOmUuY3JlYXRlVG91Y2ghPT1vJiYvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksdXNlM2Q6ZnVuY3Rpb24oKXt2YXIgbj1lLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHQuZ2V0Q29tcHV0ZWRTdHlsZSYmdC5nZXRDb21wdXRlZFN0eWxlKG4pLmdldFByb3BlcnR5VmFsdWUoXCJ0cmFuc2Zvcm1cIikmJiEoZS5kb2N1bWVudE1vZGUmJmUuZG9jdW1lbnRNb2RlPDExKX0oKSxnZXRUcmFuc2xhdGU6ZnVuY3Rpb24odCl7dmFyIGU7aWYoIXR8fCF0Lmxlbmd0aClyZXR1cm4hMTtpZihlPXQuZXEoMCkuY3NzKFwidHJhbnNmb3JtXCIpLGUmJmUuaW5kZXhPZihcIm1hdHJpeFwiKSE9PS0xPyhlPWUuc3BsaXQoXCIoXCIpWzFdLGU9ZS5zcGxpdChcIilcIilbMF0sZT1lLnNwbGl0KFwiLFwiKSk6ZT1bXSxlLmxlbmd0aCllPWUubGVuZ3RoPjEwP1tlWzEzXSxlWzEyXSxlWzBdLGVbNV1dOltlWzVdLGVbNF0sZVswXSxlWzNdXSxlPWUubWFwKHBhcnNlRmxvYXQpO2Vsc2V7ZT1bMCwwLDEsMV07dmFyIG49L1xcLip0cmFuc2xhdGVcXCgoLiopcHgsKC4qKXB4XFwpL2ksbz1uLmV4ZWModC5lcSgwKS5hdHRyKFwic3R5bGVcIikpO28mJihlWzBdPXBhcnNlRmxvYXQob1syXSksZVsxXT1wYXJzZUZsb2F0KG9bMV0pKX1yZXR1cm57dG9wOmVbMF0sbGVmdDplWzFdLHNjYWxlWDplWzJdLHNjYWxlWTplWzNdLG9wYWNpdHk6cGFyc2VGbG9hdCh0LmNzcyhcIm9wYWNpdHlcIikpLHdpZHRoOnQud2lkdGgoKSxoZWlnaHQ6dC5oZWlnaHQoKX19LHNldFRyYW5zbGF0ZTpmdW5jdGlvbih0LGUpe3ZhciBuPVwiXCIsYT17fTtpZih0JiZlKXJldHVybiBlLmxlZnQ9PT1vJiZlLnRvcD09PW98fChuPShlLmxlZnQ9PT1vP3QucG9zaXRpb24oKS5sZWZ0OmUubGVmdCkrXCJweCwgXCIrKGUudG9wPT09bz90LnBvc2l0aW9uKCkudG9wOmUudG9wKStcInB4XCIsbj10aGlzLnVzZTNkP1widHJhbnNsYXRlM2QoXCIrbitcIiwgMHB4KVwiOlwidHJhbnNsYXRlKFwiK24rXCIpXCIpLGUuc2NhbGVYIT09byYmZS5zY2FsZVkhPT1vJiYobj0obi5sZW5ndGg/bitcIiBcIjpcIlwiKStcInNjYWxlKFwiK2Uuc2NhbGVYK1wiLCBcIitlLnNjYWxlWStcIilcIiksbi5sZW5ndGgmJihhLnRyYW5zZm9ybT1uKSxlLm9wYWNpdHkhPT1vJiYoYS5vcGFjaXR5PWUub3BhY2l0eSksZS53aWR0aCE9PW8mJihhLndpZHRoPWUud2lkdGgpLGUuaGVpZ2h0IT09byYmKGEuaGVpZ2h0PWUuaGVpZ2h0KSx0LmNzcyhhKX0sYW5pbWF0ZTpmdW5jdGlvbih0LGUsYSxpLHMpe24uaXNGdW5jdGlvbihhKSYmKGk9YSxhPW51bGwpLG4uaXNQbGFpbk9iamVjdChlKXx8dC5yZW1vdmVBdHRyKFwic3R5bGVcIiksdC5vbihkLGZ1bmN0aW9uKGEpeyghYXx8IWEub3JpZ2luYWxFdmVudHx8dC5pcyhhLm9yaWdpbmFsRXZlbnQudGFyZ2V0KSYmXCJ6LWluZGV4XCIhPWEub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUpJiYobi5mYW5jeWJveC5zdG9wKHQpLG4uaXNQbGFpbk9iamVjdChlKT9lLnNjYWxlWCE9PW8mJmUuc2NhbGVZIT09byYmKHQuY3NzKFwidHJhbnNpdGlvbi1kdXJhdGlvblwiLFwiXCIpLGUud2lkdGg9TWF0aC5yb3VuZCh0LndpZHRoKCkqZS5zY2FsZVgpLGUuaGVpZ2h0PU1hdGgucm91bmQodC5oZWlnaHQoKSplLnNjYWxlWSksZS5zY2FsZVg9MSxlLnNjYWxlWT0xLG4uZmFuY3lib3guc2V0VHJhbnNsYXRlKHQsZSkpOnMhPT0hMCYmdC5yZW1vdmVDbGFzcyhlKSxuLmlzRnVuY3Rpb24oaSkmJmkoYSkpfSksbi5pc051bWVyaWMoYSkmJnQuY3NzKFwidHJhbnNpdGlvbi1kdXJhdGlvblwiLGErXCJtc1wiKSxuLmlzUGxhaW5PYmplY3QoZSk/bi5mYW5jeWJveC5zZXRUcmFuc2xhdGUodCxlKTp0LmFkZENsYXNzKGUpLGUuc2NhbGVYJiZ0Lmhhc0NsYXNzKFwiZmFuY3lib3gtaW1hZ2Utd3JhcFwiKSYmdC5wYXJlbnQoKS5hZGRDbGFzcyhcImZhbmN5Ym94LWlzLXNjYWxpbmdcIiksdC5kYXRhKFwidGltZXJcIixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC50cmlnZ2VyKFwidHJhbnNpdGlvbmVuZFwiKX0sYSsxNikpfSxzdG9wOmZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dCh0LmRhdGEoXCJ0aW1lclwiKSksdC5vZmYoXCJ0cmFuc2l0aW9uZW5kXCIpLmNzcyhcInRyYW5zaXRpb24tZHVyYXRpb25cIixcIlwiKSx0Lmhhc0NsYXNzKFwiZmFuY3lib3gtaW1hZ2Utd3JhcFwiKSYmdC5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LWlzLXNjYWxpbmdcIil9fSxuLmZuLmZhbmN5Ym94PWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiB0PXR8fHt9LGU9dC5zZWxlY3Rvcnx8ITEsZT9uKFwiYm9keVwiKS5vZmYoXCJjbGljay5mYi1zdGFydFwiLGUpLm9uKFwiY2xpY2suZmItc3RhcnRcIixlLHtvcHRpb25zOnR9LGEpOnRoaXMub2ZmKFwiY2xpY2suZmItc3RhcnRcIikub24oXCJjbGljay5mYi1zdGFydFwiLHtpdGVtczp0aGlzLG9wdGlvbnM6dH0sYSksdGhpc30sci5vbihcImNsaWNrLmZiLXN0YXJ0XCIsXCJbZGF0YS1mYW5jeWJveF1cIixhKX19KHdpbmRvdyxkb2N1bWVudCx3aW5kb3cualF1ZXJ5fHxqUXVlcnkpLGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ZhciBlPWZ1bmN0aW9uKGUsbixvKXtpZihlKXJldHVybiBvPW98fFwiXCIsXCJvYmplY3RcIj09PXQudHlwZShvKSYmKG89dC5wYXJhbShvLCEwKSksdC5lYWNoKG4sZnVuY3Rpb24odCxuKXtlPWUucmVwbGFjZShcIiRcIit0LG58fFwiXCIpfSksby5sZW5ndGgmJihlKz0oZS5pbmRleE9mKFwiP1wiKT4wP1wiJlwiOlwiP1wiKStvKSxlfSxuPXt5b3V0dWJlOnttYXRjaGVyOi8oeW91dHViZVxcLmNvbXx5b3V0dVxcLmJlfHlvdXR1YmVcXC1ub2Nvb2tpZVxcLmNvbSlcXC8od2F0Y2hcXD8oLiomKT92PXx2XFwvfHVcXC98ZW1iZWRcXC8/KT8odmlkZW9zZXJpZXNcXD9saXN0PSguKil8W1xcdy1dezExfXxcXD9saXN0VHlwZT0oLiopJmxpc3Q9KC4qKSkoLiopL2kscGFyYW1zOnthdXRvcGxheToxLGF1dG9oaWRlOjEsZnM6MSxyZWw6MCxoZDoxLHdtb2RlOlwidHJhbnNwYXJlbnRcIixlbmFibGVqc2FwaToxLGh0bWw1OjF9LHBhcmFtUGxhY2U6OCx0eXBlOlwiaWZyYW1lXCIsdXJsOlwiLy93d3cueW91dHViZS5jb20vZW1iZWQvJDRcIix0aHVtYjpcIi8vaW1nLnlvdXR1YmUuY29tL3ZpLyQ0L2hxZGVmYXVsdC5qcGdcIn0sdmltZW86e21hdGNoZXI6L14uK3ZpbWVvLmNvbVxcLyguKlxcLyk/KFtcXGRdKykoLiopPy8scGFyYW1zOnthdXRvcGxheToxLGhkOjEsc2hvd190aXRsZToxLHNob3dfYnlsaW5lOjEsc2hvd19wb3J0cmFpdDowLGZ1bGxzY3JlZW46MSxhcGk6MX0scGFyYW1QbGFjZTozLHR5cGU6XCJpZnJhbWVcIix1cmw6XCIvL3BsYXllci52aW1lby5jb20vdmlkZW8vJDJcIn0sbWV0YWNhZmU6e21hdGNoZXI6L21ldGFjYWZlLmNvbVxcL3dhdGNoXFwvKFxcZCspXFwvKC4qKT8vLHR5cGU6XCJpZnJhbWVcIix1cmw6XCIvL3d3dy5tZXRhY2FmZS5jb20vZW1iZWQvJDEvP2FwPTFcIn0sZGFpbHltb3Rpb246e21hdGNoZXI6L2RhaWx5bW90aW9uLmNvbVxcL3ZpZGVvXFwvKC4qKVxcLz8oLiopLyxwYXJhbXM6e2FkZGl0aW9uYWxJbmZvczowLGF1dG9TdGFydDoxfSx0eXBlOlwiaWZyYW1lXCIsdXJsOlwiLy93d3cuZGFpbHltb3Rpb24uY29tL2VtYmVkL3ZpZGVvLyQxXCJ9LHZpbmU6e21hdGNoZXI6L3ZpbmUuY29cXC92XFwvKFthLXpBLVowLTlcXD9cXD1cXC1dKykvLHR5cGU6XCJpZnJhbWVcIix1cmw6XCIvL3ZpbmUuY28vdi8kMS9lbWJlZC9zaW1wbGVcIn0saW5zdGFncmFtOnttYXRjaGVyOi8oaW5zdGFnclxcLmFtfGluc3RhZ3JhbVxcLmNvbSlcXC9wXFwvKFthLXpBLVowLTlfXFwtXSspXFwvPy9pLHR5cGU6XCJpbWFnZVwiLHVybDpcIi8vJDEvcC8kMi9tZWRpYS8/c2l6ZT1sXCJcclxufSxnbWFwX3BsYWNlOnttYXRjaGVyOi8obWFwc1xcLik/Z29vZ2xlXFwuKFthLXpdezIsM30oXFwuW2Etel17Mn0pPylcXC8oKChtYXBzXFwvKHBsYWNlXFwvKC4qKVxcLyk/XFxAKC4qKSwoXFxkKy4/XFxkKz8peikpfChcXD9sbD0pKSguKik/L2ksdHlwZTpcImlmcmFtZVwiLHVybDpmdW5jdGlvbih0KXtyZXR1cm5cIi8vbWFwcy5nb29nbGUuXCIrdFsyXStcIi8/bGw9XCIrKHRbOV0/dFs5XStcIiZ6PVwiK01hdGguZmxvb3IodFsxMF0pKyh0WzEyXT90WzEyXS5yZXBsYWNlKC9eXFwvLyxcIiZcIik6XCJcIik6dFsxMl0pK1wiJm91dHB1dD1cIisodFsxMl0mJnRbMTJdLmluZGV4T2YoXCJsYXllcj1jXCIpPjA/XCJzdmVtYmVkXCI6XCJlbWJlZFwiKX19LGdtYXBfc2VhcmNoOnttYXRjaGVyOi8obWFwc1xcLik/Z29vZ2xlXFwuKFthLXpdezIsM30oXFwuW2Etel17Mn0pPylcXC8obWFwc1xcL3NlYXJjaFxcLykoLiopL2ksdHlwZTpcImlmcmFtZVwiLHVybDpmdW5jdGlvbih0KXtyZXR1cm5cIi8vbWFwcy5nb29nbGUuXCIrdFsyXStcIi9tYXBzP3E9XCIrdFs1XS5yZXBsYWNlKFwicXVlcnk9XCIsXCJxPVwiKS5yZXBsYWNlKFwiYXBpPTFcIixcIlwiKStcIiZvdXRwdXQ9ZW1iZWRcIn19fTt0KGRvY3VtZW50KS5vbihcIm9iamVjdE5lZWRzVHlwZS5mYlwiLGZ1bmN0aW9uKG8sYSxpKXt2YXIgcyxyLGMsbCx1LGQsZixwPWkuc3JjfHxcIlwiLGg9ITE7cz10LmV4dGVuZCghMCx7fSxuLGkub3B0cy5tZWRpYSksdC5lYWNoKHMsZnVuY3Rpb24obixvKXtpZihjPXAubWF0Y2goby5tYXRjaGVyKSl7aWYoaD1vLnR5cGUsZD17fSxvLnBhcmFtUGxhY2UmJmNbby5wYXJhbVBsYWNlXSl7dT1jW28ucGFyYW1QbGFjZV0sXCI/XCI9PXVbMF0mJih1PXUuc3Vic3RyaW5nKDEpKSx1PXUuc3BsaXQoXCImXCIpO2Zvcih2YXIgYT0wO2E8dS5sZW5ndGg7KythKXt2YXIgcz11W2FdLnNwbGl0KFwiPVwiLDIpOzI9PXMubGVuZ3RoJiYoZFtzWzBdXT1kZWNvZGVVUklDb21wb25lbnQoc1sxXS5yZXBsYWNlKC9cXCsvZyxcIiBcIikpKX19cmV0dXJuIGw9dC5leHRlbmQoITAse30sby5wYXJhbXMsaS5vcHRzW25dLGQpLHA9XCJmdW5jdGlvblwiPT09dC50eXBlKG8udXJsKT9vLnVybC5jYWxsKHRoaXMsYyxsLGkpOmUoby51cmwsYyxsKSxyPVwiZnVuY3Rpb25cIj09PXQudHlwZShvLnRodW1iKT9vLnRodW1iLmNhbGwodGhpcyxjLGwsaSk6ZShvLnRodW1iLGMpLFwidmltZW9cIj09PW4mJihwPXAucmVwbGFjZShcIiYlMjNcIixcIiNcIikpLCExfX0pLGg/KGkuc3JjPXAsaS50eXBlPWgsaS5vcHRzLnRodW1ifHxpLm9wdHMuJHRodW1iJiZpLm9wdHMuJHRodW1iLmxlbmd0aHx8KGkub3B0cy50aHVtYj1yKSxcImlmcmFtZVwiPT09aCYmKHQuZXh0ZW5kKCEwLGkub3B0cyx7aWZyYW1lOntwcmVsb2FkOiExLGF0dHI6e3Njcm9sbGluZzpcIm5vXCJ9fX0pLGkuY29udGVudFByb3ZpZGVyPWYsaS5vcHRzLnNsaWRlQ2xhc3MrPVwiIGZhbmN5Ym94LXNsaWRlLS1cIisoXCJnbWFwX3BsYWNlXCI9PWZ8fFwiZ21hcF9zZWFyY2hcIj09Zj9cIm1hcFwiOlwidmlkZW9cIikpKTpwJiYoaS50eXBlPWkub3B0cy5kZWZhdWx0VHlwZSl9KX0od2luZG93LmpRdWVyeXx8alF1ZXJ5KSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG89ZnVuY3Rpb24oKXtyZXR1cm4gdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihlKXtyZXR1cm4gdC5zZXRUaW1lb3V0KGUsMWUzLzYwKX19KCksYT1mdW5jdGlvbigpe3JldHVybiB0LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHx0LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHx0Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHx0Lm9DYW5jZWxBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oZSl7dC5jbGVhclRpbWVvdXQoZSl9fSgpLGk9ZnVuY3Rpb24oZSl7dmFyIG49W107ZT1lLm9yaWdpbmFsRXZlbnR8fGV8fHQuZSxlPWUudG91Y2hlcyYmZS50b3VjaGVzLmxlbmd0aD9lLnRvdWNoZXM6ZS5jaGFuZ2VkVG91Y2hlcyYmZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/ZS5jaGFuZ2VkVG91Y2hlczpbZV07Zm9yKHZhciBvIGluIGUpZVtvXS5wYWdlWD9uLnB1c2goe3g6ZVtvXS5wYWdlWCx5OmVbb10ucGFnZVl9KTplW29dLmNsaWVudFgmJm4ucHVzaCh7eDplW29dLmNsaWVudFgseTplW29dLmNsaWVudFl9KTtyZXR1cm4gbn0scz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGUmJnQ/XCJ4XCI9PT1uP3QueC1lLng6XCJ5XCI9PT1uP3QueS1lLnk6TWF0aC5zcXJ0KE1hdGgucG93KHQueC1lLngsMikrTWF0aC5wb3codC55LWUueSwyKSk6MH0scj1mdW5jdGlvbih0KXtpZih0LmlzKCdhLGFyZWEsYnV0dG9uLFtyb2xlPVwiYnV0dG9uXCJdLGlucHV0LGxhYmVsLHNlbGVjdCxzdW1tYXJ5LHRleHRhcmVhJyl8fG4uaXNGdW5jdGlvbih0LmdldCgwKS5vbmNsaWNrKXx8dC5kYXRhKFwic2VsZWN0YWJsZVwiKSlyZXR1cm4hMDtmb3IodmFyIGU9MCxvPXRbMF0uYXR0cmlidXRlcyxhPW8ubGVuZ3RoO2U8YTtlKyspaWYoXCJkYXRhLWZhbmN5Ym94LVwiPT09b1tlXS5ub2RlTmFtZS5zdWJzdHIoMCwxNCkpcmV0dXJuITA7cmV0dXJuITF9LGM9ZnVuY3Rpb24oZSl7dmFyIG49dC5nZXRDb21wdXRlZFN0eWxlKGUpW1wib3ZlcmZsb3cteVwiXSxvPXQuZ2V0Q29tcHV0ZWRTdHlsZShlKVtcIm92ZXJmbG93LXhcIl0sYT0oXCJzY3JvbGxcIj09PW58fFwiYXV0b1wiPT09bikmJmUuc2Nyb2xsSGVpZ2h0PmUuY2xpZW50SGVpZ2h0LGk9KFwic2Nyb2xsXCI9PT1vfHxcImF1dG9cIj09PW8pJiZlLnNjcm9sbFdpZHRoPmUuY2xpZW50V2lkdGg7cmV0dXJuIGF8fGl9LGw9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPSExOzspe2lmKGU9Yyh0LmdldCgwKSkpYnJlYWs7aWYodD10LnBhcmVudCgpLCF0Lmxlbmd0aHx8dC5oYXNDbGFzcyhcImZhbmN5Ym94LXN0YWdlXCIpfHx0LmlzKFwiYm9keVwiKSlicmVha31yZXR1cm4gZX0sdT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2UuaW5zdGFuY2U9dCxlLiRiZz10LiRyZWZzLmJnLGUuJHN0YWdlPXQuJHJlZnMuc3RhZ2UsZS4kY29udGFpbmVyPXQuJHJlZnMuY29udGFpbmVyLGUuZGVzdHJveSgpLGUuJGNvbnRhaW5lci5vbihcInRvdWNoc3RhcnQuZmIudG91Y2ggbW91c2Vkb3duLmZiLnRvdWNoXCIsbi5wcm94eShlLFwib250b3VjaHN0YXJ0XCIpKX07dS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuJGNvbnRhaW5lci5vZmYoXCIuZmIudG91Y2hcIil9LHUucHJvdG90eXBlLm9udG91Y2hzdGFydD1mdW5jdGlvbihvKXt2YXIgYT10aGlzLGM9bihvLnRhcmdldCksdT1hLmluc3RhbmNlLGQ9dS5jdXJyZW50LGY9ZC4kY29udGVudCxwPVwidG91Y2hzdGFydFwiPT1vLnR5cGU7aWYocCYmYS4kY29udGFpbmVyLm9mZihcIm1vdXNlZG93bi5mYi50b3VjaFwiKSwhZHx8YS5pbnN0YW5jZS5pc0FuaW1hdGluZ3x8YS5pbnN0YW5jZS5pc0Nsb3NpbmcpcmV0dXJuIG8uc3RvcFByb3BhZ2F0aW9uKCksdm9pZCBvLnByZXZlbnREZWZhdWx0KCk7aWYoKCFvLm9yaWdpbmFsRXZlbnR8fDIhPW8ub3JpZ2luYWxFdmVudC5idXR0b24pJiZjLmxlbmd0aCYmIXIoYykmJiFyKGMucGFyZW50KCkpJiYhKG8ub3JpZ2luYWxFdmVudC5jbGllbnRYPmNbMF0uY2xpZW50V2lkdGgrYy5vZmZzZXQoKS5sZWZ0KSYmKGEuc3RhcnRQb2ludHM9aShvKSxhLnN0YXJ0UG9pbnRzJiYhKGEuc3RhcnRQb2ludHMubGVuZ3RoPjEmJnUuaXNTbGlkaW5nKSkpe2lmKGEuJHRhcmdldD1jLGEuJGNvbnRlbnQ9ZixhLmNhblRhcD0hMCxhLm9wdHM9ZC5vcHRzLnRvdWNoLG4oZSkub2ZmKFwiLmZiLnRvdWNoXCIpLG4oZSkub24ocD9cInRvdWNoZW5kLmZiLnRvdWNoIHRvdWNoY2FuY2VsLmZiLnRvdWNoXCI6XCJtb3VzZXVwLmZiLnRvdWNoIG1vdXNlbGVhdmUuZmIudG91Y2hcIixuLnByb3h5KGEsXCJvbnRvdWNoZW5kXCIpKSxuKGUpLm9uKHA/XCJ0b3VjaG1vdmUuZmIudG91Y2hcIjpcIm1vdXNlbW92ZS5mYi50b3VjaFwiLG4ucHJveHkoYSxcIm9udG91Y2htb3ZlXCIpKSwhYS5vcHRzJiYhdS5jYW5QYW4oKXx8IWMuaXMoYS4kc3RhZ2UpJiYhYS4kc3RhZ2UuZmluZChjKS5sZW5ndGgpcmV0dXJuIHZvaWQoYy5pcyhcImltZ1wiKSYmby5wcmV2ZW50RGVmYXVsdCgpKTtvLnN0b3BQcm9wYWdhdGlvbigpLG4uZmFuY3lib3guaXNNb2JpbGUmJihsKGEuJHRhcmdldCl8fGwoYS4kdGFyZ2V0LnBhcmVudCgpKSl8fG8ucHJldmVudERlZmF1bHQoKSxhLmNhbnZhc1dpZHRoPU1hdGgucm91bmQoZC4kc2xpZGVbMF0uY2xpZW50V2lkdGgpLGEuY2FudmFzSGVpZ2h0PU1hdGgucm91bmQoZC4kc2xpZGVbMF0uY2xpZW50SGVpZ2h0KSxhLnN0YXJ0VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxhLmRpc3RhbmNlWD1hLmRpc3RhbmNlWT1hLmRpc3RhbmNlPTAsYS5pc1Bhbm5pbmc9ITEsYS5pc1N3aXBpbmc9ITEsYS5pc1pvb21pbmc9ITEsYS5zbGlkZXJTdGFydFBvcz1hLnNsaWRlckxhc3RQb3N8fHt0b3A6MCxsZWZ0OjB9LGEuY29udGVudFN0YXJ0UG9zPW4uZmFuY3lib3guZ2V0VHJhbnNsYXRlKGEuJGNvbnRlbnQpLGEuY29udGVudExhc3RQb3M9bnVsbCwxIT09YS5zdGFydFBvaW50cy5sZW5ndGh8fGEuaXNab29taW5nfHwoYS5jYW5UYXA9IXUuaXNTbGlkaW5nLFwiaW1hZ2VcIj09PWQudHlwZSYmKGEuY29udGVudFN0YXJ0UG9zLndpZHRoPmEuY2FudmFzV2lkdGgrMXx8YS5jb250ZW50U3RhcnRQb3MuaGVpZ2h0PmEuY2FudmFzSGVpZ2h0KzEpPyhuLmZhbmN5Ym94LnN0b3AoYS4kY29udGVudCksYS4kY29udGVudC5jc3MoXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIsXCIwbXNcIiksYS5pc1Bhbm5pbmc9ITApOmEuaXNTd2lwaW5nPSEwLGEuJGNvbnRhaW5lci5hZGRDbGFzcyhcImZhbmN5Ym94LWNvbnRyb2xzLS1pc0dyYWJiaW5nXCIpKSwyIT09YS5zdGFydFBvaW50cy5sZW5ndGh8fHUuaXNBbmltYXRpbmd8fGQuaGFzRXJyb3J8fFwiaW1hZ2VcIiE9PWQudHlwZXx8IWQuaXNMb2FkZWQmJiFkLiRnaG9zdHx8KGEuaXNab29taW5nPSEwLGEuaXNTd2lwaW5nPSExLGEuaXNQYW5uaW5nPSExLG4uZmFuY3lib3guc3RvcChhLiRjb250ZW50KSxhLiRjb250ZW50LmNzcyhcInRyYW5zaXRpb24tZHVyYXRpb25cIixcIjBtc1wiKSxhLmNlbnRlclBvaW50U3RhcnRYPS41KihhLnN0YXJ0UG9pbnRzWzBdLngrYS5zdGFydFBvaW50c1sxXS54KS1uKHQpLnNjcm9sbExlZnQoKSxhLmNlbnRlclBvaW50U3RhcnRZPS41KihhLnN0YXJ0UG9pbnRzWzBdLnkrYS5zdGFydFBvaW50c1sxXS55KS1uKHQpLnNjcm9sbFRvcCgpLGEucGVyY2VudGFnZU9mSW1hZ2VBdFBpbmNoUG9pbnRYPShhLmNlbnRlclBvaW50U3RhcnRYLWEuY29udGVudFN0YXJ0UG9zLmxlZnQpL2EuY29udGVudFN0YXJ0UG9zLndpZHRoLGEucGVyY2VudGFnZU9mSW1hZ2VBdFBpbmNoUG9pbnRZPShhLmNlbnRlclBvaW50U3RhcnRZLWEuY29udGVudFN0YXJ0UG9zLnRvcCkvYS5jb250ZW50U3RhcnRQb3MuaGVpZ2h0LGEuc3RhcnREaXN0YW5jZUJldHdlZW5GaW5nZXJzPXMoYS5zdGFydFBvaW50c1swXSxhLnN0YXJ0UG9pbnRzWzFdKSl9fSx1LnByb3RvdHlwZS5vbnRvdWNobW92ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKGUubmV3UG9pbnRzPWkodCksbi5mYW5jeWJveC5pc01vYmlsZSYmKGwoZS4kdGFyZ2V0KXx8bChlLiR0YXJnZXQucGFyZW50KCkpKSlyZXR1cm4gdC5zdG9wUHJvcGFnYXRpb24oKSx2b2lkKGUuY2FuVGFwPSExKTtpZigoZS5vcHRzfHxlLmluc3RhbmNlLmNhblBhbigpKSYmZS5uZXdQb2ludHMmJmUubmV3UG9pbnRzLmxlbmd0aCYmKGUuZGlzdGFuY2VYPXMoZS5uZXdQb2ludHNbMF0sZS5zdGFydFBvaW50c1swXSxcInhcIiksZS5kaXN0YW5jZVk9cyhlLm5ld1BvaW50c1swXSxlLnN0YXJ0UG9pbnRzWzBdLFwieVwiKSxlLmRpc3RhbmNlPXMoZS5uZXdQb2ludHNbMF0sZS5zdGFydFBvaW50c1swXSksZS5kaXN0YW5jZT4wKSl7aWYoIWUuJHRhcmdldC5pcyhlLiRzdGFnZSkmJiFlLiRzdGFnZS5maW5kKGUuJHRhcmdldCkubGVuZ3RoKXJldHVybjt0LnN0b3BQcm9wYWdhdGlvbigpLHQucHJldmVudERlZmF1bHQoKSxlLmlzU3dpcGluZz9lLm9uU3dpcGUoKTplLmlzUGFubmluZz9lLm9uUGFuKCk6ZS5pc1pvb21pbmcmJmUub25ab29tKCl9fSx1LnByb3RvdHlwZS5vblN3aXBlPWZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLHM9aS5pc1N3aXBpbmcscj1pLnNsaWRlclN0YXJ0UG9zLmxlZnR8fDA7cz09PSEwP01hdGguYWJzKGkuZGlzdGFuY2UpPjEwJiYoaS5jYW5UYXA9ITEsaS5pbnN0YW5jZS5ncm91cC5sZW5ndGg8MiYmaS5vcHRzLnZlcnRpY2FsP2kuaXNTd2lwaW5nPVwieVwiOmkuaW5zdGFuY2UuaXNTbGlkaW5nfHxpLm9wdHMudmVydGljYWw9PT0hMXx8XCJhdXRvXCI9PT1pLm9wdHMudmVydGljYWwmJm4odCkud2lkdGgoKT44MDA/aS5pc1N3aXBpbmc9XCJ4XCI6KGU9TWF0aC5hYnMoMTgwKk1hdGguYXRhbjIoaS5kaXN0YW5jZVksaS5kaXN0YW5jZVgpL01hdGguUEkpLGkuaXNTd2lwaW5nPWU+NDUmJmU8MTM1P1wieVwiOlwieFwiKSxpLmluc3RhbmNlLmlzU2xpZGluZz1pLmlzU3dpcGluZyxpLnN0YXJ0UG9pbnRzPWkubmV3UG9pbnRzLG4uZWFjaChpLmluc3RhbmNlLnNsaWRlcyxmdW5jdGlvbih0LGUpe24uZmFuY3lib3guc3RvcChlLiRzbGlkZSksZS4kc2xpZGUuY3NzKFwidHJhbnNpdGlvbi1kdXJhdGlvblwiLFwiMG1zXCIpLGUuaW5UcmFuc2l0aW9uPSExLGUucG9zPT09aS5pbnN0YW5jZS5jdXJyZW50LnBvcyYmKGkuc2xpZGVyU3RhcnRQb3MubGVmdD1uLmZhbmN5Ym94LmdldFRyYW5zbGF0ZShlLiRzbGlkZSkubGVmdCl9KSxpLmluc3RhbmNlLlNsaWRlU2hvdyYmaS5pbnN0YW5jZS5TbGlkZVNob3cuaXNBY3RpdmUmJmkuaW5zdGFuY2UuU2xpZGVTaG93LnN0b3AoKSk6KFwieFwiPT1zJiYoaS5kaXN0YW5jZVg+MCYmKGkuaW5zdGFuY2UuZ3JvdXAubGVuZ3RoPDJ8fDA9PT1pLmluc3RhbmNlLmN1cnJlbnQuaW5kZXgmJiFpLmluc3RhbmNlLmN1cnJlbnQub3B0cy5sb29wKT9yKz1NYXRoLnBvdyhpLmRpc3RhbmNlWCwuOCk6aS5kaXN0YW5jZVg8MCYmKGkuaW5zdGFuY2UuZ3JvdXAubGVuZ3RoPDJ8fGkuaW5zdGFuY2UuY3VycmVudC5pbmRleD09PWkuaW5zdGFuY2UuZ3JvdXAubGVuZ3RoLTEmJiFpLmluc3RhbmNlLmN1cnJlbnQub3B0cy5sb29wKT9yLT1NYXRoLnBvdygtaS5kaXN0YW5jZVgsLjgpOnIrPWkuZGlzdGFuY2VYKSxpLnNsaWRlckxhc3RQb3M9e3RvcDpcInhcIj09cz8wOmkuc2xpZGVyU3RhcnRQb3MudG9wK2kuZGlzdGFuY2VZLGxlZnQ6cn0saS5yZXF1ZXN0SWQmJihhKGkucmVxdWVzdElkKSxpLnJlcXVlc3RJZD1udWxsKSxpLnJlcXVlc3RJZD1vKGZ1bmN0aW9uKCl7aS5zbGlkZXJMYXN0UG9zJiYobi5lYWNoKGkuaW5zdGFuY2Uuc2xpZGVzLGZ1bmN0aW9uKHQsZSl7dmFyIG89ZS5wb3MtaS5pbnN0YW5jZS5jdXJyUG9zO24uZmFuY3lib3guc2V0VHJhbnNsYXRlKGUuJHNsaWRlLHt0b3A6aS5zbGlkZXJMYXN0UG9zLnRvcCxsZWZ0Omkuc2xpZGVyTGFzdFBvcy5sZWZ0K28qaS5jYW52YXNXaWR0aCtvKmUub3B0cy5ndXR0ZXJ9KX0pLGkuJGNvbnRhaW5lci5hZGRDbGFzcyhcImZhbmN5Ym94LWlzLXNsaWRpbmdcIikpfSkpfSx1LnByb3RvdHlwZS5vblBhbj1mdW5jdGlvbigpe3ZhciB0LGUsaSxzPXRoaXM7cy5jYW5UYXA9ITEsdD1zLmNvbnRlbnRTdGFydFBvcy53aWR0aD5zLmNhbnZhc1dpZHRoP3MuY29udGVudFN0YXJ0UG9zLmxlZnQrcy5kaXN0YW5jZVg6cy5jb250ZW50U3RhcnRQb3MubGVmdCxlPXMuY29udGVudFN0YXJ0UG9zLnRvcCtzLmRpc3RhbmNlWSxpPXMubGltaXRNb3ZlbWVudCh0LGUscy5jb250ZW50U3RhcnRQb3Mud2lkdGgscy5jb250ZW50U3RhcnRQb3MuaGVpZ2h0KSxpLnNjYWxlWD1zLmNvbnRlbnRTdGFydFBvcy5zY2FsZVgsaS5zY2FsZVk9cy5jb250ZW50U3RhcnRQb3Muc2NhbGVZLHMuY29udGVudExhc3RQb3M9aSxzLnJlcXVlc3RJZCYmKGEocy5yZXF1ZXN0SWQpLHMucmVxdWVzdElkPW51bGwpLHMucmVxdWVzdElkPW8oZnVuY3Rpb24oKXtuLmZhbmN5Ym94LnNldFRyYW5zbGF0ZShzLiRjb250ZW50LHMuY29udGVudExhc3RQb3MpfSl9LHUucHJvdG90eXBlLmxpbWl0TW92ZW1lbnQ9ZnVuY3Rpb24odCxlLG4sbyl7dmFyIGEsaSxzLHIsYz10aGlzLGw9Yy5jYW52YXNXaWR0aCx1PWMuY2FudmFzSGVpZ2h0LGQ9Yy5jb250ZW50U3RhcnRQb3MubGVmdCxmPWMuY29udGVudFN0YXJ0UG9zLnRvcCxwPWMuZGlzdGFuY2VYLGg9Yy5kaXN0YW5jZVk7cmV0dXJuIGE9TWF0aC5tYXgoMCwuNSpsLS41Km4pLGk9TWF0aC5tYXgoMCwuNSp1LS41Km8pLHM9TWF0aC5taW4obC1uLC41KmwtLjUqbikscj1NYXRoLm1pbih1LW8sLjUqdS0uNSpvKSxuPmwmJihwPjAmJnQ+YSYmKHQ9YS0xK01hdGgucG93KC1hK2QrcCwuOCl8fDApLHA8MCYmdDxzJiYodD1zKzEtTWF0aC5wb3cocy1kLXAsLjgpfHwwKSksbz51JiYoaD4wJiZlPmkmJihlPWktMStNYXRoLnBvdygtaStmK2gsLjgpfHwwKSxoPDAmJmU8ciYmKGU9cisxLU1hdGgucG93KHItZi1oLC44KXx8MCkpLHt0b3A6ZSxsZWZ0OnR9fSx1LnByb3RvdHlwZS5saW1pdFBvc2l0aW9uPWZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBhPXRoaXMsaT1hLmNhbnZhc1dpZHRoLHM9YS5jYW52YXNIZWlnaHQ7cmV0dXJuIG4+aT8odD10PjA/MDp0LHQ9dDxpLW4/aS1uOnQpOnQ9TWF0aC5tYXgoMCxpLzItbi8yKSxvPnM/KGU9ZT4wPzA6ZSxlPWU8cy1vP3MtbzplKTplPU1hdGgubWF4KDAscy8yLW8vMikse3RvcDplLGxlZnQ6dH19LHUucHJvdG90eXBlLm9uWm9vbT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsaT1lLmNvbnRlbnRTdGFydFBvcy53aWR0aCxyPWUuY29udGVudFN0YXJ0UG9zLmhlaWdodCxjPWUuY29udGVudFN0YXJ0UG9zLmxlZnQsbD1lLmNvbnRlbnRTdGFydFBvcy50b3AsdT1zKGUubmV3UG9pbnRzWzBdLGUubmV3UG9pbnRzWzFdKSxkPXUvZS5zdGFydERpc3RhbmNlQmV0d2VlbkZpbmdlcnMsZj1NYXRoLmZsb29yKGkqZCkscD1NYXRoLmZsb29yKHIqZCksaD0oaS1mKSplLnBlcmNlbnRhZ2VPZkltYWdlQXRQaW5jaFBvaW50WCxnPShyLXApKmUucGVyY2VudGFnZU9mSW1hZ2VBdFBpbmNoUG9pbnRZLGI9KGUubmV3UG9pbnRzWzBdLngrZS5uZXdQb2ludHNbMV0ueCkvMi1uKHQpLnNjcm9sbExlZnQoKSxtPShlLm5ld1BvaW50c1swXS55K2UubmV3UG9pbnRzWzFdLnkpLzItbih0KS5zY3JvbGxUb3AoKSx5PWItZS5jZW50ZXJQb2ludFN0YXJ0WCx2PW0tZS5jZW50ZXJQb2ludFN0YXJ0WSx4PWMrKGgreSksdz1sKyhnK3YpLCQ9e3RvcDp3LGxlZnQ6eCxzY2FsZVg6ZS5jb250ZW50U3RhcnRQb3Muc2NhbGVYKmQsc2NhbGVZOmUuY29udGVudFN0YXJ0UG9zLnNjYWxlWSpkfTtlLmNhblRhcD0hMSxlLm5ld1dpZHRoPWYsZS5uZXdIZWlnaHQ9cCxlLmNvbnRlbnRMYXN0UG9zPSQsZS5yZXF1ZXN0SWQmJihhKGUucmVxdWVzdElkKSxlLnJlcXVlc3RJZD1udWxsKSxlLnJlcXVlc3RJZD1vKGZ1bmN0aW9uKCl7bi5mYW5jeWJveC5zZXRUcmFuc2xhdGUoZS4kY29udGVudCxlLmNvbnRlbnRMYXN0UG9zKX0pfSx1LnByb3RvdHlwZS5vbnRvdWNoZW5kPWZ1bmN0aW9uKHQpe3ZhciBvPXRoaXMscz1NYXRoLm1heCgobmV3IERhdGUpLmdldFRpbWUoKS1vLnN0YXJ0VGltZSwxKSxyPW8uaXNTd2lwaW5nLGM9by5pc1Bhbm5pbmcsbD1vLmlzWm9vbWluZztyZXR1cm4gby5lbmRQb2ludHM9aSh0KSxvLiRjb250YWluZXIucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC1jb250cm9scy0taXNHcmFiYmluZ1wiKSxuKGUpLm9mZihcIi5mYi50b3VjaFwiKSxvLnJlcXVlc3RJZCYmKGEoby5yZXF1ZXN0SWQpLG8ucmVxdWVzdElkPW51bGwpLG8uaXNTd2lwaW5nPSExLG8uaXNQYW5uaW5nPSExLG8uaXNab29taW5nPSExLG8uY2FuVGFwP28ub25UYXAodCk6KG8uc3BlZWQ9MzY2LG8udmVsb2NpdHlYPW8uZGlzdGFuY2VYL3MqLjUsby52ZWxvY2l0eVk9by5kaXN0YW5jZVkvcyouNSxvLnNwZWVkWD1NYXRoLm1heCguNSpvLnNwZWVkLE1hdGgubWluKDEuNSpvLnNwZWVkLDEvTWF0aC5hYnMoby52ZWxvY2l0eVgpKm8uc3BlZWQpKSx2b2lkKGM/by5lbmRQYW5uaW5nKCk6bD9vLmVuZFpvb21pbmcoKTpvLmVuZFN3aXBpbmcocikpKX0sdS5wcm90b3R5cGUuZW5kU3dpcGluZz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG89ITE7ZS5pbnN0YW5jZS5pc1NsaWRpbmc9ITEsZS5zbGlkZXJMYXN0UG9zPW51bGwsXCJ5XCI9PXQmJk1hdGguYWJzKGUuZGlzdGFuY2VZKT41MD8obi5mYW5jeWJveC5hbmltYXRlKGUuaW5zdGFuY2UuY3VycmVudC4kc2xpZGUse3RvcDplLnNsaWRlclN0YXJ0UG9zLnRvcCtlLmRpc3RhbmNlWSsxNTAqZS52ZWxvY2l0eVksb3BhY2l0eTowfSwxNTApLG89ZS5pbnN0YW5jZS5jbG9zZSghMCwzMDApKTpcInhcIj09dCYmZS5kaXN0YW5jZVg+NTAmJmUuaW5zdGFuY2UuZ3JvdXAubGVuZ3RoPjE/bz1lLmluc3RhbmNlLnByZXZpb3VzKGUuc3BlZWRYKTpcInhcIj09dCYmZS5kaXN0YW5jZVg8LTUwJiZlLmluc3RhbmNlLmdyb3VwLmxlbmd0aD4xJiYobz1lLmluc3RhbmNlLm5leHQoZS5zcGVlZFgpKSxvIT09ITF8fFwieFwiIT10JiZcInlcIiE9dHx8ZS5pbnN0YW5jZS5qdW1wVG8oZS5pbnN0YW5jZS5jdXJyZW50LmluZGV4LDE1MCksZS4kY29udGFpbmVyLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtaXMtc2xpZGluZ1wiKX0sdS5wcm90b3R5cGUuZW5kUGFubmluZz1mdW5jdGlvbigpe3ZhciB0LGUsbyxhPXRoaXM7YS5jb250ZW50TGFzdFBvcyYmKGEub3B0cy5tb21lbnR1bT09PSExPyh0PWEuY29udGVudExhc3RQb3MubGVmdCxlPWEuY29udGVudExhc3RQb3MudG9wKToodD1hLmNvbnRlbnRMYXN0UG9zLmxlZnQrYS52ZWxvY2l0eVgqYS5zcGVlZCxlPWEuY29udGVudExhc3RQb3MudG9wK2EudmVsb2NpdHlZKmEuc3BlZWQpLG89YS5saW1pdFBvc2l0aW9uKHQsZSxhLmNvbnRlbnRTdGFydFBvcy53aWR0aCxhLmNvbnRlbnRTdGFydFBvcy5oZWlnaHQpLG8ud2lkdGg9YS5jb250ZW50U3RhcnRQb3Mud2lkdGgsby5oZWlnaHQ9YS5jb250ZW50U3RhcnRQb3MuaGVpZ2h0LG4uZmFuY3lib3guYW5pbWF0ZShhLiRjb250ZW50LG8sMzMwKSl9LHUucHJvdG90eXBlLmVuZFpvb21pbmc9ZnVuY3Rpb24oKXt2YXIgdCxlLG8sYSxpPXRoaXMscz1pLmluc3RhbmNlLmN1cnJlbnQscj1pLm5ld1dpZHRoLGM9aS5uZXdIZWlnaHQ7aS5jb250ZW50TGFzdFBvcyYmKHQ9aS5jb250ZW50TGFzdFBvcy5sZWZ0LGU9aS5jb250ZW50TGFzdFBvcy50b3AsYT17dG9wOmUsbGVmdDp0LHdpZHRoOnIsaGVpZ2h0OmMsc2NhbGVYOjEsc2NhbGVZOjF9LG4uZmFuY3lib3guc2V0VHJhbnNsYXRlKGkuJGNvbnRlbnQsYSkscjxpLmNhbnZhc1dpZHRoJiZjPGkuY2FudmFzSGVpZ2h0P2kuaW5zdGFuY2Uuc2NhbGVUb0ZpdCgxNTApOnI+cy53aWR0aHx8Yz5zLmhlaWdodD9pLmluc3RhbmNlLnNjYWxlVG9BY3R1YWwoaS5jZW50ZXJQb2ludFN0YXJ0WCxpLmNlbnRlclBvaW50U3RhcnRZLDE1MCk6KG89aS5saW1pdFBvc2l0aW9uKHQsZSxyLGMpLG4uZmFuY3lib3guc2V0VHJhbnNsYXRlKGkuY29udGVudCxuLmZhbmN5Ym94LmdldFRyYW5zbGF0ZShpLiRjb250ZW50KSksbi5mYW5jeWJveC5hbmltYXRlKGkuJGNvbnRlbnQsbywxNTApKSl9LHUucHJvdG90eXBlLm9uVGFwPWZ1bmN0aW9uKHQpe3ZhciBlLG89dGhpcyxhPW4odC50YXJnZXQpLHM9by5pbnN0YW5jZSxyPXMuY3VycmVudCxjPXQmJmkodCl8fG8uc3RhcnRQb2ludHMsbD1jWzBdP2NbMF0ueC1vLiRzdGFnZS5vZmZzZXQoKS5sZWZ0OjAsdT1jWzBdP2NbMF0ueS1vLiRzdGFnZS5vZmZzZXQoKS50b3A6MCxkPWZ1bmN0aW9uKGUpe3ZhciBhPXIub3B0c1tlXTtpZihuLmlzRnVuY3Rpb24oYSkmJihhPWEuYXBwbHkocyxbcix0XSkpLGEpc3dpdGNoKGEpe2Nhc2VcImNsb3NlXCI6cy5jbG9zZShvLnN0YXJ0RXZlbnQpO2JyZWFrO2Nhc2VcInRvZ2dsZUNvbnRyb2xzXCI6cy50b2dnbGVDb250cm9scyghMCk7YnJlYWs7Y2FzZVwibmV4dFwiOnMubmV4dCgpO2JyZWFrO2Nhc2VcIm5leHRPckNsb3NlXCI6cy5ncm91cC5sZW5ndGg+MT9zLm5leHQoKTpzLmNsb3NlKG8uc3RhcnRFdmVudCk7YnJlYWs7Y2FzZVwiem9vbVwiOlwiaW1hZ2VcIj09ci50eXBlJiYoci5pc0xvYWRlZHx8ci4kZ2hvc3QpJiYocy5jYW5QYW4oKT9zLnNjYWxlVG9GaXQoKTpzLmlzU2NhbGVkRG93bigpP3Muc2NhbGVUb0FjdHVhbChsLHUpOnMuZ3JvdXAubGVuZ3RoPDImJnMuY2xvc2Uoby5zdGFydEV2ZW50KSl9fTtpZighKHQub3JpZ2luYWxFdmVudCYmMj09dC5vcmlnaW5hbEV2ZW50LmJ1dHRvbnx8cy5pc1NsaWRpbmd8fGw+YVswXS5jbGllbnRXaWR0aCthLm9mZnNldCgpLmxlZnQpKXtpZihhLmlzKFwiLmZhbmN5Ym94LWJnLC5mYW5jeWJveC1pbm5lciwuZmFuY3lib3gtb3V0ZXIsLmZhbmN5Ym94LWNvbnRhaW5lclwiKSllPVwiT3V0c2lkZVwiO2Vsc2UgaWYoYS5pcyhcIi5mYW5jeWJveC1zbGlkZVwiKSllPVwiU2xpZGVcIjtlbHNle2lmKCFzLmN1cnJlbnQuJGNvbnRlbnR8fCFzLmN1cnJlbnQuJGNvbnRlbnQuaGFzKHQudGFyZ2V0KS5sZW5ndGgpcmV0dXJuO2U9XCJDb250ZW50XCJ9aWYoby50YXBwZWQpe2lmKGNsZWFyVGltZW91dChvLnRhcHBlZCksby50YXBwZWQ9bnVsbCxNYXRoLmFicyhsLW8udGFwWCk+NTB8fE1hdGguYWJzKHUtby50YXBZKT41MHx8cy5pc1NsaWRpbmcpcmV0dXJuIHRoaXM7ZChcImRibGNsaWNrXCIrZSl9ZWxzZSBvLnRhcFg9bCxvLnRhcFk9dSxyLm9wdHNbXCJkYmxjbGlja1wiK2VdJiZyLm9wdHNbXCJkYmxjbGlja1wiK2VdIT09ci5vcHRzW1wiY2xpY2tcIitlXT9vLnRhcHBlZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by50YXBwZWQ9bnVsbCxkKFwiY2xpY2tcIitlKX0sMzAwKTpkKFwiY2xpY2tcIitlKTtyZXR1cm4gdGhpc319LG4oZSkub24oXCJvbkFjdGl2YXRlLmZiXCIsZnVuY3Rpb24odCxlKXtlJiYhZS5HdWVzdHVyZXMmJihlLkd1ZXN0dXJlcz1uZXcgdShlKSl9KSxuKGUpLm9uKFwiYmVmb3JlQ2xvc2UuZmJcIixmdW5jdGlvbih0LGUpe2UmJmUuR3Vlc3R1cmVzJiZlLkd1ZXN0dXJlcy5kZXN0cm95KCl9KX0od2luZG93LGRvY3VtZW50LHdpbmRvdy5qUXVlcnl8fGpRdWVyeSksZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtlLmV4dGVuZCghMCxlLmZhbmN5Ym94LmRlZmF1bHRzLHtidG5UcGw6e3NsaWRlU2hvdzonPGJ1dHRvbiBkYXRhLWZhbmN5Ym94LXBsYXkgY2xhc3M9XCJmYW5jeWJveC1idXR0b24gZmFuY3lib3gtYnV0dG9uLS1wbGF5XCIgdGl0bGU9XCJ7e1BMQVlfU1RBUlR9fVwiPjxzdmcgdmlld0JveD1cIjAgMCA0MCA0MFwiPjxwYXRoIGQ9XCJNMTMsMTIgTDI3LDIwIEwxMywyNyBaXCIgLz48cGF0aCBkPVwiTTE1LDEwIHYxOSBNMjMsMTAgdjE5XCIgLz48L3N2Zz48L2J1dHRvbj4nfSxzbGlkZVNob3c6e2F1dG9TdGFydDohMSxzcGVlZDozZTN9fSk7dmFyIG49ZnVuY3Rpb24odCl7dGhpcy5pbnN0YW5jZT10LHRoaXMuaW5pdCgpfTtlLmV4dGVuZChuLnByb3RvdHlwZSx7dGltZXI6bnVsbCxpc0FjdGl2ZTohMSwkYnV0dG9uOm51bGwsaW5pdDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC4kYnV0dG9uPXQuaW5zdGFuY2UuJHJlZnMudG9vbGJhci5maW5kKFwiW2RhdGEtZmFuY3lib3gtcGxheV1cIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7dC50b2dnbGUoKX0pLCh0Lmluc3RhbmNlLmdyb3VwLmxlbmd0aDwyfHwhdC5pbnN0YW5jZS5ncm91cFt0Lmluc3RhbmNlLmN1cnJJbmRleF0ub3B0cy5zbGlkZVNob3cpJiZ0LiRidXR0b24uaGlkZSgpfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztlLmluc3RhbmNlJiZlLmluc3RhbmNlLmN1cnJlbnQmJih0PT09ITB8fGUuaW5zdGFuY2UuY3VycmVudC5vcHRzLmxvb3B8fGUuaW5zdGFuY2UuY3VyckluZGV4PGUuaW5zdGFuY2UuZ3JvdXAubGVuZ3RoLTEpP2UudGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2UuaXNBY3RpdmUmJmUuaW5zdGFuY2UuanVtcFRvKChlLmluc3RhbmNlLmN1cnJJbmRleCsxKSVlLmluc3RhbmNlLmdyb3VwLmxlbmd0aCl9LGUuaW5zdGFuY2UuY3VycmVudC5vcHRzLnNsaWRlU2hvdy5zcGVlZCk6KGUuc3RvcCgpLGUuaW5zdGFuY2UuaWRsZVNlY29uZHNDb3VudGVyPTAsZS5pbnN0YW5jZS5zaG93Q29udHJvbHMoKSl9LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztjbGVhclRpbWVvdXQodC50aW1lciksdC50aW1lcj1udWxsfSxzdGFydDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10Lmluc3RhbmNlLmN1cnJlbnQ7ZSYmKHQuaXNBY3RpdmU9ITAsdC4kYnV0dG9uLmF0dHIoXCJ0aXRsZVwiLGUub3B0cy5pMThuW2Uub3B0cy5sYW5nXS5QTEFZX1NUT1ApLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtYnV0dG9uLS1wbGF5XCIpLmFkZENsYXNzKFwiZmFuY3lib3gtYnV0dG9uLS1wYXVzZVwiKSx0LnNldCghMCkpfSxzdG9wOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXQuaW5zdGFuY2UuY3VycmVudDt0LmNsZWFyKCksdC4kYnV0dG9uLmF0dHIoXCJ0aXRsZVwiLGUub3B0cy5pMThuW2Uub3B0cy5sYW5nXS5QTEFZX1NUQVJUKS5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LWJ1dHRvbi0tcGF1c2VcIikuYWRkQ2xhc3MoXCJmYW5jeWJveC1idXR0b24tLXBsYXlcIiksdC5pc0FjdGl2ZT0hMX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LmlzQWN0aXZlP3Quc3RvcCgpOnQuc3RhcnQoKX19KSxlKHQpLm9uKHtcIm9uSW5pdC5mYlwiOmZ1bmN0aW9uKHQsZSl7ZSYmIWUuU2xpZGVTaG93JiYoZS5TbGlkZVNob3c9bmV3IG4oZSkpfSxcImJlZm9yZVNob3cuZmJcIjpmdW5jdGlvbih0LGUsbixvKXt2YXIgYT1lJiZlLlNsaWRlU2hvdztvP2EmJm4ub3B0cy5zbGlkZVNob3cuYXV0b1N0YXJ0JiZhLnN0YXJ0KCk6YSYmYS5pc0FjdGl2ZSYmYS5jbGVhcigpfSxcImFmdGVyU2hvdy5mYlwiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgbz1lJiZlLlNsaWRlU2hvdztvJiZvLmlzQWN0aXZlJiZvLnNldCgpfSxcImFmdGVyS2V5ZG93bi5mYlwiOmZ1bmN0aW9uKG4sbyxhLGkscyl7dmFyIHI9byYmby5TbGlkZVNob3c7IXJ8fCFhLm9wdHMuc2xpZGVTaG93fHw4MCE9PXMmJjMyIT09c3x8ZSh0LmFjdGl2ZUVsZW1lbnQpLmlzKFwiYnV0dG9uLGEsaW5wdXRcIil8fChpLnByZXZlbnREZWZhdWx0KCksci50b2dnbGUoKSl9LFwiYmVmb3JlQ2xvc2UuZmIgb25EZWFjdGl2YXRlLmZiXCI6ZnVuY3Rpb24odCxlKXt2YXIgbj1lJiZlLlNsaWRlU2hvdztuJiZuLnN0b3AoKX19KSxlKHQpLm9uKFwidmlzaWJpbGl0eWNoYW5nZVwiLGZ1bmN0aW9uKCl7dmFyIG49ZS5mYW5jeWJveC5nZXRJbnN0YW5jZSgpLG89biYmbi5TbGlkZVNob3c7byYmby5pc0FjdGl2ZSYmKHQuaGlkZGVuP28uY2xlYXIoKTpvLnNldCgpKX0pfShkb2N1bWVudCx3aW5kb3cualF1ZXJ5fHxqUXVlcnkpLGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49ZnVuY3Rpb24oKXt2YXIgZSxuLG8sYT1bW1wicmVxdWVzdEZ1bGxzY3JlZW5cIixcImV4aXRGdWxsc2NyZWVuXCIsXCJmdWxsc2NyZWVuRWxlbWVudFwiLFwiZnVsbHNjcmVlbkVuYWJsZWRcIixcImZ1bGxzY3JlZW5jaGFuZ2VcIixcImZ1bGxzY3JlZW5lcnJvclwiXSxbXCJ3ZWJraXRSZXF1ZXN0RnVsbHNjcmVlblwiLFwid2Via2l0RXhpdEZ1bGxzY3JlZW5cIixcIndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50XCIsXCJ3ZWJraXRGdWxsc2NyZWVuRW5hYmxlZFwiLFwid2Via2l0ZnVsbHNjcmVlbmNoYW5nZVwiLFwid2Via2l0ZnVsbHNjcmVlbmVycm9yXCJdLFtcIndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuXCIsXCJ3ZWJraXRDYW5jZWxGdWxsU2NyZWVuXCIsXCJ3ZWJraXRDdXJyZW50RnVsbFNjcmVlbkVsZW1lbnRcIixcIndlYmtpdENhbmNlbEZ1bGxTY3JlZW5cIixcIndlYmtpdGZ1bGxzY3JlZW5jaGFuZ2VcIixcIndlYmtpdGZ1bGxzY3JlZW5lcnJvclwiXSxbXCJtb3pSZXF1ZXN0RnVsbFNjcmVlblwiLFwibW96Q2FuY2VsRnVsbFNjcmVlblwiLFwibW96RnVsbFNjcmVlbkVsZW1lbnRcIixcIm1vekZ1bGxTY3JlZW5FbmFibGVkXCIsXCJtb3pmdWxsc2NyZWVuY2hhbmdlXCIsXCJtb3pmdWxsc2NyZWVuZXJyb3JcIl0sW1wibXNSZXF1ZXN0RnVsbHNjcmVlblwiLFwibXNFeGl0RnVsbHNjcmVlblwiLFwibXNGdWxsc2NyZWVuRWxlbWVudFwiLFwibXNGdWxsc2NyZWVuRW5hYmxlZFwiLFwiTVNGdWxsc2NyZWVuQ2hhbmdlXCIsXCJNU0Z1bGxzY3JlZW5FcnJvclwiXV0saT17fTtmb3Iobj0wO248YS5sZW5ndGg7bisrKWlmKGU9YVtuXSxlJiZlWzFdaW4gdCl7Zm9yKG89MDtvPGUubGVuZ3RoO28rKylpW2FbMF1bb11dPWVbb107cmV0dXJuIGl9cmV0dXJuITF9KCk7aWYoIW4pcmV0dXJuIHZvaWQoZSYmZS5mYW5jeWJveCYmKGUuZmFuY3lib3guZGVmYXVsdHMuYnRuVHBsLmZ1bGxTY3JlZW49ITEpKTt2YXIgbz17cmVxdWVzdDpmdW5jdGlvbihlKXtlPWV8fHQuZG9jdW1lbnRFbGVtZW50LGVbbi5yZXF1ZXN0RnVsbHNjcmVlbl0oZS5BTExPV19LRVlCT0FSRF9JTlBVVCl9LGV4aXQ6ZnVuY3Rpb24oKXt0W24uZXhpdEZ1bGxzY3JlZW5dKCl9LHRvZ2dsZTpmdW5jdGlvbihlKXtlPWV8fHQuZG9jdW1lbnRFbGVtZW50LHRoaXMuaXNGdWxsc2NyZWVuKCk/dGhpcy5leGl0KCk6dGhpcy5yZXF1ZXN0KGUpfSxpc0Z1bGxzY3JlZW46ZnVuY3Rpb24oKXtyZXR1cm4gQm9vbGVhbih0W24uZnVsbHNjcmVlbkVsZW1lbnRdKX0sZW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRbbi5mdWxsc2NyZWVuRW5hYmxlZF0pfX07ZS5leHRlbmQoITAsZS5mYW5jeWJveC5kZWZhdWx0cyx7YnRuVHBsOntmdWxsU2NyZWVuOic8YnV0dG9uIGRhdGEtZmFuY3lib3gtZnVsbHNjcmVlbiBjbGFzcz1cImZhbmN5Ym94LWJ1dHRvbiBmYW5jeWJveC1idXR0b24tLWZ1bGxzY3JlZW5cIiB0aXRsZT1cInt7RlVMTF9TQ1JFRU59fVwiPjxzdmcgdmlld0JveD1cIjAgMCA0MCA0MFwiPjxwYXRoIGQ9XCJNOSwxMiBoMjIgdjE2IGgtMjIgdi0xNiB2MTYgaDIyIHYtMTYgWlwiIC8+PC9zdmc+PC9idXR0b24+J30sZnVsbFNjcmVlbjp7YXV0b1N0YXJ0OiExfX0pLGUodCkub24oe1wib25Jbml0LmZiXCI6ZnVuY3Rpb24odCxlKXt2YXIgbjtlJiZlLmdyb3VwW2UuY3VyckluZGV4XS5vcHRzLmZ1bGxTY3JlZW4/KG49ZS4kcmVmcy5jb250YWluZXIsbi5vbihcImNsaWNrLmZiLWZ1bGxzY3JlZW5cIixcIltkYXRhLWZhbmN5Ym94LWZ1bGxzY3JlZW5dXCIsZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24oKSx0LnByZXZlbnREZWZhdWx0KCksby50b2dnbGUoblswXSl9KSxlLm9wdHMuZnVsbFNjcmVlbiYmZS5vcHRzLmZ1bGxTY3JlZW4uYXV0b1N0YXJ0PT09ITAmJm8ucmVxdWVzdChuWzBdKSxlLkZ1bGxTY3JlZW49byk6ZSYmZS4kcmVmcy50b29sYmFyLmZpbmQoXCJbZGF0YS1mYW5jeWJveC1mdWxsc2NyZWVuXVwiKS5oaWRlKCl9LFwiYWZ0ZXJLZXlkb3duLmZiXCI6ZnVuY3Rpb24odCxlLG4sbyxhKXtlJiZlLkZ1bGxTY3JlZW4mJjcwPT09YSYmKG8ucHJldmVudERlZmF1bHQoKSxlLkZ1bGxTY3JlZW4udG9nZ2xlKGUuJHJlZnMuY29udGFpbmVyWzBdKSl9LFwiYmVmb3JlQ2xvc2UuZmJcIjpmdW5jdGlvbih0KXt0JiZ0LkZ1bGxTY3JlZW4mJm8uZXhpdCgpfX0pLGUodCkub24obi5mdWxsc2NyZWVuY2hhbmdlLGZ1bmN0aW9uKCl7dmFyIHQ9by5pc0Z1bGxzY3JlZW4oKSxuPWUuZmFuY3lib3guZ2V0SW5zdGFuY2UoKTtuJiYobi5jdXJyZW50JiZcImltYWdlXCI9PT1uLmN1cnJlbnQudHlwZSYmbi5pc0FuaW1hdGluZyYmKG4uY3VycmVudC4kY29udGVudC5jc3MoXCJ0cmFuc2l0aW9uXCIsXCJub25lXCIpLG4uaXNBbmltYXRpbmc9ITEsbi51cGRhdGUoITAsITAsMCkpLG4udHJpZ2dlcihcIm9uRnVsbHNjcmVlbkNoYW5nZVwiLHQpLG4uJHJlZnMuY29udGFpbmVyLnRvZ2dsZUNsYXNzKFwiZmFuY3lib3gtaXMtZnVsbHNjcmVlblwiLHQpKX0pfShkb2N1bWVudCx3aW5kb3cualF1ZXJ5fHxqUXVlcnkpLGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZS5mYW5jeWJveC5kZWZhdWx0cz1lLmV4dGVuZCghMCx7YnRuVHBsOnt0aHVtYnM6JzxidXR0b24gZGF0YS1mYW5jeWJveC10aHVtYnMgY2xhc3M9XCJmYW5jeWJveC1idXR0b24gZmFuY3lib3gtYnV0dG9uLS10aHVtYnNcIiB0aXRsZT1cInt7VEhVTUJTfX1cIj48c3ZnIHZpZXdCb3g9XCIwIDAgMTIwIDEyMFwiPjxwYXRoIGQ9XCJNMzAsMzAgaDE0IHYxNCBoLTE0IFogTTUwLDMwIGgxNCB2MTQgaC0xNCBaIE03MCwzMCBoMTQgdjE0IGgtMTQgWiBNMzAsNTAgaDE0IHYxNCBoLTE0IFogTTUwLDUwIGgxNCB2MTQgaC0xNCBaIE03MCw1MCBoMTQgdjE0IGgtMTQgWiBNMzAsNzAgaDE0IHYxNCBoLTE0IFogTTUwLDcwIGgxNCB2MTQgaC0xNCBaIE03MCw3MCBoMTQgdjE0IGgtMTQgWlwiIC8+PC9zdmc+PC9idXR0b24+J30sdGh1bWJzOnthdXRvU3RhcnQ6ITEsaGlkZU9uQ2xvc2U6ITAscGFyZW50RWw6XCIuZmFuY3lib3gtY29udGFpbmVyXCIsYXhpczpcInlcIn19LGUuZmFuY3lib3guZGVmYXVsdHMpO3ZhciBuPWZ1bmN0aW9uKHQpe3RoaXMuaW5pdCh0KX07ZS5leHRlbmQobi5wcm90b3R5cGUseyRidXR0b246bnVsbCwkZ3JpZDpudWxsLCRsaXN0Om51bGwsaXNWaXNpYmxlOiExLGlzQWN0aXZlOiExLGluaXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztlLmluc3RhbmNlPXQsdC5UaHVtYnM9ZTt2YXIgbj10Lmdyb3VwWzBdLG89dC5ncm91cFsxXTtlLm9wdHM9dC5ncm91cFt0LmN1cnJJbmRleF0ub3B0cy50aHVtYnMsZS4kYnV0dG9uPXQuJHJlZnMudG9vbGJhci5maW5kKFwiW2RhdGEtZmFuY3lib3gtdGh1bWJzXVwiKSxlLm9wdHMmJm4mJm8mJihcImltYWdlXCI9PW4udHlwZXx8bi5vcHRzLnRodW1ifHxuLm9wdHMuJHRodW1iKSYmKFwiaW1hZ2VcIj09by50eXBlfHxvLm9wdHMudGh1bWJ8fG8ub3B0cy4kdGh1bWIpPyhlLiRidXR0b24uc2hvdygpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe2UudG9nZ2xlKCl9KSxlLmlzQWN0aXZlPSEwKTplLiRidXR0b24uaGlkZSgpfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdCxuLG89dGhpcyxhPW8uaW5zdGFuY2UsaT1vLm9wdHMucGFyZW50RWw7by4kZ3JpZD1lKCc8ZGl2IGNsYXNzPVwiZmFuY3lib3gtdGh1bWJzIGZhbmN5Ym94LXRodW1icy0nK28ub3B0cy5heGlzKydcIj48L2Rpdj4nKS5hcHBlbmRUbyhhLiRyZWZzLmNvbnRhaW5lci5maW5kKGkpLmFkZEJhY2soKS5maWx0ZXIoaSkpLHQ9XCI8dWw+XCIsZS5lYWNoKGEuZ3JvdXAsZnVuY3Rpb24oZSxvKXtuPW8ub3B0cy50aHVtYnx8KG8ub3B0cy4kdGh1bWI/by5vcHRzLiR0aHVtYi5hdHRyKFwic3JjXCIpOm51bGwpLG58fFwiaW1hZ2VcIiE9PW8udHlwZXx8KG49by5zcmMpLG4mJm4ubGVuZ3RoJiYodCs9JzxsaSBkYXRhLWluZGV4PVwiJytlKydcIiAgdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCJmYW5jeWJveC10aHVtYnMtbG9hZGluZ1wiPjxpbWcgZGF0YS1zcmM9XCInK24rJ1wiIC8+PC9saT4nKX0pLHQrPVwiPC91bD5cIixvLiRsaXN0PWUodCkuYXBwZW5kVG8oby4kZ3JpZCkub24oXCJjbGlja1wiLFwibGlcIixmdW5jdGlvbigpe2EuanVtcFRvKGUodGhpcykuZGF0YShcImluZGV4XCIpKX0pLG8uJGxpc3QuZmluZChcImltZ1wiKS5oaWRlKCkub25lKFwibG9hZFwiLGZ1bmN0aW9uKCl7dmFyIHQsbixvLGEsaT1lKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtdGh1bWJzLWxvYWRpbmdcIikscz1pLm91dGVyV2lkdGgoKSxyPWkub3V0ZXJIZWlnaHQoKTt0PXRoaXMubmF0dXJhbFdpZHRofHx0aGlzLndpZHRoLG49dGhpcy5uYXR1cmFsSGVpZ2h0fHx0aGlzLmhlaWdodCxvPXQvcyxhPW4vcixvPj0xJiZhPj0xJiYobz5hPyh0Lz1hLG49cik6KHQ9cyxuLz1vKSksZSh0aGlzKS5jc3Moe3dpZHRoOk1hdGguZmxvb3IodCksaGVpZ2h0Ok1hdGguZmxvb3IobiksXCJtYXJnaW4tdG9wXCI6bj5yP01hdGguZmxvb3IoLjMqci0uMypuKTpNYXRoLmZsb29yKC41KnItLjUqbiksXCJtYXJnaW4tbGVmdFwiOk1hdGguZmxvb3IoLjUqcy0uNSp0KX0pLnNob3coKX0pLmVhY2goZnVuY3Rpb24oKXt0aGlzLnNyYz1lKHRoaXMpLmRhdGEoXCJzcmNcIil9KSxcInhcIj09PW8ub3B0cy5heGlzJiZvLiRsaXN0LndpZHRoKHBhcnNlSW50KG8uJGdyaWQuY3NzKFwicGFkZGluZy1yaWdodFwiKSkrYS5ncm91cC5sZW5ndGgqby4kbGlzdC5jaGlsZHJlbigpLmVxKDApLm91dGVyV2lkdGgoITApK1wicHhcIil9LGZvY3VzOmZ1bmN0aW9uKHQpe3ZhciBlLG4sbz10aGlzLGE9by4kbGlzdDtvLmluc3RhbmNlLmN1cnJlbnQmJihlPWEuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LXRodW1icy1hY3RpdmVcIikuZmlsdGVyKCdbZGF0YS1pbmRleD1cIicrby5pbnN0YW5jZS5jdXJyZW50LmluZGV4KydcIl0nKS5hZGRDbGFzcyhcImZhbmN5Ym94LXRodW1icy1hY3RpdmVcIiksbj1lLnBvc2l0aW9uKCksXCJ5XCI9PT1vLm9wdHMuYXhpcyYmKG4udG9wPDB8fG4udG9wPmEuaGVpZ2h0KCktZS5vdXRlckhlaWdodCgpKT9hLnN0b3AoKS5hbmltYXRlKHtzY3JvbGxUb3A6YS5zY3JvbGxUb3AoKStuLnRvcH0sdCk6XCJ4XCI9PT1vLm9wdHMuYXhpcyYmKG4ubGVmdDxhLnBhcmVudCgpLnNjcm9sbExlZnQoKXx8bi5sZWZ0PmEucGFyZW50KCkuc2Nyb2xsTGVmdCgpKyhhLnBhcmVudCgpLndpZHRoKCktZS5vdXRlcldpZHRoKCkpKSYmYS5wYXJlbnQoKS5zdG9wKCkuYW5pbWF0ZSh7c2Nyb2xsTGVmdDpuLmxlZnR9LHQpKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5pbnN0YW5jZS4kcmVmcy5jb250YWluZXIudG9nZ2xlQ2xhc3MoXCJmYW5jeWJveC1zaG93LXRodW1ic1wiLHRoaXMuaXNWaXNpYmxlKSx0aGlzLmlzVmlzaWJsZT8odGhpcy4kZ3JpZHx8dGhpcy5jcmVhdGUoKSx0aGlzLmluc3RhbmNlLnRyaWdnZXIoXCJvblRodW1ic1Nob3dcIiksdGhpcy5mb2N1cygwKSk6dGhpcy4kZ3JpZCYmdGhpcy5pbnN0YW5jZS50cmlnZ2VyKFwib25UaHVtYnNIaWRlXCIpLHRoaXMuaW5zdGFuY2UudXBkYXRlKCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLmlzVmlzaWJsZT0hMSx0aGlzLnVwZGF0ZSgpfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5pc1Zpc2libGU9ITAsdGhpcy51cGRhdGUoKX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dGhpcy5pc1Zpc2libGU9IXRoaXMuaXNWaXNpYmxlLHRoaXMudXBkYXRlKCl9fSksZSh0KS5vbih7XCJvbkluaXQuZmJcIjpmdW5jdGlvbih0LGUpe3ZhciBvO2UmJiFlLlRodW1icyYmKG89bmV3IG4oZSksby5pc0FjdGl2ZSYmby5vcHRzLmF1dG9TdGFydD09PSEwJiZvLnNob3coKSl9LFwiYmVmb3JlU2hvdy5mYlwiOmZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBhPWUmJmUuVGh1bWJzO2EmJmEuaXNWaXNpYmxlJiZhLmZvY3VzKG8/MDoyNTApfSxcImFmdGVyS2V5ZG93bi5mYlwiOmZ1bmN0aW9uKHQsZSxuLG8sYSl7dmFyIGk9ZSYmZS5UaHVtYnM7aSYmaS5pc0FjdGl2ZSYmNzE9PT1hJiYoby5wcmV2ZW50RGVmYXVsdCgpLGkudG9nZ2xlKCkpfSxcImJlZm9yZUNsb3NlLmZiXCI6ZnVuY3Rpb24odCxlKXt2YXIgbj1lJiZlLlRodW1icztuJiZuLmlzVmlzaWJsZSYmbi5vcHRzLmhpZGVPbkNsb3NlIT09ITEmJm4uJGdyaWQuaGlkZSgpfX0pfShkb2N1bWVudCx3aW5kb3cualF1ZXJ5KSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7dmFyIGU9e1wiJlwiOlwiJmFtcDtcIixcIjxcIjpcIiZsdDtcIixcIj5cIjpcIiZndDtcIiwnXCInOlwiJnF1b3Q7XCIsXCInXCI6XCImIzM5O1wiLFwiL1wiOlwiJiN4MkY7XCIsXCJgXCI6XCImI3g2MDtcIixcIj1cIjpcIiYjeDNEO1wifTtyZXR1cm4gU3RyaW5nKHQpLnJlcGxhY2UoL1smPD5cIidgPVxcL10vZyxmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfWUuZXh0ZW5kKCEwLGUuZmFuY3lib3guZGVmYXVsdHMse2J0blRwbDp7c2hhcmU6JzxidXR0b24gZGF0YS1mYW5jeWJveC1zaGFyZSBjbGFzcz1cImZhbmN5Ym94LWJ1dHRvbiBmYW5jeWJveC1idXR0b24tLXNoYXJlXCIgdGl0bGU9XCJ7e1NIQVJFfX1cIj48c3ZnIHZpZXdCb3g9XCIwIDAgNDAgNDBcIj48cGF0aCBkPVwiTTYsMzAgQzgsMTggMTksMTYgMjMsMTYgTDIzLDE2IEwyMywxMCBMMzMsMjAgTDIzLDI5IEwyMywyNCBDMTksMjQgOCwyNyA2LDMwIFpcIj48L3N2Zz48L2J1dHRvbj4nfSxzaGFyZTp7dHBsOic8ZGl2IGNsYXNzPVwiZmFuY3lib3gtc2hhcmVcIj48aDE+e3tTSEFSRX19PC9oMT48cD48YSBocmVmPVwiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NoYXJlci9zaGFyZXIucGhwP3U9e3tzcmN9fVwiIHRhcmdldD1cIl9ibGFua1wiIGNsYXNzPVwiZmFuY3lib3gtc2hhcmVfYnV0dG9uXCI+PHN2ZyB2ZXJzaW9uPVwiMS4xXCIgdmlld0JveD1cIjAgMCAzMiAzMlwiIGZpbGw9XCIjM2I1OTk4XCI+PHBhdGggZD1cIk0yNy42IDNoLTIzLjJjLS44IDAtMS40LjYtMS40IDEuNHYyMy4xYzAgLjkuNiAxLjUgMS40IDEuNWgxMi41di0xMC4xaC0zLjR2LTMuOWgzLjR2LTIuOWMwLTMuNCAyLjEtNS4yIDUtNS4yIDEuNCAwIDIuNy4xIDMgLjJ2My41aC0yLjFjLTEuNiAwLTEuOS44LTEuOSAxLjl2Mi41aDMuOWwtLjUgMy45aC0zLjR2MTAuMWg2LjZjLjggMCAxLjQtLjYgMS40LTEuNHYtMjMuMmMuMS0uOC0uNS0xLjQtMS4zLTEuNHpcIj48L3BhdGg+PC9zdmc+PHNwYW4+RmFjZWJvb2s8L3NwYW4+PC9hPjxhIGhyZWY9XCJodHRwczovL3d3dy5waW50ZXJlc3QuY29tL3Bpbi9jcmVhdGUvYnV0dG9uLz91cmw9e3tzcmN9fSZhbXA7ZGVzY3JpcHRpb249e3tkZXNjcn19XCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9XCJmYW5jeWJveC1zaGFyZV9idXR0b25cIj48c3ZnIHZlcnNpb249XCIxLjFcIiB2aWV3Qm94PVwiMCAwIDMyIDMyXCIgZmlsbD1cIiNjOTIyMjhcIj48cGF0aCBkPVwiTTE2IDNjLTcuMiAwLTEzIDUuOC0xMyAxMyAwIDUuNSAzLjQgMTAuMiA4LjMgMTIuMS0uMS0xLS4yLTIuNiAwLTMuNy4yLTEgMS41LTYuNSAxLjUtNi41cy0uNC0uOC0uNC0xLjljMC0xLjggMS0zLjIgMi40LTMuMiAxLjEgMCAxLjYuOCAxLjYgMS44IDAgMS4xLS43IDIuOC0xLjEgNC4zLS4zIDEuMy42IDIuMyAxLjkgMi4zIDIuMyAwIDQuMS0yLjQgNC4xLTYgMC0zLjEtMi4yLTUuMy01LjQtNS4zLTMuNyAwLTUuOSAyLjgtNS45IDUuNiAwIDEuMS40IDIuMyAxIDMgLjEuMS4xLjIuMS40LS4xLjQtLjMgMS4zLS40IDEuNS0uMS4yLS4yLjMtLjQuMi0xLjYtLjgtMi42LTMuMS0yLjYtNSAwLTQuMSAzLTcuOSA4LjYtNy45IDQuNSAwIDggMy4yIDggNy41IDAgNC41LTIuOCA4LjEtNi43IDguMS0xLjMgMC0yLjYtLjctMy0xLjUgMCAwLS43IDIuNS0uOCAzLjEtLjMgMS4xLTEuMSAyLjUtMS42IDMuNCAxLjIuNCAyLjUuNiAzLjguNiA3LjIgMCAxMy01LjggMTMtMTMgMC03LjEtNS44LTEyLjktMTMtMTIuOXpcIj48L3BhdGg+PC9zdmc+PHNwYW4+UGludGVyZXN0PC9zcGFuPjwvYT48YSBocmVmPVwiaHR0cHM6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdHdlZXQ/dXJsPXt7c3JjfX0mYW1wO3RleHQ9e3tkZXNjcn19XCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9XCJmYW5jeWJveC1zaGFyZV9idXR0b25cIj48c3ZnIHZlcnNpb249XCIxLjFcIiB2aWV3Qm94PVwiMCAwIDMyIDMyXCIgZmlsbD1cIiMxZGExZjJcIj48cGF0aCBkPVwiTTMwIDcuM2MtMSAuNS0yLjEuOC0zLjMuOSAxLjItLjcgMi4xLTEuOCAyLjUtMy4yLTEuMS43LTIuMyAxLjEtMy42IDEuNC0xLTEuMS0yLjUtMS44LTQuMi0xLjgtMy4yIDAtNS43IDIuNi01LjcgNS43IDAgLjUuMS45LjEgMS4zLTQuOC0uMi05LTIuNS0xMS44LTYtLjUuOS0uOCAxLjktLjggMyAwIDIgMSAzLjggMi42IDQuOC0uOSAwLTEuOC0uMy0yLjYtLjd2LjFjMCAyLjggMiA1LjEgNC42IDUuNi0uNS4xLTEgLjItMS41LjItLjQgMC0uNyAwLTEuMS0uMS43IDIuMyAyLjkgMy45IDUuNCA0LTIgMS41LTQuNCAyLjUtNy4xIDIuNS0uNSAwLS45IDAtMS40LS4xIDIuNSAxLjYgNS42IDIuNiA4LjggMi42IDEwLjYgMCAxNi4zLTguOCAxNi4zLTE2LjN2LS43YzEuMS0xIDItMiAyLjgtMy4yelwiPjwvcGF0aD48L3N2Zz48c3Bhbj5Ud2l0dGVyPC9zcGFuPjwvYT48L3A+PHA+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCJ7e3NyY19yYXd9fVwiIG9uZm9jdXM9XCJ0aGlzLnNlbGVjdCgpXCIgLz48L3A+PC9kaXY+J319KSxlKHQpLm9uKFwiY2xpY2tcIixcIltkYXRhLWZhbmN5Ym94LXNoYXJlXVwiLGZ1bmN0aW9uKCl7dmFyIHQsbyxhPWUuZmFuY3lib3guZ2V0SW5zdGFuY2UoKTthJiYodD1hLmN1cnJlbnQub3B0cy5oYXNoPT09ITE/YS5jdXJyZW50LnNyYzp3aW5kb3cubG9jYXRpb24sbz1hLmN1cnJlbnQub3B0cy5zaGFyZS50cGwucmVwbGFjZSgvXFx7XFx7c3JjXFx9XFx9L2csZW5jb2RlVVJJQ29tcG9uZW50KHQpKS5yZXBsYWNlKC9cXHtcXHtzcmNfcmF3XFx9XFx9L2csbih0KSkucmVwbGFjZSgvXFx7XFx7ZGVzY3JcXH1cXH0vZyxhLiRjYXB0aW9uP2VuY29kZVVSSUNvbXBvbmVudChhLiRjYXB0aW9uLnRleHQoKSk6XCJcIiksZS5mYW5jeWJveC5vcGVuKHtzcmM6YS50cmFuc2xhdGUoYSxvKSx0eXBlOlwiaHRtbFwiLG9wdHM6e2FuaW1hdGlvbkVmZmVjdDpcImZhZGVcIixhbmltYXRpb25EdXJhdGlvbjoyNTB9fSkpfSl9KGRvY3VtZW50LHdpbmRvdy5qUXVlcnl8fGpRdWVyeSksZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oKXt2YXIgdD1lLmxvY2F0aW9uLmhhc2guc3Vic3RyKDEpLG49dC5zcGxpdChcIi1cIiksbz1uLmxlbmd0aD4xJiYvXlxcKz9cXGQrJC8udGVzdChuW24ubGVuZ3RoLTFdKT9wYXJzZUludChuLnBvcCgtMSksMTApfHwxOjEsYT1uLmpvaW4oXCItXCIpO3JldHVybiBvPDEmJihvPTEpLHtoYXNoOnQsaW5kZXg6byxnYWxsZXJ5OmF9fWZ1bmN0aW9uIGEodCl7dmFyIGU7XCJcIiE9PXQuZ2FsbGVyeSYmKGU9bihcIltkYXRhLWZhbmN5Ym94PSdcIituLmVzY2FwZVNlbGVjdG9yKHQuZ2FsbGVyeSkrXCInXVwiKS5lcSh0LmluZGV4LTEpLGUubGVuZ3RofHwoZT1uKFwiI1wiK24uZXNjYXBlU2VsZWN0b3IodC5nYWxsZXJ5KSkpLGUubGVuZ3RoJiYocz0hMSxlLnRyaWdnZXIoXCJjbGlja1wiKSkpfWZ1bmN0aW9uIGkodCl7dmFyIGU7cmV0dXJuISF0JiYoZT10LmN1cnJlbnQ/dC5jdXJyZW50Lm9wdHM6dC5vcHRzLGUuaGFzaHx8KGUuJG9yaWc/ZS4kb3JpZy5kYXRhKFwiZmFuY3lib3hcIik6XCJcIikpfW4uZXNjYXBlU2VsZWN0b3J8fChuLmVzY2FwZVNlbGVjdG9yPWZ1bmN0aW9uKHQpe3ZhciBlPS8oW1xcMC1cXHgxZlxceDdmXXxeLT9cXGQpfF4tJHxbXlxceDgwLVxcdUZGRkZcXHctXS9nLG49ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT9cIlxcMFwiPT09dD9cIu+/vVwiOnQuc2xpY2UoMCwtMSkrXCJcXFxcXCIrdC5jaGFyQ29kZUF0KHQubGVuZ3RoLTEpLnRvU3RyaW5nKDE2KStcIiBcIjpcIlxcXFxcIit0fTtyZXR1cm4odCtcIlwiKS5yZXBsYWNlKGUsbil9KTt2YXIgcz0hMCxyPW51bGwsYz1udWxsO24oZnVuY3Rpb24oKXtuLmZhbmN5Ym94LmRlZmF1bHRzLmhhc2ghPT0hMSYmKG4odCkub24oe1wib25Jbml0LmZiXCI6ZnVuY3Rpb24odCxlKXt2YXIgbixhO2UuZ3JvdXBbZS5jdXJySW5kZXhdLm9wdHMuaGFzaCE9PSExJiYobj1vKCksYT1pKGUpLGEmJm4uZ2FsbGVyeSYmYT09bi5nYWxsZXJ5JiYoZS5jdXJySW5kZXg9bi5pbmRleC0xKSl9LFwiYmVmb3JlU2hvdy5mYlwiOmZ1bmN0aW9uKG4sbyxhKXt2YXIgbDthJiZhLm9wdHMuaGFzaCE9PSExJiYobD1pKG8pLGwmJlwiXCIhPT1sJiYoZS5sb2NhdGlvbi5oYXNoLmluZGV4T2YobCk8MCYmKG8ub3B0cy5vcmlnSGFzaD1lLmxvY2F0aW9uLmhhc2gpLHI9bCsoby5ncm91cC5sZW5ndGg+MT9cIi1cIisoYS5pbmRleCsxKTpcIlwiKSxcInJlcGxhY2VTdGF0ZVwiaW4gZS5oaXN0b3J5PyhjJiZjbGVhclRpbWVvdXQoYyksYz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5oaXN0b3J5W3M/XCJwdXNoU3RhdGVcIjpcInJlcGxhY2VTdGF0ZVwiXSh7fSx0LnRpdGxlLGUubG9jYXRpb24ucGF0aG5hbWUrZS5sb2NhdGlvbi5zZWFyY2grXCIjXCIrciksYz1udWxsLHM9ITF9LDMwMCkpOmUubG9jYXRpb24uaGFzaD1yKSl9LFwiYmVmb3JlQ2xvc2UuZmJcIjpmdW5jdGlvbihvLGEscyl7dmFyIGwsdTtjJiZjbGVhclRpbWVvdXQoYykscy5vcHRzLmhhc2ghPT0hMSYmKGw9aShhKSx1PWEmJmEub3B0cy5vcmlnSGFzaD9hLm9wdHMub3JpZ0hhc2g6XCJcIixsJiZcIlwiIT09bCYmKFwicmVwbGFjZVN0YXRlXCJpbiBoaXN0b3J5P2UuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sdC50aXRsZSxlLmxvY2F0aW9uLnBhdGhuYW1lK2UubG9jYXRpb24uc2VhcmNoK3UpOihlLmxvY2F0aW9uLmhhc2g9dSxuKGUpLnNjcm9sbFRvcChhLnNjcm9sbFRvcCkuc2Nyb2xsTGVmdChhLnNjcm9sbExlZnQpKSkscj1udWxsKX19KSxuKGUpLm9uKFwiaGFzaGNoYW5nZS5mYlwiLGZ1bmN0aW9uKCl7dmFyIHQ9bygpO24uZmFuY3lib3guZ2V0SW5zdGFuY2UoKT8hcnx8cj09PXQuZ2FsbGVyeStcIi1cIit0LmluZGV4fHwxPT09dC5pbmRleCYmcj09dC5nYWxsZXJ5fHwocj1udWxsLG4uZmFuY3lib3guY2xvc2UoKSk6XCJcIiE9PXQuZ2FsbGVyeSYmYSh0KX0pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXthKG8oKSl9LDUwKSl9KX0oZG9jdW1lbnQsd2luZG93LHdpbmRvdy5qUXVlcnl8fGpRdWVyeSk7XHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblx0JCgnLndwY2Y3Jykub24oJ3dwY2Y3bWFpbHNlbnQnLGZ1bmN0aW9uKCl7XHJcblx0XHQkLmZhbmN5Ym94LmNsb3NlKCB0cnVlICk7XHJcblx0fSk7XHJcblx0JCgnLndwY2Y3Jykub24oJ3dwY2Y3c3VibWl0JyxmdW5jdGlvbihldmVudCl7XHJcblx0XHQvL2NvbnNvbGUubG9nKGV2ZW50KTtcclxuXHRcdC8vY29uc29sZS5sb2coJ3NvbWUnKTtcclxuXHRcdHZhciBzZWxmPXRoaXM7XHJcblx0XHR3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0Y29uc29sZS5sb2coJChzZWxmKS5maW5kKCdkaXYud3BjZjctcmVzcG9uc2Utb3V0cHV0JykuaHRtbCgpKTtcclxuXHRcdHZhciByZXNwb25zZU91dHB1dCA9ICQoc2VsZikuZmluZCgnZGl2LndwY2Y3LXJlc3BvbnNlLW91dHB1dCcpLmh0bWwoKTtcclxuXHRcdFx0XHRqUXVlcnkuZmFuY3lib3gub3BlbihyZXNwb25zZU91dHB1dCk7XHJcblx0fSwxMDApO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIHJlYWR5U2VsZWN0KTtcclxuXHJcbmZ1bmN0aW9uIHJlYWR5U2VsZWN0KCkge1xyXG4gICAgbGV0IHNlbGVjdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2VsZWN0Jyk7XHJcbiAgICBpZiAoc2VsZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgc2VsZWN0c19pbml0KCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZWxlY3RzX2luaXQoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNlbGVjdHMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IHNlbGVjdHNbaW5kZXhdO1xyXG4gICAgICAgICAgICBzZWxlY3RfaW5pdChzZWxlY3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3NlbGVjdF9jYWxsYmFjaygpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgc2VsZWN0c19jbG9zZShlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdHNfY2xvc2UoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNlbGVjdHNfY2xvc2UoZSkge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VsZWN0Jyk7XHJcbiAgICAgICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcuc2VsZWN0JykgJiYgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnX29wdGlvbicpKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZWxlY3RzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ID0gc2VsZWN0c1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RfYm9keV9vcHRpb25zID0gc2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RfX29wdGlvbnMnKTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdfYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBfc2xpZGVVcChzZWxlY3RfYm9keV9vcHRpb25zLCAxMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2VsZWN0X2luaXQoc2VsZWN0KSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0X3BhcmVudCA9IHNlbGVjdC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdF9tb2RpZmlrYXRvciA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyk7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0X3NlbGVjdGVkX29wdGlvbiA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yKCdvcHRpb246Y2hlY2tlZCcpO1xyXG4gICAgICAgIHNlbGVjdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZGVmYXVsdCcsIHNlbGVjdF9zZWxlY3RlZF9vcHRpb24udmFsdWUpO1xyXG4gICAgICAgIHNlbGVjdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICAgICAgICBzZWxlY3RfcGFyZW50Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgJzxkaXYgY2xhc3M9XCJzZWxlY3Qgc2VsZWN0XycgKyBzZWxlY3RfbW9kaWZpa2F0b3IgKyAnXCI+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgIGxldCBuZXdfc2VsZWN0ID0gc2VsZWN0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdCcpO1xyXG4gICAgICAgIG5ld19zZWxlY3QuYXBwZW5kQ2hpbGQoc2VsZWN0KTtcclxuICAgICAgICBzZWxlY3RfaXRlbShzZWxlY3QpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2VsZWN0X2l0ZW0oc2VsZWN0KSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0X3BhcmVudCA9IHNlbGVjdC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdF9pdGVtcyA9IHNlbGVjdF9wYXJlbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdF9faXRlbScpO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdF9vcHRpb25zID0gc2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ29wdGlvbicpO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdF9zZWxlY3RlZF9vcHRpb24gPSBzZWxlY3QucXVlcnlTZWxlY3Rvcignb3B0aW9uOmNoZWNrZWQnKTtcclxuICAgICAgICBjb25zdCBzZWxlY3Rfc2VsZWN0ZWRfdGV4dCA9IHNlbGVjdF9zZWxlY3RlZF9vcHRpb24udGV4dDtcclxuICAgICAgICBjb25zdCBzZWxlY3RfdHlwZSA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpO1xyXG5cclxuICAgICAgICBpZiAoc2VsZWN0X2l0ZW1zKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdF9pdGVtcy5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzZWxlY3RfdHlwZV9jb250ZW50ID0gJyc7XHJcbiAgICAgICAgaWYgKHNlbGVjdF90eXBlID09ICdpbnB1dCcpIHtcclxuICAgICAgICAgICAgc2VsZWN0X3R5cGVfY29udGVudCA9ICc8ZGl2IGNsYXNzPVwic2VsZWN0X192YWx1ZSBpY29uLXNlbGVjdC1hcnJvd1wiPjxpbnB1dCBhdXRvY29tcGxldGU9XCJvZmZcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJmb3JtW11cIiB2YWx1ZT1cIicgKyBzZWxlY3Rfc2VsZWN0ZWRfdGV4dCArICdcIiBkYXRhLWVycm9yPVwi0J7RiNC40LHQutCwXCIgZGF0YS12YWx1ZT1cIicgKyBzZWxlY3Rfc2VsZWN0ZWRfdGV4dCArICdcIiBjbGFzcz1cInNlbGVjdF9faW5wdXRcIj48L2Rpdj4nO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGVjdF90eXBlX2NvbnRlbnQgPSAnPGRpdiBjbGFzcz1cInNlbGVjdF9fdmFsdWUgaWNvbi1zZWxlY3QtYXJyb3dcIj48c3Bhbj4nICsgc2VsZWN0X3NlbGVjdGVkX3RleHQgKyAnPC9zcGFuPjwvZGl2Pic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxlY3RfcGFyZW50Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJyxcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzZWxlY3RfX2l0ZW1cIj4nICtcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzZWxlY3RfX3RpdGxlXCI+JyArIHNlbGVjdF90eXBlX2NvbnRlbnQgKyAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGhpZGRlbiBjbGFzcz1cInNlbGVjdF9fb3B0aW9uc1wiPicgKyBzZWxlY3RfZ2V0X29wdGlvbnMoc2VsZWN0X29wdGlvbnMpICsgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAnPC9kaXY+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgIHNlbGVjdF9hY3Rpb25zKHNlbGVjdCwgc2VsZWN0X3BhcmVudCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZWxlY3RfYWN0aW9ucyhvcmlnaW5hbCwgc2VsZWN0KSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0X2l0ZW0gPSBzZWxlY3QucXVlcnlTZWxlY3RvcignLnNlbGVjdF9faXRlbScpO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdFRpdGxlID0gc2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RfX3RpdGxlJyk7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0X2JvZHlfb3B0aW9ucyA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0X19vcHRpb25zJyk7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0X29wdGlvbnMgPSBzZWxlY3QucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdF9fb3B0aW9uJyk7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0X3R5cGUgPSBvcmlnaW5hbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdF9pbnB1dCA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0X19pbnB1dCcpO1xyXG5cclxuICAgICAgICBzZWxlY3RUaXRsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdEl0ZW1BY3Rpb25zKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdE11bHRpSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZE9wdGlvbnMgPSBzZWxlY3QucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdF9fb3B0aW9uJyk7XHJcbiAgICAgICAgICAgIGxldCBvcmlnaW5hbE9wdGlvbnMgPSBvcmlnaW5hbC5xdWVyeVNlbGVjdG9yQWxsKCdvcHRpb24nKTtcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkT3B0aW9uc1RleHQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNlbGVjdGVkT3B0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uID0gc2VsZWN0ZWRPcHRpb25zW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsT3B0aW9uc1tpbmRleF0ucmVtb3ZlQXR0cmlidXRlKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uLmNsYXNzTGlzdC5jb250YWlucygnX3NlbGVjdGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RPcHRpb25UZXh0ID0gc2VsZWN0ZWRPcHRpb24uaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uc1RleHQucHVzaChzZWxlY3RPcHRpb25UZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE9wdGlvbnNbaW5kZXhdLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxlY3QucXVlcnlTZWxlY3RvcignLnNlbGVjdF9fdmFsdWUnKS5pbm5lckhUTUwgPSAnPHNwYW4+JyArIHNlbGVjdGVkT3B0aW9uc1RleHQgKyAnPC9zcGFuPic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdEl0ZW1BY3Rpb25zKHR5cGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3QnKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZWxlY3RzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IHNlbGVjdHNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdF9ib2R5X29wdGlvbnMgPSBzZWxlY3QucXVlcnlTZWxlY3RvcignLnNlbGVjdF9fb3B0aW9ucycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3QgIT0gc2VsZWN0X2l0ZW0uY2xvc2VzdCgnLnNlbGVjdCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdfYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zbGlkZVVwKHNlbGVjdF9ib2R5X29wdGlvbnMsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3NsaWRlVG9nZ2xlKHNlbGVjdF9ib2R5X29wdGlvbnMsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LnRvZ2dsZSgnX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZWxlY3Rfb3B0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0X29wdGlvbiA9IHNlbGVjdF9vcHRpb25zW2luZGV4XTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0X29wdGlvbl92YWx1ZSA9IHNlbGVjdF9vcHRpb24uZ2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdF9vcHRpb25fdGV4dCA9IHNlbGVjdF9vcHRpb24uaW5uZXJIVE1MO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNlbGVjdF90eXBlID09ICdpbnB1dCcpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdF9pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHNlbGVjdF9zZWFyY2gpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdF9vcHRpb24uZ2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJykgPT0gb3JpZ2luYWwudmFsdWUgJiYgIW9yaWdpbmFsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdF9vcHRpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxlY3Rfb3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNlbGVjdF9vcHRpb25zLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gc2VsZWN0X29wdGlvbnNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdF90eXBlID09ICdpbnB1dCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RfaW5wdXQudmFsdWUgPSBzZWxlY3Rfb3B0aW9uX3RleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWwudmFsdWUgPSBzZWxlY3Rfb3B0aW9uX3ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdF9vcHRpb24uY2xhc3NMaXN0LnRvZ2dsZSgnX3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdE11bHRpSXRlbXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QucXVlcnlTZWxlY3RvcignLnNlbGVjdF9fdmFsdWUnKS5pbm5lckhUTUwgPSAnPHNwYW4+JyArIHNlbGVjdF9vcHRpb25fdGV4dCArICc8L3NwYW4+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWwudmFsdWUgPSBzZWxlY3Rfb3B0aW9uX3ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rfb3B0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IHR5cGU7XHJcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICdtdWx0aXBsZSc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RJdGVtQWN0aW9ucyh0eXBlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2VsZWN0X2dldF9vcHRpb25zKHNlbGVjdF9vcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdF9vcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3Rfb3B0aW9uc19jb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZWxlY3Rfb3B0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdF9vcHRpb24gPSBzZWxlY3Rfb3B0aW9uc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3Rfb3B0aW9uX3ZhbHVlID0gc2VsZWN0X29wdGlvbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rfb3B0aW9uX3ZhbHVlICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0X29wdGlvbl90ZXh0ID0gc2VsZWN0X29wdGlvbi5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0X29wdGlvbnNfY29udGVudCA9IHNlbGVjdF9vcHRpb25zX2NvbnRlbnQgKyAnPGRpdiBkYXRhLXZhbHVlPVwiJyArIHNlbGVjdF9vcHRpb25fdmFsdWUgKyAnXCIgY2xhc3M9XCJzZWxlY3RfX29wdGlvblwiPicgKyBzZWxlY3Rfb3B0aW9uX3RleHQgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0X29wdGlvbnNfY29udGVudDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZWxlY3Rfc2VhcmNoKGUpIHtcclxuICAgICAgICBsZXQgc2VsZWN0X2Jsb2NrID0gZS50YXJnZXQuY2xvc2VzdCgnLnNlbGVjdCAnKS5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0X19vcHRpb25zJyk7XHJcbiAgICAgICAgbGV0IHNlbGVjdF9vcHRpb25zID0gZS50YXJnZXQuY2xvc2VzdCgnLnNlbGVjdCAnKS5xdWVyeVNlbGVjdG9yQWxsKCcuc2VsZWN0X19vcHRpb24nKTtcclxuICAgICAgICBsZXQgc2VsZWN0X3NlYXJjaF90ZXh0ID0gZS50YXJnZXQudmFsdWUudG9VcHBlckNhc2UoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Rfb3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0X29wdGlvbiA9IHNlbGVjdF9vcHRpb25zW2ldO1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0X3R4dF92YWx1ZSA9IHNlbGVjdF9vcHRpb24udGV4dENvbnRlbnQgfHwgc2VsZWN0X29wdGlvbi5pbm5lclRleHQ7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RfdHh0X3ZhbHVlLnRvVXBwZXJDYXNlKCkuaW5kZXhPZihzZWxlY3Rfc2VhcmNoX3RleHQpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdF9vcHRpb24uc3R5bGUuZGlzcGxheSA9IFwiXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rfb3B0aW9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNlbGVjdHNfdXBkYXRlX2FsbCgpIHtcclxuICAgICAgICBsZXQgc2VsZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlbGVjdCcpO1xyXG4gICAgICAgIGlmIChzZWxlY3RzKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZWxlY3RzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ID0gc2VsZWN0c1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RfaXRlbShzZWxlY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gXFxcXFxcXHJcblxyXG4gICAgLy9TbGlkZVRvZ2dsZVxyXG4gICAgbGV0IF9zbGlkZVVwID0gKHRhcmdldCwgZHVyYXRpb24gPSA1MDApID0+IHtcclxuICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ19zbGlkZScpKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdfc2xpZGUnKTtcclxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9ICdoZWlnaHQsIG1hcmdpbiwgcGFkZGluZyc7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBkdXJhdGlvbiArICdtcyc7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS5oZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgdGFyZ2V0Lm9mZnNldEhlaWdodDtcclxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS5oZWlnaHQgPSAwO1xyXG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUucGFkZGluZ1RvcCA9IDA7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS5wYWRkaW5nQm90dG9tID0gMDtcclxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLm1hcmdpblRvcCA9IDA7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAwO1xyXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuaGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnaGVpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctYm90dG9tJyk7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi10b3AnKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLWR1cmF0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdfc2xpZGUnKTtcclxuICAgICAgICAgICAgfSwgZHVyYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gbGV0IHN1Yk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtIHVsJyk7XHJcblxyXG4gICAgLy8gc3ViTWVudS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICAgIF9zbGlkZVVwKHN1Yk1lbnUsIDEwMCk7XHJcbiAgICAvLyB9KTtcclxuXHJcblxyXG4gICAgbGV0IF9zbGlkZURvd24gPSAodGFyZ2V0LCBkdXJhdGlvbiA9IDUwMCkgPT4ge1xyXG4gICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnX3NsaWRlJykpIHtcclxuICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ19zbGlkZScpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmhpZGRlbikge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLmhlaWdodCA9IDA7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS5wYWRkaW5nVG9wID0gMDtcclxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdCb3R0b20gPSAwO1xyXG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUubWFyZ2luVG9wID0gMDtcclxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLm1hcmdpbkJvdHRvbSA9IDA7XHJcbiAgICAgICAgICAgIHRhcmdldC5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSBcImhlaWdodCwgbWFyZ2luLCBwYWRkaW5nXCI7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBkdXJhdGlvbiArICdtcyc7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy1ib3R0b20nKTtcclxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdtYXJnaW4tdG9wJyk7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xyXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2hlaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLWR1cmF0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdfc2xpZGUnKTtcclxuICAgICAgICAgICAgfSwgZHVyYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBfc2xpZGVUb2dnbGUgPSAodGFyZ2V0LCBkdXJhdGlvbiA9IDUwMCkgPT4ge1xyXG4gICAgICAgIGlmICh0YXJnZXQuaGlkZGVuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfc2xpZGVEb3duKHRhcmdldCwgZHVyYXRpb24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfc2xpZGVVcCh0YXJnZXQsIGR1cmF0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vLyBcXFxcXFxcclxuLy8gRHluYW1pYyBBZGFwdCB2LjFcclxuLy8gSFRNTCBkYXRhLWRhPVwid2hlcmUodW5pcSBjbGFzcyBuYW1lKSx3aGVuKGJyZWFrcG9pbnQpLHBvc2l0aW9uKGRpZ2kpXCJcclxuLy8gZS54LiBkYXRhLWRhPVwiLml0ZW0sOTkyLDJcIlxyXG4vLyBBbmRyaWthbnljaCBZZXZoZW4gMjAyMFxyXG4vLyBodHRwczovL3d3dy55b3V0dWJlLmNvbS9jL2ZyZWVsYW5jZXJsaWZlc3R5bGVcclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgcmVhZHlQYWdlKTtcclxuXHJcbmZ1bmN0aW9uIHJlYWR5UGFnZSgpIHtcclxuICAgIGZ1bmN0aW9uIER5bmFtaWNBZGFwdCh0eXBlKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBEeW5hbWljQWRhcHQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vINC80LDRgdGB0LjQsiDQvtCx0YrQtdC60YLQvtCyXHJcbiAgICAgICAgdGhpcy7QvmJqZWN0cyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZGFDbGFzc25hbWUgPSBcIl9keW5hbWljX2FkYXB0X1wiO1xyXG4gICAgICAgIC8vINC80LDRgdGB0LjQsiBET00t0Y3Qu9C10LzQtdC90YLQvtCyXHJcbiAgICAgICAgdGhpcy5ub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1kYV1cIik7XHJcblxyXG4gICAgICAgIC8vINC90LDQv9C+0LvQvdC10L3QuNC1INC+YmplY3RzINC+0LHRitC60YLQsNC80LhcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubm9kZXNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBub2RlLmRhdGFzZXQuZGEudHJpbSgpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhQXJyYXkgPSBkYXRhLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgY29uc3Qg0L5iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICDQvmJqZWN0LmVsZW1lbnQgPSBub2RlO1xyXG4gICAgICAgICAgICDQvmJqZWN0LnBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAg0L5iamVjdC5kZXN0aW5hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YUFycmF5WzBdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgINC+YmplY3QuYnJlYWtwb2ludCA9IGRhdGFBcnJheVsxXSA/IGRhdGFBcnJheVsxXS50cmltKCkgOiBcIjc2N1wiO1xyXG4gICAgICAgICAgICDQvmJqZWN0LnBsYWNlID0gZGF0YUFycmF5WzJdID8gZGF0YUFycmF5WzJdLnRyaW0oKSA6IFwibGFzdFwiO1xyXG4gICAgICAgICAgICDQvmJqZWN0LmluZGV4ID0gdGhpcy5pbmRleEluUGFyZW50KNC+YmplY3QucGFyZW50LCDQvmJqZWN0LmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLtC+YmplY3RzLnB1c2go0L5iamVjdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFycmF5U29ydCh0aGlzLtC+YmplY3RzKTtcclxuXHJcbiAgICAgICAgLy8g0LzQsNGB0YHQuNCyINGD0L3QuNC60LDQu9GM0L3Ri9GFINC80LXQtNC40LAt0LfQsNC/0YDQvtGB0L7QslxyXG4gICAgICAgIHRoaXMubWVkaWFRdWVyaWVzID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMu0L5iamVjdHMsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnR5cGUgKyBcIi13aWR0aDogXCIgKyBpdGVtLmJyZWFrcG9pbnQgKyBcInB4KSxcIiArIGl0ZW0uYnJlYWtwb2ludDtcclxuICAgICAgICB9LCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1lZGlhUXVlcmllcyA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0aGlzLm1lZGlhUXVlcmllcywgZnVuY3Rpb24gKGl0ZW0sIGluZGV4LCBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHNlbGYsIGl0ZW0pID09PSBpbmRleDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8g0L3QsNCy0LXRiNC40LLQsNC90LjQtSDRgdC70YPRiNCw0YLQtdC70Y8g0L3QsCDQvNC10LTQuNCwLdC30LDQv9GA0L7RgVxyXG4gICAgICAgIC8vINC4INCy0YvQt9C+0LIg0L7QsdGA0LDQsdC+0YLRh9C40LrQsCDQv9GA0Lgg0L/QtdGA0LLQvtC8INC30LDQv9GD0YHQutC1XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lZGlhUXVlcmllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBtZWRpYSA9IHRoaXMubWVkaWFRdWVyaWVzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBtZWRpYVNwbGl0ID0gU3RyaW5nLnByb3RvdHlwZS5zcGxpdC5jYWxsKG1lZGlhLCAnLCcpO1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaE1lZGlhID0gd2luZG93Lm1hdGNoTWVkaWEobWVkaWFTcGxpdFswXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhQnJlYWtwb2ludCA9IG1lZGlhU3BsaXRbMV07XHJcblxyXG4gICAgICAgICAgICAvLyDQvNCw0YHRgdC40LIg0L7QsdGK0LXQutGC0L7QsiDRgSDQv9C+0LTRhdC+0LTRj9GJ0LjQvCDQsdGA0LXQudC60L/QvtC40L3RgtC+0LxcclxuICAgICAgICAgICAgY29uc3Qg0L5iamVjdHNGaWx0ZXIgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGhpcy7QvmJqZWN0cywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmJyZWFrcG9pbnQgPT09IG1lZGlhQnJlYWtwb2ludDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1hdGNoTWVkaWEuYWRkTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubWVkaWFIYW5kbGVyKG1hdGNoTWVkaWEsINC+YmplY3RzRmlsdGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMubWVkaWFIYW5kbGVyKG1hdGNoTWVkaWEsINC+YmplY3RzRmlsdGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIER5bmFtaWNBZGFwdC5wcm90b3R5cGUubWVkaWFIYW5kbGVyID0gZnVuY3Rpb24gKG1hdGNoTWVkaWEsINC+YmplY3RzKSB7XHJcbiAgICAgICAgaWYgKG1hdGNoTWVkaWEubWF0Y2hlcykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8INC+YmplY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCDQvmJqZWN0ID0g0L5iamVjdHNbaV07XHJcbiAgICAgICAgICAgICAgICDQvmJqZWN0LmluZGV4ID0gdGhpcy5pbmRleEluUGFyZW50KNC+YmplY3QucGFyZW50LCDQvmJqZWN0LmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlVG8o0L5iamVjdC5wbGFjZSwg0L5iamVjdC5lbGVtZW50LCDQvmJqZWN0LmRlc3RpbmF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwg0L5iamVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0INC+YmplY3QgPSDQvmJqZWN0c1tpXTtcclxuICAgICAgICAgICAgICAgIGlmICjQvmJqZWN0LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuZGFDbGFzc25hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlQmFjayjQvmJqZWN0LnBhcmVudCwg0L5iamVjdC5lbGVtZW50LCDQvmJqZWN0LmluZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8g0KTRg9C90LrRhtC40Y8g0L/QtdGA0LXQvNC10YnQtdC90LjRj1xyXG4gICAgRHluYW1pY0FkYXB0LnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbiAocGxhY2UsIGVsZW1lbnQsIGRlc3RpbmF0aW9uKSB7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuZGFDbGFzc25hbWUpO1xyXG4gICAgICAgIGlmIChwbGFjZSA9PT0gJ2xhc3QnIHx8IHBsYWNlID49IGRlc3RpbmF0aW9uLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWVuZCcsIGVsZW1lbnQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwbGFjZSA9PT0gJ2ZpcnN0Jykge1xyXG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCBlbGVtZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZXN0aW5hdGlvbi5jaGlsZHJlbltwbGFjZV0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmViZWdpbicsIGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCk0YPQvdC60YbQuNGPINCy0L7Qt9Cy0YDQsNGC0LBcclxuICAgIER5bmFtaWNBZGFwdC5wcm90b3R5cGUubW92ZUJhY2sgPSBmdW5jdGlvbiAocGFyZW50LCBlbGVtZW50LCBpbmRleCkge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmRhQ2xhc3NuYW1lKTtcclxuICAgICAgICBpZiAocGFyZW50LmNoaWxkcmVuW2luZGV4XSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbltpbmRleF0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmViZWdpbicsIGVsZW1lbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWVuZCcsIGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDQpNGD0L3QutGG0LjRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LjQvdC00LXQutGB0LAg0LLQvdGD0YLRgNC4INGA0L7QtNC40YLQtdC70Y9cclxuICAgIER5bmFtaWNBZGFwdC5wcm90b3R5cGUuaW5kZXhJblBhcmVudCA9IGZ1bmN0aW9uIChwYXJlbnQsIGVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBhcnJheSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHBhcmVudC5jaGlsZHJlbik7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYXJyYXksIGVsZW1lbnQpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQpNGD0L3QutGG0LjRjyDRgdC+0YDRgtC40YDQvtCy0LrQuCDQvNCw0YHRgdC40LLQsCDQv9C+IGJyZWFrcG9pbnQg0LggcGxhY2VcclxuICAgIC8vINC/0L4g0LLQvtC30YDQsNGB0YLQsNC90LjRjiDQtNC70Y8gdGhpcy50eXBlID0gbWluXHJcbiAgICAvLyDQv9C+INGD0LHRi9Cy0LDQvdC40Y4g0LTQu9GPIHRoaXMudHlwZSA9IG1heFxyXG4gICAgRHluYW1pY0FkYXB0LnByb3RvdHlwZS5hcnJheVNvcnQgPSBmdW5jdGlvbiAoYXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gXCJtaW5cIikge1xyXG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc29ydC5jYWxsKGFyciwgZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhLmJyZWFrcG9pbnQgPT09IGIuYnJlYWtwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhLnBsYWNlID09PSBiLnBsYWNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEucGxhY2UgPT09IFwiZmlyc3RcIiB8fCBiLnBsYWNlID09PSBcImxhc3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYS5wbGFjZSA9PT0gXCJsYXN0XCIgfHwgYi5wbGFjZSA9PT0gXCJmaXJzdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEucGxhY2UgLSBiLnBsYWNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBhLmJyZWFrcG9pbnQgLSBiLmJyZWFrcG9pbnQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5zb3J0LmNhbGwoYXJyLCBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEuYnJlYWtwb2ludCA9PT0gYi5icmVha3BvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEucGxhY2UgPT09IGIucGxhY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYS5wbGFjZSA9PT0gXCJmaXJzdFwiIHx8IGIucGxhY2UgPT09IFwibGFzdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEucGxhY2UgPT09IFwibGFzdFwiIHx8IGIucGxhY2UgPT09IFwiZmlyc3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5wbGFjZSAtIGEucGxhY2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGIuYnJlYWtwb2ludCAtIGEuYnJlYWtwb2ludDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGRhID0gbmV3IER5bmFtaWNBZGFwdChcIm1heFwiKTtcclxuICAgIGRhLmluaXQoKTtcclxufVxyXG5cclxuLyplbmQgb2YgaW5sdWRlcyovXHJcblxyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG5cdHZhciB3dyA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cdCQod2luZG93KS5vbihcIndsX3Jlc2l6ZVwiLCBmdW5jdGlvbiAoZXZlbnQsIHd3KSB7XHJcblx0XHRjb25zb2xlLmxvZyhcInNvbWVfY29kZVwiKTtcclxuXHR9KTtcclxuXHQkKHdpbmRvdykub24oXCJ3bF9yZXNpemVcIiwgZnVuY3Rpb24gKHQsIGUpIHtcclxuXHRcdCQoXCIubWVudS1tYWluIC5zdWItbWVudVwiKS5zdG9wKCkuc2xpZGVVcChcImZhc3RcIiksXHJcblx0XHRcdDEyNzkgPCBlID8gJChcIi5tZW51LW1haW5cIikuc2hvdygpIDogJChcIi5tZW51LW1haW5cIikuaGlkZSgpLFxyXG5cdFx0XHQkKFwiLmJ1cmdlclwiKS5yZW1vdmVDbGFzcyhcImJ1cmdlcl9hY3RpdmVcIilcclxuXHR9KSxcclxuXHRcdCQoXCIubWVudS1pdGVtLWhhcy1jaGlsZHJlbj5hXCIpLmNsaWNrKGZ1bmN0aW9uICh0KSB7XHJcblx0XHRcdDEyODAgPCB3dyB8fCAodC5wcmV2ZW50RGVmYXVsdCgpLFxyXG5cdFx0XHRcdCQodGhpcykucGFyZW50KCkuZmluZChcIi5zdWItbWVudVwiKS5zbGlkZVRvZ2dsZSh7XHJcblx0XHRcdFx0XHRzdGFydDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0XHRcImJsb2NrXCIgPT09ICQodGhpcykuY3NzKFwiZGlzcGxheVwiKSAmJiAkKHRoaXMpLmNzcyhcImRpc3BsYXlcIiwgXCJmbGV4XCIpLFxyXG5cdFx0XHRcdFx0XHRcdFwiZmxleFwiID09PSAkKHRoaXMpLmNzcyhcImRpc3BsYXlcIikgJiYgJChcIi5zdWItbWVudVwiKS5ub3QoJCh0aGlzKSkuc2xpZGVVcCgpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSkpXHJcblx0XHR9KSxcclxuXHRcdCQoXCIubWVudS1pdGVtLWhhcy1jaGlsZHJlblwiKS5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHd3IDwgMTI4MCB8fCAkKHRoaXMpLmZpbmQoXCIuc3ViLW1lbnVcIikuc3RvcCgpLnNsaWRlRG93bihcInNsb3dcIilcclxuXHRcdH0sIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0d3cgPCAxMjgwIHx8ICQodGhpcykuZmluZChcIi5zdWItbWVudVwiKS5zdG9wKCkuc2xpZGVVcChcImZhc3RcIilcclxuXHRcdH0pLFxyXG5cdFx0JChcIi5zdWItbWVudVwiKS5oaWRlKClcclxuXHJcbn0pO1xyXG5cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIHJlYWR5KTtcclxuXHJcbmZ1bmN0aW9uIHJlYWR5KCkge1xyXG5cdGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLXNlZ21lbnQtcGFydG5lcnMnKSkge1xyXG5cdFx0bGV0IHNsaWRlclNlZ21lbnRQYXJ0bmVycyA9IG5ldyBTd2lwZXIoXCIuc2xpZGVyLXNlZ21lbnQtcGFydG5lcnNcIiwge1xyXG5cdFx0XHRzbGlkZXNQZXJWaWV3OiAnYXV0bycsXHJcblx0XHRcdHdhdGNoT3ZlcmZsb3c6IHRydWUsXHJcblx0XHRcdHNwZWVkOiA4MDAsXHJcblx0XHRcdG9ic2VydmVyOiB0cnVlLFxyXG5cdFx0XHRvYnNlcnZlUGFyZW50czogdHJ1ZSxcclxuXHRcdFx0b2JzZXJ2ZVNsaWRlQ2hpbGRyZW46IHRydWUsXHJcblx0XHRcdHNwYWNlQmV0d2VlbjogNDAsXHJcblxyXG5cdFx0XHRsb29wOiB0cnVlLFxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VnbWVudC1wcm9qZWN0c19fc2xpZGVyJykpIHtcclxuXHRcdGxldCBzZWdtZW50UHJvamVjdHNTbGlkZXIgPSBuZXcgU3dpcGVyKFwiLnNlZ21lbnQtcHJvamVjdHNfX3NsaWRlclwiLCB7XHJcblx0XHRcdHdhdGNoT3ZlcmZsb3c6IHRydWUsXHJcblx0XHRcdHNwZWVkOiA4MDAsXHJcblx0XHRcdG9ic2VydmVyOiB0cnVlLFxyXG5cdFx0XHRvYnNlcnZlUGFyZW50czogdHJ1ZSxcclxuXHRcdFx0b2JzZXJ2ZVNsaWRlQ2hpbGRyZW46IHRydWUsXHJcblx0XHRcdG5hdmlnYXRpb246IHtcclxuXHRcdFx0XHRuZXh0RWw6IFwiLnNlZ21lbnQtcHJvamVjdHMgLmFycm93LW5leHRcIixcclxuXHRcdFx0XHRwcmV2RWw6IFwiLnNlZ21lbnQtcHJvamVjdHMgLmFycm93LXByZXZcIixcclxuXHRcdFx0fSxcclxuXHRcdFx0YnJlYWtwb2ludHM6IHtcclxuXHRcdFx0XHQzMjA6IHtcclxuXHRcdFx0XHRcdHNsaWRlc1BlclZpZXc6IDEsXHJcblx0XHRcdFx0XHRzcGFjZUJldHdlZW46IDIwLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0NzY4OiB7XHJcblx0XHRcdFx0XHRzbGlkZXNQZXJWaWV3OiAyLFxyXG5cdFx0XHRcdFx0c3BhY2VCZXR3ZWVuOiA0MCxcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHJcblxyXG5cdGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZS1zd2lwZXInKSkge1xyXG5cdFx0bGV0IHBhZ2VTd2lwZXIgPSBuZXcgU3dpcGVyKFwiLnBhZ2Utc3dpcGVyXCIsIHtcclxuXHRcdFx0d3JhcHBlckNsYXNzOiBcInBhZ2VfX3dyYXBwZXJcIixcclxuXHRcdFx0c2xpZGVDbGFzczogXCJwYWdlX19zY3JlZW5cIixcclxuXHRcdFx0ZGlyZWN0aW9uOiAndmVydGljYWwnLFxyXG5cdFx0XHRzbGlkZXNQZXJWaWV3OiAnYXV0bycsXHJcblx0XHRcdG1vdXNld2hlZWw6IHtcclxuXHRcdFx0XHRzZW5zaXRpdml0aTogMSxcclxuXHRcdFx0fSxcclxuXHRcdFx0aW5pdDogZmFsc2UsXHJcblx0XHRcdHdhdGNoT3ZlcmZsb3c6IHRydWUsXHJcblx0XHRcdHNwZWVkOiA4MDAsXHJcblx0XHRcdG9ic2VydmVyOiB0cnVlLFxyXG5cdFx0XHRvYnNlcnZlUGFyZW50czogdHJ1ZSxcclxuXHRcdFx0b2JzZXJ2ZVNsaWRlQ2hpbGRyZW46IHRydWUsXHJcblx0XHRcdG9uOiB7XHJcblx0XHRcdFx0aW5pdDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0c2V0U2Nyb2xsVHlwZSgpO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0cmVzaXplOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRzZXRTY3JvbGxUeXBlKCk7XHJcblx0XHRcdFx0XHRzZXRXaWR0aFBhZ2UoKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0c2Nyb2xsYmFyOiB7XHJcblx0XHRcdFx0ZWw6ICcucGFnZV9fc2Nyb2xsJyxcclxuXHRcdFx0XHRkcmFnQ2xhc3M6ICdwYWdlX19kcmFnLXNjcm9sbCcsXHJcblx0XHRcdFx0ZHJhZ2dhYmxlOiB0cnVlLFxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cclxuXHRcdHBhZ2VTd2lwZXIuaW5pdCgpO1xyXG5cclxuXHJcblxyXG5cdFx0ZnVuY3Rpb24gc2V0U2Nyb2xsVHlwZSgpIHtcclxuXHJcblx0XHRcdGxldCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2VfX3dyYXBwZXInKTtcclxuXHRcdFx0aWYgKHdyYXBwZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdfZnJlZScpKSB7XHJcblx0XHRcdFx0d3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdfZnJlZScpO1xyXG5cdFx0XHRcdHBhZ2VTd2lwZXIucGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcGFnZVN3aXBlci5zbGlkZXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcblx0XHRcdFx0Y29uc3QgcGFnZVNsaWRlID0gcGFnZVN3aXBlci5zbGlkZXNbaW5kZXhdO1xyXG5cdFx0XHRcdGNvbnN0IHBhZ2VTbGlkZUNvbnRlbnQgPSBwYWdlU2xpZGUucXVlcnlTZWxlY3RvcignLnNjcmVlbl9fY29udGVudCcpO1xyXG5cdFx0XHRcdGlmIChwYWdlU2xpZGVDb250ZW50KSB7XHJcblx0XHRcdFx0XHRjb25zdCBwYWdlU2xpZGVDb250ZW50SGVpZ2h0ID0gcGFnZVNsaWRlQ29udGVudC5vZmZzZXRIZWlnaHQ7XHJcblx0XHRcdFx0XHRpZiAocGFnZVNsaWRlQ29udGVudEhlaWdodCA+IHdpbmRvdy5pbm5lckhlaWdodCkge1xyXG5cdFx0XHRcdFx0XHR3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ19mcmVlJyk7XHJcblx0XHRcdFx0XHRcdHBhZ2VTd2lwZXIucGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHRmdW5jdGlvbiBzZXRXaWR0aFBhZ2UoKSB7XHJcblx0XHRcdGxldCB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cdFx0XHRpZiAod2luZG93V2lkdGggPD0gMTI4MCkge1xyXG5cdFx0XHRcdHBhZ2VTd2lwZXIuZGVzdHJveSgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHBhZ2VTd2lwZXIuaW5pdCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHJcblx0aWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdzLXNsaWRlcicpKSB7XHJcblx0XHRsZXQgbmV3c1NsaWRlciA9IG5ldyBTd2lwZXIoXCIubmV3cy1zbGlkZXJcIiwge1xyXG5cdFx0XHR3cmFwcGVyQ2xhc3M6IFwiaXRlbXNfX3dyYXBwZXJcIixcclxuXHRcdFx0c2xpZGVDbGFzczogXCJuZXdzLXNsaWRlXCIsXHJcblx0XHRcdHdhdGNoT3ZlcmZsb3c6IHRydWUsXHJcblx0XHRcdHNsaWRlc1BlclZpZXc6IDEsXHJcblx0XHRcdHNwYWNlQmV0d2VlbjogMjAsXHJcblx0XHRcdHNwZWVkOiA4MDAsXHJcblx0XHRcdG9ic2VydmVyOiB0cnVlLFxyXG5cdFx0XHRvYnNlcnZlUGFyZW50czogdHJ1ZSxcclxuXHRcdFx0b2JzZXJ2ZVNsaWRlQ2hpbGRyZW46IHRydWUsXHJcblx0XHRcdGF1dG9IZWlnaHQ6IHRydWUsXHJcblx0XHRcdG5hdmlnYXRpb246IHtcclxuXHRcdFx0XHRuZXh0RWw6IFwiLm5ld3Mtc2xpZGVyIC5hcnJvdy1uZXh0XCIsXHJcblx0XHRcdFx0cHJldkVsOiBcIi5uZXdzLXNsaWRlciAuYXJyb3ctcHJldlwiLFxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cclxuXHR9XHJcblxyXG5cdGxldCBidXJnZXJCdG5zID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnVyZ2VyXCIpXTtcclxuXHRsZXQgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xyXG5cdGxldCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImh0bWxcIik7XHJcblx0Zm9yIChjb25zdCBidXJnZXJCdG4gb2YgYnVyZ2VyQnRucykge1xyXG5cdFx0YnVyZ2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuXHRcdFx0aHRtbC5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGR1Y3VtZW50QWN0aW9ucyk7XHJcblxyXG5cdGZ1bmN0aW9uIGR1Y3VtZW50QWN0aW9ucyhlKSB7XHJcblx0XHRsZXQgZmFuY3lib3hCZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmFuY3lib3gtYmcnKTtcclxuXHRcdGZvciAoY29uc3QgZmFuY3lib3hCZyBvZiBmYW5jeWJveEJncykge1xyXG5cdFx0XHRsZXQgdGFyZ2V0RWxlbSA9IGUudGFyZ2V0O1xyXG5cclxuXHRcdFx0aWYgKHRhcmdldEVsZW0gPT09IGZhbmN5Ym94QmcpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygncnJycicpXHJcblx0XHRcdFx0JC5mYW5jeWJveC5jbG9zZSgpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbiJdLCJmaWxlIjoibWFpbi5qcyJ9
